<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>çˆ¬è™«è¿›é˜¶ | czzğŸ•‰ï¸</title><meta name="keywords" content="çˆ¬è™«"><meta name="author" content="czzğŸ•‰ï¸"><meta name="copyright" content="czzğŸ•‰ï¸"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="javascriptè°ƒè¯• å­¦ä¹ æ”¶è·  æµè§ˆå™¨çš„åŸºæœ¬ä½¿ç”¨ æµè§ˆå™¨è°ƒè¯•æ–­ç‚¹è®²è§£ æ€ä¹ˆè¿‡æ— é™debugger hookè°ƒè¯•å¥‡é—¨æŠ€å·§ å¸¸è§è¡¥ç¯å¢ƒæ–¹æ³•  1. æµè§ˆå™¨é¢æ¿è¡¥å…… Elements Network  ä¿ç•™æ—¥å¿—  å‹¾é€‰æ¯æ¬¡åˆ·æ–°ä¸ä¼šæ¸…é™¤ä¹‹å‰çš„è¯·æ±‚   åœç”¨ç¼“å­˜  å‹¾é€‰åä¸ä¼šä»ç¼“å­˜é‡Œé¢æ‹‰æ•°æ®ï¼Œæ–¹ä¾¿åç»­JSåŠ¨æ€è°ƒè¯•    Sources   page ï¼š æ‰€æœ‰èµ„æºæ–‡ä»¶   filesystemï¼š å…³è”æœ¬">
<meta property="og:type" content="article">
<meta property="og:title" content="çˆ¬è™«è¿›é˜¶">
<meta property="og:url" content="https://www.fomal.cc/posts/f27b843b.html">
<meta property="og:site_name" content="czzğŸ•‰ï¸">
<meta property="og:description" content="javascriptè°ƒè¯• å­¦ä¹ æ”¶è·  æµè§ˆå™¨çš„åŸºæœ¬ä½¿ç”¨ æµè§ˆå™¨è°ƒè¯•æ–­ç‚¹è®²è§£ æ€ä¹ˆè¿‡æ— é™debugger hookè°ƒè¯•å¥‡é—¨æŠ€å·§ å¸¸è§è¡¥ç¯å¢ƒæ–¹æ³•  1. æµè§ˆå™¨é¢æ¿è¡¥å…… Elements Network  ä¿ç•™æ—¥å¿—  å‹¾é€‰æ¯æ¬¡åˆ·æ–°ä¸ä¼šæ¸…é™¤ä¹‹å‰çš„è¯·æ±‚   åœç”¨ç¼“å­˜  å‹¾é€‰åä¸ä¼šä»ç¼“å­˜é‡Œé¢æ‹‰æ•°æ®ï¼Œæ–¹ä¾¿åç»­JSåŠ¨æ€è°ƒè¯•    Sources   page ï¼š æ‰€æœ‰èµ„æºæ–‡ä»¶   filesystemï¼š å…³è”æœ¬">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282036259.png">
<meta property="article:published_time" content="2023-02-28T12:20:36.000Z">
<meta property="article:modified_time" content="2025-05-10T07:23:28.624Z">
<meta property="article:author" content="czzğŸ•‰ï¸">
<meta property="article:tag" content="çˆ¬è™«">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282036259.png"><link rel="shortcut icon" href="/"><link rel="canonical" href="https://www.fomal.cc/posts/f27b843b"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'çˆ¬è™«è¿›é˜¶',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-05-10 15:23:28'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="czzğŸ•‰ï¸" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2023/05/08/6458dafb3921a.gif" onerror="onerror=null;src='/assets/r1.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">81</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">1</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> å” å¨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-love-sign">                   </use></svg><span class="menu_word" style="font-size:17px"> æ‹çˆ±å°å±‹</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> å…³äº</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">czzğŸ•‰ï¸</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-maoliang"></use></svg><span class="menu_word" style="font-size:17px"> ä¸ªäºº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/personal/bb/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-qunliaotian">                   </use></svg><span class="menu_word" style="font-size:17px"> å” å¨</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-love-sign">                   </use></svg><span class="menu_word" style="font-size:17px"> æ‹çˆ±å°å±‹</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/about/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-paperplane">                   </use></svg><span class="menu_word" style="font-size:17px"> å…³äº</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="æ£€ç´¢ç«™å†…ä»»ä½•ä½ æƒ³è¦çš„ä¿¡æ¯"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg><span> æœç´¢</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="ç¾åŒ–è®¾ç½®-è‡ªå®šä¹‰ä½ çš„é£æ ¼" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon">       </use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">çˆ¬è™«è¿›é˜¶</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">å‘è¡¨äº </span><time class="post-meta-date-created" datetime="2023-02-28T12:20:36.000Z" title="å‘è¡¨äº 2023-02-28 20:20:36">2023-02-28</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-05-10T07:23:28.624Z" title="æ›´æ–°äº 2025-05-10 15:23:28">2025-05-10</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">3.6w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>157åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="çˆ¬è™«è¿›é˜¶"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="javascriptè°ƒè¯•">javascriptè°ƒè¯•</h2>
<p><strong>å­¦ä¹ æ”¶è·</strong></p>
<ul>
<li>æµè§ˆå™¨çš„åŸºæœ¬ä½¿ç”¨</li>
<li>æµè§ˆå™¨è°ƒè¯•æ–­ç‚¹è®²è§£</li>
<li>æ€ä¹ˆè¿‡æ— é™debugger</li>
<li>hookè°ƒè¯•å¥‡é—¨æŠ€å·§</li>
<li>å¸¸è§è¡¥ç¯å¢ƒæ–¹æ³•</li>
</ul>
<h3 id="1-æµè§ˆå™¨é¢æ¿è¡¥å……">1. æµè§ˆå™¨é¢æ¿è¡¥å……</h3>
<h4 id="Elements">Elements</h4>
<h4 id="Network">Network</h4>
<ul>
<li>ä¿ç•™æ—¥å¿—
<ul>
<li>å‹¾é€‰æ¯æ¬¡åˆ·æ–°ä¸ä¼šæ¸…é™¤ä¹‹å‰çš„è¯·æ±‚</li>
</ul>
</li>
<li>åœç”¨ç¼“å­˜
<ul>
<li>å‹¾é€‰åä¸ä¼šä»ç¼“å­˜é‡Œé¢æ‹‰æ•°æ®ï¼Œæ–¹ä¾¿åç»­JSåŠ¨æ€è°ƒè¯•</li>
</ul>
</li>
</ul>
<h4 id="Sources">Sources</h4>
<ul>
<li>
<p>page ï¼š æ‰€æœ‰èµ„æºæ–‡ä»¶</p>
</li>
<li>
<p>filesystemï¼š å…³è”æœ¬åœ°æ–‡ä»¶</p>
</li>
<li>
<p>overridesï¼š  å¯ä»¥åšæ–‡ä»¶æ›¿æ¢ï¼Œæ¯”å¦‚æ›¿æ¢JS</p>
</li>
<li>
<p>ä»£ç æ®µï¼šå¯ä»¥ç¼–å†™è„šæœ¬ï¼Œå½±å“é¡µé¢,ä»£ç è®°å½•</p>
<ul>
<li>
<pre><code class="language-javascript">var a =document.querySelector(&quot;#su&quot;)
// å¯ä»¥åœ¨æ§åˆ¶å°æ“ä½œ è¾“å…¥ a.remove()
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">+ æ–­ç‚¹ä»‹ç»</span><br><span class="line"></span><br><span class="line">  åœ°å€ï¼šhttps:<span class="comment">//oauth.d.cn/auth/goLogin.html</span></span><br><span class="line"></span><br><span class="line">  + è·³è¿‡å­å‡½æ•°ï¼ˆæ¬¡æ€å‡½æ•°ï¼‰æ‰§è¡Œï¼ˆåªåœ¨ä¸»å‡½æ•°å†…ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œï¼Œä¸è¿›å…¥å­å‡½æ•°å†…éƒ¨ï¼‰</span><br><span class="line">  + è¿›å…¥å­å‡½æ•°ï¼ˆæ¬¡æ€å‡½æ•°ï¼‰æ‰§è¡Œï¼ˆåœ¨ä¸»å‡½æ•°å†…éƒ¨ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œï¼Œå¦‚æœé‡åˆ°å­å‡½æ•°ï¼Œä¼šè·³è½¬åˆ°å­å‡½æ•°å†…éƒ¨ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œï¼‰</span><br><span class="line">  + è·³å‡ºå½“å‰å‡½æ•°ï¼Œå›åˆ°è°ƒç”¨ä½ç½®</span><br><span class="line">  + å•æ­¥æ‰§è¡Œï¼Œä¼šè¿›å…¥åˆ°å‡½æ•°å†…éƒ¨ æ›´åŠ çš„ç»†è‡´</span><br><span class="line">  + å±è”½æ–­ç‚¹</span><br><span class="line"></span><br><span class="line">#### Application</span><br><span class="line"></span><br><span class="line">+ </span><br><span class="line"></span><br><span class="line">### <span class="number">3</span> æ–­ç‚¹è®²è§£</span><br><span class="line"></span><br><span class="line">ä½œç”¨ï¼šå¯¹æ•°æ®è¿›è¡Œç›‘å¬ï¼Œè·Ÿå€¼è¿›è¡Œåˆ†æ</span><br><span class="line"></span><br><span class="line">#### <span class="number">3.1</span> ä»€ä¹ˆæ˜¯æ–­ç‚¹</span><br><span class="line"></span><br><span class="line">**ç½‘ç«™è¿è¡Œæ—¶é—´è½´**</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<p>åŠ è½½Hmtl - åŠ è½½JS - è¿è¡ŒJSåˆå§‹åŒ– - ç”¨æˆ·è§¦å‘æŸä¸ªäº‹ä»¶ - è°ƒç”¨æŸæ®µJS - åŠ å¯†å‡½æ•° - ç»™æœåŠ¡å™¨å‘ä¿¡æ¯ï¼ˆXHR-SENDï¼‰ - æ¥æ”¶åˆ°æœåŠ¡å™¨æ•°æ® - è§£å¯†å‡½æ•°(å¦‚æœæ•°æ®åŠ å¯†çš„è¯) - åˆ·æ–°ç½‘é¡µæ¸²æŸ“</p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼šhttps:<span class="comment">//oauth.d.cn/auth/goLogin.html</span></span><br><span class="line"></span><br><span class="line">##### <span class="number">3.1</span><span class="number">.1</span> DOMäº‹ä»¶æ–­ç‚¹</span><br><span class="line"></span><br><span class="line">+ æ‰§è¡Œçš„æ¯”è¾ƒé å‰ è·ç¦»åŠ å¯†å‡½æ•°æ¯”è¾ƒè¿œ</span><br><span class="line"></span><br><span class="line">##### <span class="number">3.1</span><span class="number">.2</span> XHRæ–­ç‚¹</span><br><span class="line"></span><br><span class="line">+ æ‰§è¡Œæ¯”è¾ƒé å è·ç¦»åŠ å¯†å‡½æ•°ç›¸å¯¹è¾ƒè¿‘   å¯ä»¥æ ¹æ®æ ˆå¿«é€Ÿå®šä½</span><br><span class="line"></span><br><span class="line">  **æ³¨æ„**ï¼šéXHRå‘é€çš„å°±æ–­ä¸ä½</span><br><span class="line"></span><br><span class="line">### <span class="number">4</span> æ–¹æ³•æ ˆ</span><br><span class="line"></span><br><span class="line"> æ ˆæ˜¯ä¸€ç§å…ˆè¿›åå‡ºçš„ç‰¹æ®Šçº¿æ€§è¡¨ç»“æ„</span><br><span class="line"></span><br><span class="line">è°ƒç”¨æ ˆæ˜¯è§£æå™¨çš„ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥åœ¨è„šæœ¬è°ƒç”¨å¤šä¸ªå‡½æ•°æ—¶ï¼Œè·Ÿè¸ªæ¯ä¸ªå‡½æ•°åœ¨å®Œæˆæ‰§è¡Œæ—¶åº”è¯¥è¿”å›æ§åˆ¶çš„ç‚¹</span><br><span class="line"></span><br><span class="line">- å½“è„šæœ¬è¦è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè§£æå™¨æŠŠè¯¥å‡½æ•°æ·»åŠ åˆ°æ ˆä¸­å¹¶ä¸”æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚</span><br><span class="line">- ä»»ä½•è¢«è¿™ä¸ªå‡½æ•°è°ƒç”¨çš„å‡½æ•°ä¼šè¿›ä¸€æ­¥æ·»åŠ åˆ°è°ƒç”¨æ ˆä¸­ï¼Œå¹¶ä¸”è¿è¡Œåˆ°å®ƒä»¬è¢«ä¸Šä¸ªç¨‹åºè°ƒç”¨çš„ä½ç½®ã€‚</span><br><span class="line">- å½“å‡½æ•°è¿è¡Œç»“æŸåï¼Œè§£é‡Šå™¨å°†å®ƒä»å †æ ˆä¸­å–å‡ºï¼Œå¹¶åœ¨ä¸»ä»£ç åˆ—è¡¨ä¸­ç»§ç»­æ‰§è¡Œä»£ç ã€‚</span><br><span class="line"></span><br><span class="line">### <span class="number">5</span> debugåŸç†</span><br><span class="line"></span><br><span class="line">ç«™ç‚¹ï¼šhttp:<span class="comment">//cpquery.cnipa.gov.cn/</span></span><br><span class="line"></span><br><span class="line">+ æ— é™debbuggerä¸ä¼šçœŸæ­£å¾—æ­»å¾ªç¯ï¼Œè€Œæ˜¯æœ‰è§„å¾‹å¾—æ‰§è¡Œé€»è¾‘ï¼Œä¸€èˆ¬ç”¨å®šæ—¶å™¨</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">Function(<span class="string">&quot;debugger;&quot;</span>).call()</span><br></pre></td></tr></table></figure>
<h4 id="5-1-æ ·ä¾‹">5.1 æ ·ä¾‹</h4>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> ss = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;box&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">ff</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">debugger</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setInterval</span>(ff,<span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    ss.<span class="property">innerHTML</span> = <span class="string">&quot;å¤§å®¶æ™šä¸Šå¥½&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="5-1-1-æµè§ˆå™¨è¿‡debugger">5.1.1 æµè§ˆå™¨è¿‡debugger</h4>
<p>â€‹	1ï¼Œå½“å®šä¹‰å™¨è¿è¡Œåˆ°è¿™ä¸ªdebuggerè¿™ä¸ªä»£ç çš„æ—¶å€™ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å®ƒä¸ºtrueï¼Œå®ƒè‚¯å®šæ‰§è¡Œæˆ‘ä»¬çš„debuggerä»£ç ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç”¨æµè§ˆå™¨çš„åŠŸèƒ½ç»™ä»–æ”¹æˆfalse</p>
<p>2ï¼Œç¼–è¾‘æ–­ç‚¹</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å†™ä¸ª<span class="number">1</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="number">0</span>çš„å…ˆéªŒæ¡ä»¶ï¼Œæ°¸è¿œä¸ºå‡ï¼Œå°±æ°¸è¿œä¸ä¼šè¿›å…¥è¿™ä¸ªæ–­ç‚¹äº†ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="5-1-2-æ–¹æ³•ç½®ç©º">5.1.2 æ–¹æ³•ç½®ç©º</h4>
<p>æ— é™debuggeräº§ç”Ÿçš„åŸå› æ˜¯ç¬¬ä¸ƒè¡Œä»£ç <code>ff</code>è¿™ä¸ªå‡½æ•°é€ æˆçš„,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡å†™è¿™ä¸ªå‡½æ•°,ä½¿æ— é™debuggerå¤±æ•ˆ.åœ¨æ§åˆ¶å°ä¸­è¾“å…¥<code>function ff()&#123;&#125;</code>å³å¯,å¦‚å›¾:</p>
<p>æ³¨ï¼šä¸€å®šè¦åœ¨debuggerè¿›å…¥ä¹‹å‰</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setInterval_ba = <span class="built_in">setInterval</span></span><br><span class="line"><span class="built_in">setInterval</span> = <span class="keyword">function</span> <span class="title function_">ff</span>(<span class="params"></span>)&#123;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="5-13-è¿‡OBæ··æ·†debugger">5.13 è¿‡OBæ··æ·†debugger</h4>
<p>ç«™ç‚¹ï¼š<a target="_blank" rel="noopener" href="https://bz.zzzmh.cn/index">https://bz.zzzmh.cn/index</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__constructor_back</span> = <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span>;</span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">arguments</span> &amp;&amp; <span class="keyword">typeof</span> <span class="variable language_">arguments</span>[<span class="number">0</span>]===<span class="string">&#x27;string&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;debugger&quot;</span> === <span class="variable language_">arguments</span>[<span class="number">0</span>])&#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__constructor_back</span>.<span class="title function_">apply</span>(<span class="variable language_">this</span>,<span class="variable language_">arguments</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-hookæŠ€æœ¯">6  hookæŠ€æœ¯</h3>
<p>Hook æ˜¯ä¸€ç§é’©å­æŠ€æœ¯ï¼Œåœ¨ç³»ç»Ÿæ²¡æœ‰è°ƒç”¨å‡½æ•°ä¹‹å‰ï¼Œé’©å­ç¨‹åºå°±å…ˆå¾—åˆ°æ§åˆ¶æƒï¼Œè¿™æ—¶é’©å­å‡½æ•°æ—¢å¯ä»¥åŠ å·¥å¤„ç†ï¼ˆæ”¹å˜ï¼‰è¯¥å‡½æ•°çš„æ‰§è¡Œè¡Œä¸ºï¼Œä¹Ÿå¯ä»¥å¼ºåˆ¶ç»“æŸæ¶ˆæ¯çš„ä¼ é€’ã€‚ç®€å•æ¥è¯´ï¼Œä¿®æ”¹åŸæœ‰çš„ JS ä»£ç å°±æ˜¯ Hookã€‚</p>
<p><strong>Hook æŠ€æœ¯ä¹‹æ‰€ä»¥èƒ½å¤Ÿå®ç°æœ‰ä¸¤ä¸ªæ¡ä»¶ï¼š</strong></p>
<ul>
<li>å®¢æˆ·ç«¯æ‹¥æœ‰ JS çš„æœ€é«˜è§£é‡Šæƒï¼Œå¯ä»¥å†³å®šåœ¨ä»»ä½•æ—¶å€™æ³¨å…¥ JSï¼Œè€ŒæœåŠ¡å™¨æ— æ³•é˜»æ­¢æˆ–å¹²é¢„ã€‚æœåŠ¡ç«¯åªèƒ½é€šè¿‡æ£€æµ‹å’Œæ··æ·†çš„æ‰‹æ®µï¼Œå¦ Hook éš¾åº¦åŠ å¤§ï¼Œä½†æ˜¯æ— æ³•ç›´æ¥é˜»æ­¢ã€‚</li>
<li>é™¤äº†ä¸Šé¢çš„å¿…è¦æ¡ä»¶ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¡ä»¶ã€‚å°±æ˜¯ JS æ˜¯ä¸€ç§å¼±ç±»å‹è¯­è¨€ï¼ŒåŒä¸€ä¸ªå˜é‡å¯ä»¥å¤šæ¬¡å®šä¹‰ã€æ ¹æ®éœ€è¦è¿›è¡Œä¸åŒçš„èµ‹å€¼ï¼Œè€Œè¿™ç§æƒ…å†µå¦‚æœåœ¨å…¶ä»–å¼ºç±»å‹è¯­è¨€ä¸­åˆ™å¯èƒ½ä¼šæŠ¥é”™ï¼Œå¯¼è‡´ä»£ç æ— æ³•æ‰§è¡Œã€‚js çš„è¿™ç§ç‰¹æ€§ï¼Œä¸ºæˆ‘ä»¬ Hook ä»£ç æä¾›äº†ä¾¿åˆ©ã€‚</li>
</ul>
<p>**æ³¨æ„ï¼š**JS å˜é‡æ˜¯æœ‰ä½œç”¨åŸŸçš„ï¼Œåªæœ‰å½“è¢« hook å‡½æ•°å’Œ debugger æ–­ç‚¹åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸçš„æ—¶å€™ï¼Œæ‰èƒ½ hook æˆåŠŸã€‚</p>
<h4 id="6-1-Hookæ­¥éª¤ï¼š">6.1 <em>Hookæ­¥éª¤ï¼š</em></h4>
<ul>
<li>
<p>1ã€‚å¯»æ‰¾hookçš„ç‚¹</p>
</li>
<li>
<p>2ã€‚ç¼–å†™hooké€»è¾‘</p>
</li>
<li>
<p>3ã€‚è°ƒè¯•</p>
</li>
</ul>
<p><strong>æ³¨</strong>ï¼šæœ€å¸¸ç”¨çš„æ˜¯<code>hook cookie</code></p>
<h4 id="6-2-HOOK-cookieæ“ä½œ">6.2 HOOK cookieæ“ä½œ</h4>
<p>WEBAPIåœ°å€ï¼š<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API">https://developer.mozilla.org/zh-CN/docs/Web/API</a></p>
<p><code>Object.defineProperty </code>ä¸ºå¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œæ›¿æ¢å¯¹è±¡å±æ€§</p>
<p>åŸºæœ¬è¯­æ³•ï¼š<code>Object.defineProperty(obj, prop, descriptor)</code>ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œæ¥æ”¶çš„ä¸‰ä¸ªå‚æ•°å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><code>obj</code>ï¼šéœ€è¦å®šä¹‰å±æ€§çš„å½“å‰å¯¹è±¡ï¼›</p>
</li>
<li>
<p><code>prop</code>ï¼šå½“å‰éœ€è¦å®šä¹‰çš„å±æ€§åï¼›</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(user,<span class="string">&quot;age&quot;</span>,&#123;</span><br><span class="line"> <span class="attr">get</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¿™ä¸ªäººæ¥è·å–å€¼äº†ï¼ï¼&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> count;</span><br><span class="line"> &#125;,</span><br><span class="line">    </span><br><span class="line"> <span class="attr">set</span>:<span class="keyword">function</span>(<span class="params">newVal</span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¿™ä¸ªäººæ¥è®¾ç½®å€¼äº†ï¼ï¼&quot;</span>);</span><br><span class="line">      count=newVal+<span class="number">1</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>cookie ç¤ºèŒƒ</strong></p>
<p>ç¤ºèŒƒä¾‹å­ï¼š<a target="_blank" rel="noopener" href="http://q.10jqka.com.cn/">http://q.10jqka.com.cn/</a></p>
<p>cookie é’©å­ç”¨äºå®šä½ cookie ä¸­å…³é”®å‚æ•°ç”Ÿæˆä½ç½®ï¼Œä»¥ä¸‹ä»£ç æ¼”ç¤ºäº†å½“ cookie ä¸­åŒ¹é…åˆ°äº† <code>v</code>ï¼Œ åˆ™æ’å…¥æ–­ç‚¹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> cookieTemp = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">document</span>, <span class="string">&#x27;cookie&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (val.<span class="title function_">indexOf</span>(<span class="string">&#x27;v&#x27;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">debugger</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hookæ•è·åˆ°cookieè®¾ç½®-&gt;&#x27;</span>, val);</span><br><span class="line">      cookieTemp = val;</span><br><span class="line">      <span class="keyword">return</span> val;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> cookieTemp;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šæ­£å¸¸<code>hook cookie</code>æ“ä½œçš„æ—¶å€™éœ€è¦æ¸…é™¤ä¸‹<code>cookie</code></p>
<h4 id="6-3-hook-æ–¹æ³•">6.3 hook æ–¹æ³•</h4>
<p>ç«™ç‚¹ï¼š<a target="_blank" rel="noopener" href="https://www.wcbchina.com/login/login.html">https://www.wcbchina.com/login/login.html</a></p>
<p>æˆ‘ä»¬çŸ¥é“åœ¨ JavaScript ä¸­ <code>JSON.stringify()</code> æ–¹æ³•ç”¨äºå°† JavaScript å¯¹è±¡æˆ–å€¼è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ï¼Œ<code>JSON.parse()</code> æ–¹æ³•ç”¨äºå°†ä¸€ä¸ª JSON å­—ç¬¦ä¸²è½¬æ¢ä¸º JavaScript å¯¹è±¡ï¼ŒæŸäº›ç«™ç‚¹åœ¨å‘ web æœåŠ¡å™¨ä¼ è¾“ç”¨æˆ·åå¯†ç æ—¶ï¼Œä¼šç”¨åˆ°è¿™ä¸¤ä¸ªæ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> stringify = <span class="title class_">JSON</span>.<span class="property">stringify</span>;</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="property">stringify</span> = <span class="keyword">function</span>(<span class="params">params</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hook JSON.stringify â€”â€”&gt; &quot;</span>, params);</span><br><span class="line">        <span class="keyword">debugger</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">stringify</span>(params);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªå˜é‡ <code>stringify</code> ä¿ç•™åŸå§‹ <code>JSON.stringify</code> æ–¹æ³•ï¼Œç„¶åé‡å†™ <code>JSON.stringify</code> æ–¹æ³•ï¼Œé‡åˆ° <code>JSON.stringify</code> æ–¹æ³•å°±ä¼šæ‰§è¡Œ debugger è¯­å¥ï¼Œä¼šç«‹å³æ–­ä¸‹ï¼Œæœ€åå°†æ¥æ”¶åˆ°çš„å‚æ•°è¿”å›ç»™åŸå§‹çš„ <code>JSON.stringify</code> æ–¹æ³•è¿›è¡Œå¤„ç†ï¼Œç¡®ä¿æ•°æ®æ­£å¸¸ä¼ è¾“</p>
<h4 id="6-4-hook-XHRè¯·æ±‚">6.4 hook  XHRè¯·æ±‚</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> open = <span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">open</span>;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">open</span> = <span class="keyword">function</span> (<span class="params">method, url, <span class="keyword">async</span></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (url.<span class="title function_">indexOf</span>(<span class="string">&quot;analysis&quot;</span>) != <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">debugger</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> open.<span class="title function_">apply</span>(<span class="variable language_">this</span>, <span class="variable language_">arguments</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>å®šä¹‰äº†ä¸€ä¸ªå˜é‡ <code>open</code> ä¿ç•™åŸå§‹ <code>XMLHttpRequest.open</code> æ–¹æ³•ï¼Œç„¶åé‡å†™ <code>XMLHttpRequest.open</code> æ–¹æ³•ï¼Œåˆ¤æ–­å¦‚æœ rnd å­—ç¬¦ä¸²å€¼åœ¨ URL é‡Œé¦–æ¬¡å‡ºç°çš„ä½ç½®ä¸ä¸º -1ï¼Œå³ URL é‡ŒåŒ…å« <code>analysis</code>å­—ç¬¦ä¸²ï¼Œåˆ™æ‰§è¡Œ <code>debugger</code> è¯­å¥ï¼Œä¼šç«‹å³æ–­ä¸‹ã€‚</p>
<h3 id="7-pythonæ‰§è¡ŒJSçš„æ–¹å¼">7 pythonæ‰§è¡ŒJSçš„æ–¹å¼</h3>
<h5 id="7-1-PyExecJS">7.1 PyExecJS</h5>
<p>åœ°å€;<a target="_blank" rel="noopener" href="https://github.com/doloopwhile/PyExecJS">https://github.com/doloopwhile/PyExecJS</a></p>
<p>PyExecJS æ˜¯ä½¿ç”¨æœ€å¤šçš„ä¸€ç§æ–¹å¼ï¼Œåº•å±‚å®ç°æ–¹å¼æ˜¯ï¼šåœ¨æœ¬åœ° JS ç¯å¢ƒä¸‹è¿è¡Œ JS ä»£ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install PyExecJS </span><br></pre></td></tr></table></figure>
<p>7.1.1 è¯»å–JSä»£ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(file_name, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;UTF-8&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">	result = file.read()</span><br></pre></td></tr></table></figure>
<p>7.1.2 execjs ç±»çš„compile()æ–¹æ³•ç¼–è¯‘åŠ è½½ä¸Šé¢çš„ JS å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context1 = execjs.<span class="built_in">compile</span>(<span class="string">&quot;è¿™é‡Œé¢æ˜¯JSä»£ç &quot;</span>)</span><br></pre></td></tr></table></figure>
<p>7.1.3 è°ƒç”¨ä¸Šä¸‹æ–‡å¯¹è±¡çš„call() æ–¹æ³•æ‰§è¡Œ JS æ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result1 = context1.call(<span class="string">&quot;å‡½æ•°&quot;</span>, <span class="string">&quot;å‚æ•°1&quot;</span>, <span class="string">&quot;å‚æ•°2&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„ï¼Œç”±äº PyExecJS è¿è¡Œåœ¨æœ¬åœ° JS ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ä¹‹å‰ä¼šå¯åŠ¨ JS ç¯å¢ƒï¼Œæœ€ç»ˆå¯¼è‡´è¿è¡Œé€Ÿåº¦ä¼šåæ…¢</p>
<p>7.1.4 evalæ‰§è¡Œ</p>
<p>eval() å‡½æ•°è®¡ç®— JavaScript å­—ç¬¦ä¸²ï¼Œå¹¶æŠŠå®ƒä½œä¸ºè„šæœ¬ä»£ç æ¥æ‰§è¡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">print</span>(execjs.<span class="built_in">eval</span>(<span class="string">&#x27;Date.now()&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h3 id="8-æµè§ˆå™¨ç¯å¢ƒè¡¥å……æ–¹æ³•">8 æµè§ˆå™¨ç¯å¢ƒè¡¥å……æ–¹æ³•</h3>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/obj-window.html">https://www.runoob.com/jsref/obj-window.html</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span> = &#123;</span><br><span class="line">    <span class="attr">cookie</span>:<span class="string">&#x27;uuid_tt_dd=10_29360271920-1658044222535-945484; __gads=ID=5b925b796ab29466-22740a5938d50041:T=1658044224:RT=1658044224:S=ALNI_MYZZ3qnATdjgh4YHRlZaBk3TnwTFw; p_uid=U010000&#x27;</span>,</span><br><span class="line">    location : &#123;</span><br><span class="line">        <span class="attr">href</span>:<span class="string">&#x27;https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=1&amp;tn=87135040_oem_dg&amp;wd=eval%20JS%20&amp;fenlei=256&amp;oq=eval&amp;rsv_pq=e1b3f2520003297e&amp;rsv_t=7e58%2ByqRgVEysyNAVRctyGmKUct9An%2B6da7wzdVJDXgo7qaAS1DKyn86mLazGA1IqBPpY359&amp;rqlang=cn&amp;rsv_dl=tb&amp;rsv_enter=1&amp;rsv_btype=t&amp;inputT=860&amp;rsv_sug3=56&amp;rsv_sug1=35&amp;rsv_sug7=100&amp;rsv_sug2=0&amp;rsv_sug4=1037&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">navigator = &#123;<span class="attr">userAgent</span>:<span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span> = &#123;</span><br><span class="line">    <span class="variable language_">document</span> : <span class="variable language_">document</span>,</span><br><span class="line">    <span class="attr">navigator</span>:navigator</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="property">location</span>.<span class="property">href</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">getElementsByTagName</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="æ‘˜è¦ç®—æ³•">æ‘˜è¦ç®—æ³•</h2>
<p>åœ¨ <code>JavaScript</code> ä¸­å’Œ <code>Python </code>ä¸­çš„åŸºæœ¬å®ç°æ–¹æ³•ï¼Œé‡åˆ° <code>JS</code> åŠ å¯†çš„æ—¶å€™å¯ä»¥å¿«é€Ÿè¿˜åŸåŠ å¯†è¿‡ç¨‹ï¼Œæœ‰çš„ç½‘ç«™åœ¨åŠ å¯†çš„è¿‡ç¨‹ä¸­å¯èƒ½è¿˜ç»è¿‡äº†å…¶ä»–å¤„ç†ï¼Œä½†æ˜¯å¤§è‡´çš„æ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>æ¶ˆæ¯æ‘˜è¦ç®—æ³•/ç­¾åç®—æ³•ï¼š<code>MD5ã€SHAã€HMAC</code></p>
<h3 id="1-MD5">1. MD5</h3>
<p>ç®€ä»‹ï¼šå…¨ç§°<code> MD5</code> æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼Œåˆç§°å“ˆå¸Œç®—æ³•ã€æ•£åˆ—ç®—æ³•ï¼Œç”±ç¾å›½å¯†ç å­¦å®¶<code>ç½—çº³å¾·Â·æç»´æ–¯ç‰¹</code>è®¾è®¡ï¼Œäº 1992 å¹´ä½œä¸º RFC 1321 è¢«å…¬å¸ƒï¼Œç”¨ä»¥å–ä»£ MD4 ç®—æ³•ã€‚æ‘˜è¦ç®—æ³•æ˜¯å•å‘åŠ å¯†çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜æ–‡é€šè¿‡æ‘˜è¦ç®—æ³•åŠ å¯†ä¹‹åï¼Œæ˜¯ä¸èƒ½è§£å¯†çš„ã€‚æ‘˜è¦ç®—æ³•çš„ç¬¬äºŒä¸ªç‰¹ç‚¹å¯†æ–‡æ˜¯å›ºå®šé•¿åº¦çš„ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠä»»æ„é•¿åº¦çš„æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªé•¿åº¦å›ºå®šçš„æ•°æ®ä¸²ï¼ˆé€šå¸¸ç”¨<code>16è¿›åˆ¶</code>çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰ã€‚ä¹‹æ‰€ä»¥å«æ‘˜è¦ç®—æ³•ï¼Œå®ƒçš„ç®—æ³•å°±æ˜¯æå–æ˜æ–‡é‡è¦çš„ç‰¹å¾ã€‚æ‰€ä»¥ï¼Œä¸¤ä¸ªä¸åŒçš„æ˜æ–‡ï¼Œä½¿ç”¨äº†æ‘˜è¦ç®—æ³•ä¹‹åï¼Œæœ‰å¯èƒ½ä»–ä»¬çš„å¯†æ–‡æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡è¿™ä¸ªæ¦‚ç‡éå¸¸çš„ä½ã€‚</p>
<h4 id="1-1-JavaScript-å®ç°">1.1 JavaScript å®ç°</h4>
<p>åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.autohome.com.cn/changsha/">https://www.autohome.com.cn/changsha/</a></p>
<p>å®‰è£…å¯¹åº”çš„æ¨¡å—</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install crypto-js  --save</span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨æ¡ˆä¾‹</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">CryptoJS</span> = <span class="built_in">require</span>(<span class="string">&#x27;crypto-js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MD5Test</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> text = <span class="string">&quot;I love python!&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">CryptoJS</span>.<span class="title class_">MD5</span>(text).<span class="title function_">toString</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">MD5Test</span>())  <span class="comment">// 21169ee3acd4a24e1fcb4322cfd9a2b8</span></span><br></pre></td></tr></table></figure>
<h4 id="1-2-Python-å®ç°">1.2 Python å®ç°</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">md5_test2</span>():</span><br><span class="line">    md5 = hashlib.md5()</span><br><span class="line">    md5.update(<span class="string">&#x27;python&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="built_in">print</span>(md5.hexdigest())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    md5_test2()  <span class="comment"># 21169ee3acd4a24e1fcb4322cfd9a2b8</span></span><br></pre></td></tr></table></figure>
<p><strong>æ€»ç»“ï¼š</strong><code>MD5</code>å“ˆå¸Œè§†ä¸ºå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯å°†å…¶è§†ä¸ºåå…­è¿›åˆ¶æ•°ï¼Œ <code>MD5</code>å“ˆå¸Œé•¿åº¦ä¸º128ä½ï¼Œé€šå¸¸ç”±<code>32</code>ä¸ªåå…­è¿›åˆ¶æ•°å­—è¡¨ç¤ºã€‚</p>
<h3 id="2-SHA">2. SHA</h3>
<p>ç®€ä»‹ï¼šå…¨ç§°å®‰å…¨å“ˆå¸Œç®—æ³•ï¼Œç”±ç¾å›½å›½å®¶å®‰å…¨å±€<code>ï¼ˆNSAï¼‰</code>æ‰€è®¾è®¡ï¼Œä¸»è¦é€‚ç”¨äºæ•°å­—ç­¾åæ ‡å‡†é‡Œé¢å®šä¹‰çš„æ•°å­—ç­¾åç®—æ³•ï¼Œ<code>SHA</code> é€šå¸¸æŒ‡ <code>SHA</code> å®¶æ—çš„äº”ä¸ªç®—æ³•ï¼Œåˆ†åˆ«æ˜¯<code> SHA-1ã€SHA-224ã€SHA-256ã€SHA-384ã€SHA-512</code>ï¼Œ<code>SHA</code> æ˜¯æ¯” <code>MD5</code> æ›´å®‰å…¨ä¸€ç‚¹çš„æ‘˜è¦ç®—æ³•ï¼Œ<code>MD5</code> çš„å¯†æ–‡æ˜¯ 32 ä½ï¼Œè€Œ <code>SHA-1</code> æ˜¯ 40 ä½ï¼Œç‰ˆæœ¬è¶Šå¼ºï¼Œå¯†æ–‡è¶Šé•¿ï¼Œä»£ä»·æ˜¯é€Ÿåº¦è¶Šæ…¢ã€‚</p>
<h4 id="2-1-JavaScript-å®ç°">2.1  JavaScript å®ç°</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">CryptoJS</span> = <span class="built_in">require</span>(<span class="string">&#x27;crypto-js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SHA1Encrypt</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> text = <span class="string">&quot;I love python!&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">CryptoJS</span>.<span class="title class_">SHA1</span>(text).<span class="title function_">toString</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">SHA1Encrypt</span>())  <span class="comment">// 23c02b203bd2e2ca19da911f1d270a06d86719fb</span></span><br></pre></td></tr></table></figure>
<h4 id="2-2-Python-å®ç°">2.2 Python å®ç°</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sha1_test2</span>():</span><br><span class="line">    sha1 = hashlib.sha1()</span><br><span class="line">    sha1.update(<span class="string">&#x27;I love python!&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="built_in">print</span>(sha1.hexdigest())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    sha1_test2()  <span class="comment"># 23c02b203bd2e2ca19da911f1d270a06d86719fb</span></span><br></pre></td></tr></table></figure>
<h3 id="3-HMAC">3. <code>HMAC</code></h3>
<p>ç®€ä»‹ï¼šå…¨ç§°æ•£åˆ—æ¶ˆæ¯è®¤è¯ç ã€å¯†é’¥ç›¸å…³çš„å“ˆå¸Œè¿ç®—æ¶ˆæ¯è®¤è¯ç ï¼Œäº 1996 å¹´æå‡ºï¼Œ1997 å¹´ä½œä¸º RFC 2104 è¢«å…¬å¸ƒï¼Œ<code>HMAC</code> åŠ å¯†ç®—æ³•æ˜¯ä¸€ç§å®‰å…¨çš„åŸºäºåŠ å¯† <code>Hash</code> å‡½æ•°å’Œå…±äº«å¯†é’¥çš„æ¶ˆæ¯è®¤è¯åè®®ï¼Œå®ƒè¦æ±‚é€šä¿¡åŒæ–¹å…±äº«å¯†é’¥ keyã€çº¦å®šç®—æ³•ã€å¯¹æŠ¥æ–‡è¿›è¡Œ <code>Hash</code> è¿ç®—ï¼Œå½¢æˆå›ºå®šé•¿åº¦çš„è®¤è¯ç ã€‚é€šä¿¡åŒæ–¹é€šè¿‡è®¤è¯ç çš„æ ¡éªŒæ¥ç¡®å®šæŠ¥æ–‡çš„åˆæ³•æ€§ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li>ç™¾ç§‘ï¼š<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/hmac/7307543?fr=aladdin">https://baike.baidu.com/item/hmac/7307543?fr=aladdin</a></li>
</ul>
<h4 id="3-1-JavaScript-å®ç°">3.1 JavaScript å®ç°</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">CryptoJS</span> = <span class="built_in">require</span>(<span class="string">&#x27;crypto-js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">HMACEncrypt</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> text = <span class="string">&quot;I love python!&quot;</span></span><br><span class="line">    <span class="keyword">var</span> key = <span class="string">&quot;secret&quot;</span>   <span class="comment">// å¯†é’¥æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">CryptoJS</span>.<span class="title class_">HmacMD5</span>(text, key).<span class="title function_">toString</span>();</span><br><span class="line">    <span class="comment">// return CryptoJS.HmacSHA1(text, key).toString();</span></span><br><span class="line">    <span class="comment">// return CryptoJS.HmacSHA256(text, key).toString();</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">HMACEncrypt</span>())</span><br></pre></td></tr></table></figure>
<h4 id="3-2-Python-å®ç°">3.2 Python å®ç°</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hmac</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hmac_test1</span>():</span><br><span class="line">    message = <span class="string">b&#x27;I love python!&#x27;</span></span><br><span class="line">    key = <span class="string">b&#x27;secret&#x27;</span></span><br><span class="line">    md5 = hmac.new(key, message, digestmod=<span class="string">&#x27;MD5&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(md5.hexdigest())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hmac_test2</span>():</span><br><span class="line">    key = <span class="string">&#x27;secret&#x27;</span>.encode(<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    sha1 = hmac.new(key, digestmod=<span class="string">&#x27;sha1&#x27;</span>)</span><br><span class="line">    sha1.update(<span class="string">&#x27;I love &#x27;</span>.encode(<span class="string">&#x27;utf8&#x27;</span>))</span><br><span class="line">    sha1.update(<span class="string">&#x27;Python!&#x27;</span>.encode(<span class="string">&#x27;utf8&#x27;</span>))</span><br><span class="line">    <span class="built_in">print</span>(sha1.hexdigest())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    hmac_test1()  <span class="comment"># 9c503a1f852edcc3526ea56976c38edf</span></span><br><span class="line">    hmac_test2()  <span class="comment"># 2d8449a4292d4bbeed99ce9ea570880d6e19b61a</span></span><br></pre></td></tr></table></figure>
<h3 id="4-å®æˆ˜æ¡ˆä¾‹">4. å®æˆ˜æ¡ˆä¾‹</h3>
<h4 id="4-1-æ¡ˆä¾‹-md5åŠ å¯†é€†å‘">4.1 æ¡ˆä¾‹ <code>md5</code>åŠ å¯†é€†å‘</h4>
<h5 id="4-1-1-é€†å‘ç›®æ ‡">4.1.1 <strong>é€†å‘ç›®æ ‡</strong></h5>
<ul>
<li>
<p>ä¸»é¡µï¼š<a target="_blank" rel="noopener" href="http://fanyi.youdao.com/">http://fanyi.youdao.com/</a></p>
</li>
<li>
<p>é€†å‘å­—æ®µï¼š<code>sign: 'asdasdasdasdasdasdasd'</code></p>
</li>
</ul>
<h5 id="4-1-2-é€†å‘åˆ†æ">4.1.2 <strong>é€†å‘åˆ†æ</strong></h5>
<ol>
<li>å…ˆè¿›è¡ŒæŠ“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªç­¾åä¿¡æ¯ <code>sign</code></li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c1ba28035.png" alt="image-20241128090455920" style="zoom:33%;" />
<ol start="2">
<li>æ•°æ®åŠ å¯†ä½ç½®ï¼Œå¯ä»¥åœ¨è¿™å„¿è¿›è¡Œåˆ†æ</li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c1dab8655.png" alt="image-20241128090525355" style="zoom:33%;" />
<h5 id="4-1-3-pythonä»£ç æ¨¡æ‹Ÿ">4.1.3 <strong>pythonä»£ç æ¨¡æ‹Ÿ</strong></h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">@author: å¤æ´›</span></span><br><span class="line"><span class="string">@QQ: 1972386194</span></span><br><span class="line"><span class="string">@site: https://www.tulingxueyuan.cn/</span></span><br><span class="line"><span class="string">@file: ç½‘æ˜“äº‘.py</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> requests,time,random</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Crawl</span>():</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.headers = &#123;</span><br><span class="line">            <span class="string">&#x27;Cookie&#x27;</span>: <span class="string">&#x27;OUTFOX_SEARCH_USER_ID=322076570@10.169.0.83; JSESSIONID=aaaZhLm5ZNK87a08TerIx; OUTFOX_SEARCH_USER_ID_NCOO=1158799533.2810698; ___rl__test__cookies=&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(math.ceil(time.time() * <span class="number">1000</span>)),</span><br><span class="line"></span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36&#x27;</span>,</span><br><span class="line"></span><br><span class="line">            <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;http://fanyi.youdao.com/&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">self</span>.url = <span class="string">&#x27;http://fanyi.youdao.com/translate_o?smartresult=dict&amp;smartresult=rule&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">spider</span>(<span class="params">self,key</span>):</span><br><span class="line"></span><br><span class="line">        times = <span class="built_in">str</span>(math.ceil(time.time() * <span class="number">1000</span>) + random.randint(<span class="number">1</span>, <span class="number">10</span>))</span><br><span class="line">        sign = <span class="variable language_">self</span>.Md5(<span class="string">&quot;fanyideskweb&quot;</span> + key + <span class="built_in">str</span>(times) + <span class="string">&quot;Tbh5E8=q6U3EXe+&amp;L[4c@&quot;</span>)</span><br><span class="line"></span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">&quot;i&quot;</span>: key,</span><br><span class="line">            <span class="string">&quot;from&quot;</span>: <span class="string">&quot;AUTO&quot;</span>,</span><br><span class="line">            <span class="string">&quot;to&quot;</span>: <span class="string">&quot;AUTO&quot;</span>,</span><br><span class="line">            <span class="string">&quot;smartresult&quot;</span>: <span class="string">&quot;dict&quot;</span>,</span><br><span class="line">            <span class="string">&quot;client&quot;</span>: <span class="string">&quot;fanyideskweb&quot;</span>,</span><br><span class="line">            <span class="string">&quot;salt&quot;</span>: times,</span><br><span class="line">            <span class="string">&quot;sign&quot;</span>: sign,</span><br><span class="line">            <span class="string">&quot;lts&quot;</span>: times[:-<span class="number">1</span>],</span><br><span class="line">            <span class="string">&quot;bv&quot;</span>: <span class="string">&quot;cda1e53e0c0eb8dd4002cefc117fa588&quot;</span>,</span><br><span class="line">            <span class="string">&quot;doctype&quot;</span>: <span class="string">&quot;json&quot;</span>,</span><br><span class="line">            <span class="string">&quot;version&quot;</span>: <span class="string">&quot;2.1&quot;</span>,</span><br><span class="line">            <span class="string">&quot;keyfrom&quot;</span>: <span class="string">&quot;fanyi.web&quot;</span>,</span><br><span class="line">            <span class="string">&quot;action&quot;</span>: <span class="string">&quot;FY_BY_REALTlME&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        res = requests.post(<span class="variable language_">self</span>.url, data=data, headers=<span class="variable language_">self</span>.headers).json()</span><br><span class="line">        <span class="keyword">if</span> res.get(<span class="string">&#x27;errorCode&#x27;</span>) == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;æ‰§è¡Œçš„ç»“æœ:&#x27;</span> + res.get(<span class="string">&#x27;translateResult&#x27;</span>)[<span class="number">0</span>][<span class="number">0</span>][<span class="string">&#x27;tgt&#x27;</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Md5</span>(<span class="params">self,value</span>):</span><br><span class="line">        md = hashlib.md5()</span><br><span class="line">        md.update(value.encode(<span class="string">&#x27;utf8&#x27;</span>)) <span class="comment"># æ¥æ”¶å­—èŠ‚ç±»å‹  16è¿›åˆ¶è¡¨ç¤º</span></span><br><span class="line">        <span class="keyword">return</span> md.hexdigest()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        s = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥ä½ ä¸æ‡‚çš„è¯æœ¯&amp;&amp;è¾“å…¥yé€€å‡º:&#x27;</span>)</span><br><span class="line">        Crawl().spider(s)</span><br><span class="line">        <span class="keyword">if</span> s == <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4-2-æ¡ˆä¾‹sha256ç³»åˆ—">4.2 æ¡ˆä¾‹<code>sha256</code>ç³»åˆ—</h4>
<p><strong>é€†å‘ç›®æ ‡</strong></p>
<ul>
<li>
<p>ä¸»é¡µï¼š<a target="_blank" rel="noopener" href="http://www.hh1024.com/">http://www.hh1024.com/</a></p>
</li>
<li>
<p>æ¥å£ï¼š<a target="_blank" rel="noopener" href="https://ucp.hrdjyun.com:60359/api/dy">https://ucp.hrdjyun.com:60359/api/dy</a></p>
</li>
<li>
<p>é€†å‘å‚æ•°ï¼š<code>sign: &quot;0d2864b1420c42f12de6efeff30bcb4b458157d8177675b8910fa632524604cb&quot;</code></p>
</li>
</ul>
<h5 id="4-2-1-æŠ“åŒ…åˆ†æï¼š">4.2.1  æŠ“åŒ…åˆ†æï¼š</h5>
<ol>
<li>é€šè¿‡å¯¹æ¯”ï¼Œå¯ä»¥å‘ç°è¿™ä¸ªå‚æ•°æ¯æ¬¡éƒ½ä¼šåˆ‡æ¢</li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c1fd8207b.png" alt="image-20241128090603065" style="zoom:33%;" />
<h5 id="4-2-2-è°ƒè¯•åŠ å¯†åœ°åœ°ç‚¹">4.2.2 è°ƒè¯•åŠ å¯†åœ°åœ°ç‚¹</h5>
<ol>
<li>æ‰“å¼€å…¨å±€æœç´¢ <code>sign</code>å…³é”®å­—</li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c220b79e8.png" alt="image-20241128090638600" style="zoom:33%;" />
<ol start="2">
<li>å‚æ•°åŠ å¯†åœ°ç‚¹</li>
</ol>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c23b12bbd.png" alt="image-20241128090705223" style="zoom:67%;" />
<h5 id="4-2-3-pythonä»£ç å®ç°">4.2.3 pythonä»£ç å®ç°</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib3,requests,time,json</span><br><span class="line">urllib3.disable_warnings()</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line">months = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æŸ¥è¯¢æœˆä»½ï¼š&quot;</span>)</span><br><span class="line">days = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æŸ¥è¯¢æ—¥æœŸ,2å¤©ä»¥å†…ï¼š&quot;</span>)</span><br><span class="line">times = <span class="built_in">str</span>(<span class="built_in">int</span>(time.time()) * <span class="number">1000</span>)</span><br><span class="line">params = &#123;<span class="string">&quot;no&quot;</span>:<span class="string">&quot;dy0002&quot;</span>,<span class="string">&quot;data&quot;</span>:&#123;<span class="string">&quot;days&quot;</span>:<span class="number">1</span>,<span class="string">&quot;rankType&quot;</span>:<span class="number">5</span>,<span class="string">&quot;liveDay&quot;</span>:<span class="string">f&quot;2022-<span class="subst">&#123;months.zfill(<span class="number">2</span>)&#125;</span>-<span class="subst">&#123;days.zfill(<span class="number">2</span>)&#125;</span>&quot;</span>&#125;&#125;</span><br><span class="line"><span class="built_in">print</span>(params)</span><br><span class="line">dd = json.dumps(params)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_sign</span>():</span><br><span class="line">    data = <span class="string">f&#x27;param=<span class="subst">&#123;dd&#125;</span>&amp;timestamp=<span class="subst">&#123;times&#125;</span>&amp;tenant=1&amp;salt=kbn%&amp;)@&lt;?FGkfs8sdf4Vg1*+;`kf5ndl$&#x27;</span>  <span class="comment"># è¦è¿›è¡ŒåŠ å¯†çš„æ•°æ®</span></span><br><span class="line">    data_sha = hashlib.sha256(data.encode(<span class="string">&#x27;utf-8&#x27;</span>)).hexdigest()</span><br><span class="line">    <span class="keyword">return</span> data_sha</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>():</span><br><span class="line">    s = get_sign()</span><br><span class="line">    datas = &#123;<span class="string">&quot;param&quot;</span>:dd,<span class="string">&quot;sign&quot;</span>:s,<span class="string">&quot;tenant&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;timestamp&quot;</span>:times,<span class="string">&quot;token&quot;</span>:t&#125;</span><br><span class="line">    url = <span class="string">&#x27;https://ucp.hrdjyun.com:60359/api/dy&#x27;</span></span><br><span class="line">    res = session.post(url,headers=headers,data=json.dumps(datas))</span><br><span class="line">    <span class="keyword">if</span> res.json().get(<span class="string">&#x27;status&#x27;</span>) == <span class="number">0</span>:</span><br><span class="line">        data = res.json().get(<span class="string">&#x27;data&#x27;</span>)[<span class="string">&#x27;rankList&#x27;</span>]</span><br><span class="line">        <span class="keyword">for</span> d <span class="keyword">in</span> data:</span><br><span class="line">            items = &#123;&#125;</span><br><span class="line">            items[<span class="string">&#x27;æŠ–éŸ³å&#x27;</span>] = d.get(<span class="string">&#x27;anchorName&#x27;</span>)</span><br><span class="line">            items[<span class="string">&#x27;å¸¦è´§é”€é‡&#x27;</span>] =<span class="string">&#x27;%.2f&#x27;</span> % (d.get(<span class="string">&#x27;salesVolume&#x27;</span>) / <span class="number">10000</span>) + <span class="string">&#x27;ä¸‡&#x27;</span></span><br><span class="line">            items[<span class="string">&#x27;å¸¦è´§é”€å”®é¢&#x27;</span>] = <span class="string">&#x27;%.2f&#x27;</span> % (d.get(<span class="string">&#x27;salesMoney&#x27;</span>) / <span class="number">1000000</span>) + <span class="string">&#x27;ä¸‡&#x27;</span></span><br><span class="line">            items[<span class="string">&#x27;ç²‰ä¸&#x27;</span>] = <span class="string">&#x27;%.2f&#x27;</span> % (d.get(<span class="string">&#x27;fans&#x27;</span>) / <span class="number">10000</span>) + <span class="string">&#x27;ä¸‡&#x27;</span></span><br><span class="line">            items[<span class="string">&#x27;åœ¨çº¿äººæ•°&#x27;</span>] = <span class="string">&#x27;%.2f&#x27;</span> % (d.get(<span class="string">&#x27;online&#x27;</span>) / <span class="number">10000</span>) + <span class="string">&#x27;ä¸‡&#x27;</span></span><br><span class="line">            items[<span class="string">&#x27;æ—¶é—´&#x27;</span>]  =d.get(<span class="string">&#x27;liveDay&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(items)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    reads = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        æœ¬æ¥å£åªå¼€æ”¾æŠ–éŸ³å¸¦è´§é”€é‡æ—¥æ¦œ</span></span><br><span class="line"><span class="string">        å¯ä»¥æ ¹æ®æ—¥æœŸæŸ¥è¯¢</span></span><br><span class="line"><span class="string">                                --- å¤æ´›</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(reads)</span><br><span class="line">    get_data()</span><br></pre></td></tr></table></figure>
<h2 id="å¯¹ç§°åŠ å¯†">å¯¹ç§°åŠ å¯†</h2>
<p>å¯¹ç§°åŠ å¯†ï¼ˆåŠ å¯†è§£å¯†å¯†é’¥ç›¸åŒï¼‰ï¼šDESã€3DESã€AESã€RC4</p>
<p><strong>ç®€ä»‹</strong></p>
<p>å¯¹ç§°å¼åŠ å¯†å°±æ˜¯åŠ å¯†å’Œè§£å¯†ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥ã€‚ä¿¡æ¯æ¥æ”¶åŒæ–¹éƒ½éœ€äº‹å…ˆçŸ¥é“å¯†åŒ™å’ŒåŠ è§£å¯†ç®—æ³•ä¸”å…¶å¯†åŒ™æ˜¯ç›¸åŒçš„ï¼Œä¹‹åä¾¿æ˜¯å¯¹æ•°æ®è¿›è¡ŒåŠ è§£å¯†äº†ã€‚å¯¹ç§°åŠ å¯†ç®—æ³•ç”¨æ¥å¯¹æ•æ„Ÿæ•°æ®ç­‰ä¿¡æ¯è¿›è¡ŒåŠ å¯†ã€‚</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c25a73853.png" alt="image-20241128090736472" style="zoom:50%;" />
<h3 id="å¸¸è§ç®—æ³•å½’çº³">å¸¸è§ç®—æ³•å½’çº³</h3>
<p>DESï¼š56ä½å¯†é’¥ï¼Œç”±äºå¯†é’¥å¤ªçŸ­ï¼Œè¢«é€æ¸è¢«å¼ƒç”¨ã€‚</p>
<p>AESï¼šæœ‰128ä½ã€192ä½ã€256ä½å¯†é’¥ï¼Œç°åœ¨æ¯”è¾ƒæµè¡Œã€‚å¯†é’¥é•¿ã€å¯ä»¥å¢åŠ ç ´è§£çš„éš¾åº¦å’Œæˆæœ¬ã€‚</p>
<h3 id="1-DESç®—æ³•">1. DESç®—æ³•</h3>
<p>ç®€ä»‹ï¼š<strong>DES</strong>æ˜¯ä¸€ç§åˆ†ç»„<strong>åŠ å¯†ç®—æ³•</strong>ï¼Œä»–ä»¥<code>64</code>ä½ä¸ºåˆ†ç»„å¯¹æ•°æ®åŠ å¯†ã€‚<code>64</code>ä½ä¸€ç»„çš„æ˜æ–‡ä»ç®—æ³•çš„ä¸€ç«¯ è¾“å…¥ï¼Œ<code>64</code>ä½çš„å¯†æ–‡ä»å¦ä¸€ç«¯è¾“å‡ºã€‚<strong>DES</strong>æ˜¯ä¸€ä¸ªå¯¹ç§°ç®—æ³•ï¼šåŠ å¯†å’Œè§£å¯†ç”¨çš„æ˜¯åŒä¸€ä¸ªç®—æ³•ï¼ˆé™¤ å¯†é’¥ç¼–æ’ä¸åŒä»¥å¤–ï¼‰ã€‚</p>
<p>å¯†é’¥çš„é•¿åº¦ä¸º<code>56</code>ä½(å¯†é’¥é€šå¸¸è¡¨ç¤ºä¸º<code>64</code>ä½çš„æ•°ï¼Œä½†æ¯ä¸ªç¬¬8ä½éƒ½ç”¨ä½œå¥‡å¶æ£€éªŒï¼Œå¯ä»¥å¿½ ç•¥)ã€‚å¯†é’¥å¯ä»¥æ˜¯ä»»æ„çš„<code>56</code>ä½æ•°ï¼Œä¸”å¯ä»¥åœ¨ä»»æ„çš„æ—¶å€™æ”¹å˜ã€‚</p>
<p><strong>DES</strong>ç®—æ³•çš„å…¥å£å‚æ•°æœ‰3ä¸ªï¼š<code>Keyï¼ŒDataï¼ŒMode</code>ã€‚å…¶ä¸­<code>Key</code>ä¸º8ä¸ªå­—èŠ‚å…±64ä½ï¼Œæ˜¯<strong>DES</strong>ç®—æ³• çš„å·¥ä½œå¯†é’¥ï¼›<code>Data</code>ä¹Ÿä¸º8ä¸ªå­—èŠ‚64ä½ï¼Œæ˜¯è¦è¢«åŠ å¯†æˆ–è§£å¯†çš„æ•°æ®ï¼šModeä¸º<strong>DES</strong>çš„å·¥ä½œæ–¹å¼ï¼Œæœ‰ ä¸¤ç§ï¼šåŠ å¯†æˆ–è§£å¯†ã€‚</p>
<p>DESç®—æ³•çš„å·¥ä½œè¿‡ç¨‹ï¼šè‹¥Modeä¸ºåŠ å¯†ï¼Œåˆ™ç”¨Keyå¯¹æ•°æ®Dataè¿›è¡ŒåŠ å¯†ï¼Œç”ŸæˆDataçš„å¯†ç  å½¢å¼ï¼ˆ64ä½ï¼‰ä½œä¸ºDESçš„è¾“å‡ºç»“æœï¼›è‹¥Modeä¸ºè§£å¯†ï¼Œåˆ™ç”¨Keyå¯¹å¯†ç å½¢å¼çš„æ•°æ®Dataè§£å¯†ï¼Œè¿˜ åŸä¸ºDataçš„æ˜ç å½¢å¼ï¼ˆ64ä½ï¼‰ä½œä¸ºDESçš„è¾“å‡ºç»“æœã€‚<br>
ã€€ã€€ ç®€å•åœ°è¯´ï¼Œç®—æ³•åªä¸è¿‡æ˜¯åŠ å¯†çš„ä¸€ç§åŸºæœ¬æŠ€æœ¯ï¼ŒDESåŸºæœ¬ç»„å»ºåˆ†ç»„æ˜¯è¿™äº›æŠ€æœ¯çš„ä¸€ç§ç»„åˆ ï¼Œä»–åŸºäºå¯†é’¥ä½œç”¨äºæ˜æ–‡ï¼Œè¿™æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„è½®ï¼ˆroundï¼‰ã€‚DESæœ‰16è½®ï¼Œè¿™æ„å‘³ç€è¦åœ¨æ˜æ–‡åˆ† ç»„ä¸Š16æ¬¡å®æ–½ç›¸åŒçš„ç»„åˆæŠ€æœ¯ã€‚</p>
<ul>
<li>mode æ”¯æŒï¼šCBCï¼ŒCFBï¼ŒCTRï¼ŒCTRGladmanï¼ŒECBï¼ŒOFB ç­‰ã€‚</li>
<li>padding æ”¯æŒï¼šZeroPaddingï¼ŒNoPaddingï¼ŒAnsiX923ï¼ŒIso10126ï¼ŒIso97971ï¼ŒPkcs7 ç­‰ã€‚</li>
</ul>
<p><strong>å·¥ä½œæ¨¡å¼å½’çº³</strong></p>
<ul>
<li>
<p><strong>ECBæ¨¡å¼</strong> å…¨ç§°Electronic Codebookæ¨¡å¼ï¼Œè¯‘ä¸ºç”µå­å¯†ç æœ¬æ¨¡å¼</p>
</li>
<li>
<p><strong>CBCæ¨¡å¼</strong> å…¨ç§°Cipher Block Chainingæ¨¡å¼ï¼Œè¯‘ä¸ºå¯†æ–‡åˆ†ç»„é“¾æ¥æ¨¡å¼</p>
</li>
<li>
<p><strong>CFBæ¨¡å¼</strong> å…¨ç§°Cipher FeedBackæ¨¡å¼ï¼Œè¯‘ä¸ºå¯†æ–‡åé¦ˆæ¨¡å¼</p>
</li>
<li>
<p><strong>OFBæ¨¡å¼</strong> å…¨ç§°Output Feedbackæ¨¡å¼ï¼Œè¯‘ä¸ºè¾“å‡ºåé¦ˆæ¨¡å¼ã€‚</p>
</li>
<li>
<p><strong>CTRæ¨¡å¼</strong> å…¨ç§°Counteræ¨¡å¼ï¼Œè¯‘ä¸ºè®¡æ•°å™¨æ¨¡å¼ã€‚</p>
</li>
</ul>
<p>iv: é˜²æ­¢åŒæ ·çš„æ˜æ–‡å—ã€åŠ å¯†æˆåŒæ ·çš„å¯†æ–‡å—</p>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<ul>
<li>RFC 4772ï¼š<a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/rfc4772/">https://datatracker.ietf.org/doc/rfc4772/</a></li>
<li>DES ç»´åŸºç™¾ç§‘ï¼š<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Data_Encryption_Standard">https://en.wikipedia.org/wiki/Data_Encryption_Standard</a></li>
</ul>
<h4 id="1-1-JavaScript-å®ç°-2">1.1 JavaScript å®ç°</h4>
<p><code>DES</code>ç®—æ³•çš„å…¥å£å‚æ•°æœ‰3ä¸ª</p>
<ul>
<li><code>keyã€DATAã€Modeã€padding</code>
<ul>
<li><code>key</code>ä¸º<code>7ä¸ªå­—èŠ‚</code>å…±56ä½ï¼Œæ˜¯DESç®—æ³•çš„å·¥ä½œå¯†é’¥</li>
<li><code>Data</code>ä¸º<code>8ä¸ªå­—èŠ‚</code>64ä½ï¼Œæ˜¯è¦è¢«åŠ å¯†æˆ–è¢«è§£å¯†çš„æ•°æ®</li>
<li><code>Mode</code>ä¸º<code>DES</code>çš„å·¥ä½œæ–¹å¼</li>
<li><code>padding</code>ä¸ºå¡«å……æ¨¡å¼ï¼Œå¦‚æœåŠ å¯†åå¯†æ–‡é•¿åº¦å¦‚æœè¾¾ä¸åˆ°æŒ‡å®šæ•´æ•°å€ï¼ˆ8ä¸ªå­—èŠ‚ï¼Œ16ä¸ªå­—èŠ‚ï¼‰ï¼Œå¡«å……</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å— </span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">CryptoJS</span> = <span class="built_in">require</span>(<span class="string">&#x27;crypto-js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">desEncrypt</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> key = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(desKey),</span><br><span class="line">        iv = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(desIv),</span><br><span class="line">        srcs = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(text),</span><br><span class="line">        <span class="comment">// CBC åŠ å¯†æ¨¡å¼ï¼ŒPkcs7 å¡«å……æ–¹å¼</span></span><br><span class="line">        encrypted = <span class="title class_">CryptoJS</span>.<span class="property">DES</span>.<span class="title function_">encrypt</span>(srcs, key, &#123;</span><br><span class="line">            <span class="attr">iv</span>: iv,</span><br><span class="line">            <span class="attr">mode</span>: <span class="title class_">CryptoJS</span>.<span class="property">mode</span>.<span class="property">CBC</span>,</span><br><span class="line">            <span class="attr">padding</span>: <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">Pkcs7</span></span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="keyword">return</span> encrypted.<span class="title function_">toString</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">desDecrypt</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> key = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(desKey),</span><br><span class="line">        iv = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(desIv),</span><br><span class="line">        srcs = encryptedData,</span><br><span class="line">        <span class="comment">// CBC åŠ å¯†æ¨¡å¼ï¼ŒPkcs7 å¡«å……æ–¹å¼</span></span><br><span class="line">        decrypted = <span class="title class_">CryptoJS</span>.<span class="property">DES</span>.<span class="title function_">decrypt</span>(srcs, key, &#123;</span><br><span class="line">            <span class="attr">iv</span>: iv,</span><br><span class="line">            <span class="attr">mode</span>: <span class="title class_">CryptoJS</span>.<span class="property">mode</span>.<span class="property">CBC</span>,</span><br><span class="line">            <span class="attr">padding</span>: <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">Pkcs7</span></span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="keyword">return</span> decrypted.<span class="title function_">toString</span>(<span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> text = <span class="string">&quot;I love Python!&quot;</span>       <span class="comment">// å¾…åŠ å¯†å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> desKey = <span class="string">&quot;6f726c64f2c2057&quot;</span>    <span class="comment">// å¯†é’¥</span></span><br><span class="line"><span class="keyword">var</span> desIv = <span class="string">&quot;0123456789ABCDEF&quot;</span>    <span class="comment">// åˆå§‹å‘é‡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> encryptedData = <span class="title function_">desEncrypt</span>()</span><br><span class="line"><span class="keyword">var</span> decryptedData = <span class="title function_">desDecrypt</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åŠ å¯†å­—ç¬¦ä¸²: &quot;</span>, encryptedData)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è§£å¯†å­—ç¬¦ä¸²: &quot;</span>, decryptedData)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ å¯†å­—ç¬¦ä¸²:  +ndbEkWNw2QAfIYQtwC14w==</span></span><br><span class="line"><span class="comment">// è§£å¯†å­—ç¬¦ä¸²:  I love Python!</span></span><br></pre></td></tr></table></figure>
<h4 id="1-2-Python-å®ç°-2">1.2 Python å®ç°</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pyDes</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"><span class="comment"># åŠ å¯†æ¨¡å¼ CBCï¼Œå¡«å……æ–¹å¼ PAD_PKCS5</span></span><br><span class="line"><span class="keyword">from</span> pyDes <span class="keyword">import</span> des, CBC, PAD_PKCS5</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">des_encrypt</span>(<span class="params">key, text, iv</span>):</span><br><span class="line">    k = des(key, CBC, iv, pad=<span class="literal">None</span>, padmode=PAD_PKCS5)</span><br><span class="line">    en = k.encrypt(text, padmode=PAD_PKCS5)</span><br><span class="line">    <span class="keyword">return</span> binascii.b2a_hex(en)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">des_decrypt</span>(<span class="params">key, text, iv</span>):</span><br><span class="line">    k = des(key, CBC, iv, pad=<span class="literal">None</span>, padmode=PAD_PKCS5)</span><br><span class="line">    de = k.decrypt(binascii.a2b_hex(text), padmode=PAD_PKCS5)</span><br><span class="line">    <span class="keyword">return</span> de</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    secret_key = <span class="string">&#x27;12345678&#x27;</span>   <span class="comment"># å¯†é’¥</span></span><br><span class="line">    text = <span class="string">&#x27;hello world&#x27;</span>   <span class="comment"># åŠ å¯†å¯¹è±¡</span></span><br><span class="line">    iv = secret_key           <span class="comment"># åç§»é‡</span></span><br><span class="line">    secret_str = des_encrypt(secret_key, text, iv)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;åŠ å¯†å­—ç¬¦ä¸²ï¼š&#x27;</span>, secret_str)</span><br><span class="line">    clear_str = des_decrypt(secret_key, secret_str, iv)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è§£å¯†å­—ç¬¦ä¸²ï¼š&#x27;</span>, clear_str)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å¯†å­—ç¬¦ä¸²ï¼šb&#x27;302d3abf2421169239f829b38a9545f1&#x27;</span></span><br><span class="line"><span class="comment"># è§£å¯†å­—ç¬¦ä¸²ï¼šb&#x27;I love Python!&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ï¼š<a target="_blank" rel="noopener" href="https://www.processon.com/view/link/6374f0e10e3e742ce7bd597b">https://www.processon.com/view/link/6374f0e10e3e742ce7bd597b</a></p>
<h4 id="1-3-å®æ“ç»ƒä¹ 1">1.3 å®æ“ç»ƒä¹ 1</h4>
<p>åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://bqcm0.cavip1.com/">https://bqcm0.cavip1.com/</a></p>
<p>åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://www.91118.com/Passport/Account/Login">http://www.91118.com/Passport/Account/Login</a></p>
<h4 id="1-4-å®æ“ç»ƒä¹ 2">1.4 å®æ“ç»ƒä¹ 2</h4>
<h5 id="1-3-1-é€†å‘ç›®æ ‡">1.3.1 é€†å‘ç›®æ ‡</h5>
<p>é¦–é¡µï¼š<a target="_blank" rel="noopener" href="https://www.endata.com.cn/BoxOffice/BO/Month/oneMonth.html">https://www.endata.com.cn/BoxOffice/BO/Month/oneMonth.html</a></p>
<p>æ•°æ®ï¼š<a target="_blank" rel="noopener" href="https://www.endata.com.cn/API/GetData.ashx">https://www.endata.com.cn/API/GetData.ashx</a></p>
<p>é€†å‘ï¼šåŠ å¯†æ•°æ®</p>
<h5 id="1-3-2-é€†å‘åˆ†æ">1.3.2 é€†å‘åˆ†æ</h5>
<ul>
<li>ä½¿ç”¨xhræ–­ç‚¹æ•°æ®åœ°å€ï¼Œè¿›è¡Œå•æ­¥è°ƒè¯•</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c299ae205.png" alt="image-20241128090839590" style="zoom:33%;" />
<ul>
<li>è°ƒè¯•å¯¹åº”çš„æ•°æ®</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c2b7366b2.png" alt="image-20241128090908331" style="zoom:33%;" />
<p>æ€»ç»“ï¼šå¯ä»¥çœ‹åˆ°ä»–æ˜¯å¯¹æ•°æ®ç”¨<code>webInstace.shell</code>è¿›è¡Œäº†è§£å¯†</p>
<h5 id="1-3-3-æ•°æ®è¿˜åŸ">1.3.3  æ•°æ®è¿˜åŸ</h5>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-AESç®—æ³•">2. AESç®—æ³•</h3>
<p><strong>ç¯å¢ƒå®‰è£…</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pycryptodome -i pipæº</span><br></pre></td></tr></table></figure>
<h4 id="2-1-ç®—æ³•ç®€ä»‹">2.1 ç®—æ³•ç®€ä»‹</h4>
<p>â€‹		ç®€ä»‹ï¼šå…¨ç§°é«˜çº§åŠ å¯†æ ‡å‡†ï¼ˆè‹±æ–‡åç§°ï¼šAdvanced Encryption Standardï¼‰ï¼Œåœ¨å¯†ç å­¦ä¸­åˆç§° Rijndael åŠ å¯†æ³•ï¼Œç”±ç¾å›½å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢ ï¼ˆNISTï¼‰äº 2001 å¹´å‘å¸ƒï¼Œå¹¶åœ¨ 2002 å¹´æˆä¸ºæœ‰æ•ˆçš„æ ‡å‡†ï¼Œæ˜¯ç¾å›½è”é‚¦æ”¿åºœé‡‡ç”¨çš„ä¸€ç§åŒºå—åŠ å¯†æ ‡å‡†ã€‚è¿™ä¸ªæ ‡å‡†ç”¨æ¥æ›¿ä»£åŸå…ˆçš„ DESï¼Œå·²ç»è¢«å¤šæ–¹åˆ†æä¸”å¹¿ä¸ºå…¨ä¸–ç•Œæ‰€ä½¿ç”¨ï¼Œå®ƒæœ¬èº«åªæœ‰ä¸€ä¸ªå¯†é’¥ï¼Œå³ç”¨æ¥å®ç°åŠ å¯†ï¼Œä¹Ÿç”¨äºè§£å¯†ã€‚</p>
<ul>
<li>mode æ”¯æŒï¼šCBCï¼ŒCFBï¼ŒCTRï¼ŒCTRGladmanï¼ŒECBï¼ŒOFB ç­‰ã€‚</li>
<li>padding æ”¯æŒï¼šZeroPaddingï¼ŒNoPaddingï¼ŒAnsiX923ï¼ŒIso10126ï¼ŒIso97971ï¼ŒPkcs7 ç­‰ã€‚</li>
</ul>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<ul>
<li>RFC 3268ï¼š<a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/rfc3268/">https://datatracker.ietf.org/doc/rfc3268/</a></li>
<li>AES ç»´åŸºç™¾ç§‘ï¼š<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">https://en.wikipedia.org/wiki/Advanced_Encryption_Standard</a></li>
</ul>
<p><strong>å‚æ•°å®šä¹‰ï¼š</strong></p>
<ol>
<li>key lengthï¼ˆå¯†é’¥ä½æ•°ï¼Œå¯†ç é•¿åº¦ï¼‰<code>AES128ï¼ŒAES192ï¼ŒAES256ï¼ˆ128 ä½ã€192 ä½æˆ– 256 ä½ï¼‰</code></li>
<li>key ï¼ˆå¯†é’¥ï¼Œå¯†ç ï¼‰keyæŒ‡çš„å°±æ˜¯å¯†ç äº†ï¼Œ<code>AES128</code>å°±æ˜¯<code>128ä½</code>çš„ï¼Œå¦‚æœä½æ•°ä¸å¤Ÿï¼ŒæŸäº›åº“å¯èƒ½ä¼šè‡ªåŠ¨å¡«å……åˆ°<code>128</code>ã€‚</li>
<li>IV ï¼ˆå‘é‡ï¼‰IVç§°ä¸ºåˆå§‹å‘é‡ï¼Œä¸åŒçš„IVåŠ å¯†åçš„å­—ç¬¦ä¸²æ˜¯ä¸åŒçš„ï¼ŒåŠ å¯†å’Œè§£å¯†éœ€è¦ç›¸åŒçš„IVã€‚</li>
<li>mode ï¼ˆåŠ å¯†æ¨¡å¼ï¼‰AESåˆ†ä¸ºå‡ ç§æ¨¡å¼ï¼Œæ¯”å¦‚ECBï¼ŒCBCï¼ŒCFBç­‰ç­‰ï¼Œè¿™äº›æ¨¡å¼é™¤äº†ECBç”±äºæ²¡æœ‰ä½¿ç”¨IVè€Œä¸å¤ªå®‰å…¨ï¼Œå…¶ä»–æ¨¡å¼å·®åˆ«å¹¶æ²¡æœ‰å¤ªæ˜æ˜¾ã€‚</li>
<li>padding ï¼ˆå¡«å……æ–¹å¼ï¼‰å¯¹äºåŠ å¯†è§£å¯†ä¸¤ç«¯éœ€è¦ä½¿ç”¨åŒä¸€çš„PADDINGæ¨¡å¼ï¼Œå¤§éƒ¨åˆ†PADDINGæ¨¡å¼ä¸º<code>PKCS5, PKCS7, NOPADDING</code>ã€‚</li>
</ol>
<p><strong>åŠ å¯†åŸç†ï¼š</strong></p>
<p>â€‹		AESåŠ å¯†ç®—æ³•é‡‡ç”¨åˆ†ç»„å¯†ç ä½“åˆ¶ï¼Œæ¯ä¸ªåˆ†ç»„æ•°æ®çš„é•¿åº¦ä¸º<code>128ä½16ä¸ªå­—èŠ‚</code>ï¼Œå¯†é’¥é•¿åº¦å¯ä»¥æ˜¯<code>128ä½16ä¸ªå­—èŠ‚</code>ã€<code>192ä½æˆ–256ä½</code>ï¼Œä¸€å…±æœ‰å››ç§åŠ å¯†æ¨¡å¼ï¼Œæˆ‘ä»¬é€šå¸¸é‡‡ç”¨éœ€è¦åˆå§‹å‘é‡IVçš„CBCæ¨¡å¼ï¼Œåˆå§‹å‘é‡çš„é•¿åº¦ä¹Ÿæ˜¯<code>128ä½16ä¸ªå­—èŠ‚</code>ã€‚</p>
<h4 id="2-2-JavaScript-å®ç°">2.2  JavaScript å®ç°</h4>
<p>ç±»ä¼¼ç½‘ç«™ï¼š<a target="_blank" rel="noopener" href="https://www.dns.com/login.html">https://www.dns.com/login.html</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•ç”¨ crypto-js åŠ å¯†æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">CryptoJS</span> = <span class="built_in">require</span>(<span class="string">&#x27;crypto-js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tripleAesEncrypt</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> key = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(aesKey),</span><br><span class="line">        iv = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(aesIv),</span><br><span class="line">        srcs = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(text),</span><br><span class="line">        <span class="comment">// CBC åŠ å¯†æ–¹å¼ï¼ŒPkcs7 å¡«å……æ–¹å¼</span></span><br><span class="line">        encrypted = <span class="title class_">CryptoJS</span>.<span class="property">AES</span>.<span class="title function_">encrypt</span>(srcs, key, &#123;</span><br><span class="line">            <span class="attr">iv</span>: iv,</span><br><span class="line">            <span class="attr">mode</span>: <span class="title class_">CryptoJS</span>.<span class="property">mode</span>.<span class="property">CBC</span>,</span><br><span class="line">            <span class="attr">padding</span>: <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">Pkcs7</span></span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="keyword">return</span> encrypted.<span class="title function_">toString</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tripleAesDecrypt</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> key = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(aesKey),</span><br><span class="line">        iv = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(aesIv),</span><br><span class="line">        srcs = encryptedData,</span><br><span class="line">        <span class="comment">// CBC åŠ å¯†æ–¹å¼ï¼ŒPkcs7 å¡«å……æ–¹å¼</span></span><br><span class="line">        decrypted = <span class="title class_">CryptoJS</span>.<span class="property">AES</span>.<span class="title function_">decrypt</span>(srcs, key, &#123;</span><br><span class="line">            <span class="attr">iv</span>: iv,</span><br><span class="line">            <span class="attr">mode</span>: <span class="title class_">CryptoJS</span>.<span class="property">mode</span>.<span class="property">CBC</span>,</span><br><span class="line">            <span class="attr">padding</span>: <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">Pkcs7</span></span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="keyword">return</span> decrypted.<span class="title function_">toString</span>(<span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> text = <span class="string">&quot;I love Python!&quot;</span>       <span class="comment">// å¾…åŠ å¯†å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> aesKey = <span class="string">&quot;6f726c64f2c2057c&quot;</span>   <span class="comment">// å¯†é’¥ï¼Œ16 å€æ•°</span></span><br><span class="line"><span class="keyword">var</span> aesIv = <span class="string">&quot;0123456789ABCDEF&quot;</span>    <span class="comment">// åç§»é‡ï¼Œ16 å€æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> encryptedData = <span class="title function_">tripleAesEncrypt</span>()</span><br><span class="line"><span class="keyword">var</span> decryptedData = <span class="title function_">tripleAesDecrypt</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åŠ å¯†å­—ç¬¦ä¸²: &quot;</span>, encryptedData)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è§£å¯†å­—ç¬¦ä¸²: &quot;</span>, decryptedData)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ å¯†å­—ç¬¦ä¸²:  dZL7TLJR786VGvuUvqYGoQ==</span></span><br><span class="line"><span class="comment">// è§£å¯†å­—ç¬¦ä¸²:  I love Python!</span></span><br></pre></td></tr></table></figure>
<h4 id="2-3-Python-å®ç°">2.3 Python å®ç°</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> AES</span><br><span class="line"></span><br><span class="line"><span class="comment"># éœ€è¦è¡¥ä½ï¼Œsträ¸æ˜¯16çš„å€æ•°é‚£å°±è¡¥è¶³ä¸º16çš„å€æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_to_16</span>(<span class="params">value</span>):</span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">len</span>(value) % <span class="number">16</span> != <span class="number">0</span>:</span><br><span class="line">        value += <span class="string">&#x27;\0&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">str</span>.encode(value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å¯†æ–¹æ³•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">aes_encrypt</span>(<span class="params">key, t, iv</span>):</span><br><span class="line">    aes = AES.new(add_to_16(key), AES.MODE_CBC, add_to_16(iv))  <span class="comment"># åˆå§‹åŒ–åŠ å¯†å™¨</span></span><br><span class="line">    encrypt_aes = aes.encrypt(add_to_16(t))                    <span class="comment"># å…ˆè¿›è¡Œ aes åŠ å¯†</span></span><br><span class="line">    encrypted_text = <span class="built_in">str</span>(base64.encodebytes(encrypt_aes), encoding=<span class="string">&#x27;utf-8&#x27;</span>)  <span class="comment"># æ‰§è¡ŒåŠ å¯†å¹¶è½¬ç è¿”å› bytes</span></span><br><span class="line">    <span class="keyword">return</span> encrypted_text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å¯†æ–¹æ³•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">aes_decrypt</span>(<span class="params">key, t, iv</span>):</span><br><span class="line">    aes = AES.new(add_to_16(key), AES.MODE_CBC, add_to_16(iv))         <span class="comment"># åˆå§‹åŒ–åŠ å¯†å™¨</span></span><br><span class="line">    base64_decrypted = base64.decodebytes(t.encode(encoding=<span class="string">&#x27;utf-8&#x27;</span>))  <span class="comment"># ä¼˜å…ˆé€†å‘è§£å¯† base64 æˆ bytes</span></span><br><span class="line">    decrypted_text = <span class="built_in">str</span>(aes.decrypt(base64_decrypted), encoding=<span class="string">&#x27;utf-8&#x27;</span>).replace(<span class="string">&#x27;\0&#x27;</span>, <span class="string">&#x27;&#x27;</span>)  <span class="comment"># æ‰§è¡Œè§£å¯†å¯†å¹¶è½¬ç è¿”å›str</span></span><br><span class="line">    <span class="keyword">return</span> decrypted_text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    secret_key = <span class="string">&#x27;12345678&#x27;</span>   <span class="comment"># å¯†é’¥</span></span><br><span class="line">    text = <span class="string">&#x27;I love Python!&#x27;</span>   <span class="comment"># åŠ å¯†å¯¹è±¡</span></span><br><span class="line">    iv = secret_key           <span class="comment"># åˆå§‹å‘é‡</span></span><br><span class="line">    encrypted_str = aes_encrypt(secret_key, text, iv)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;åŠ å¯†å­—ç¬¦ä¸²ï¼š&#x27;</span>, encrypted_str)</span><br><span class="line">    decrypted_str = aes_decrypt(secret_key, encrypted_str, iv)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è§£å¯†å­—ç¬¦ä¸²ï¼š&#x27;</span>, decrypted_str)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å¯†å­—ç¬¦ä¸²ï¼šlAVKvkQh+GtdNpoKf4/mHA==</span></span><br><span class="line"><span class="comment"># è§£å¯†å­—ç¬¦ä¸²ï¼šI love Python!</span></span><br></pre></td></tr></table></figure>
<p>**æ³¨æ„ï¼š**æ˜æ–‡åŠ å¯†è¦æ±‚æ˜¯16çš„æ•´æ•°å€</p>
<h4 id="2-4-å®é™…æ¡ˆä¾‹">2.4 å®é™…æ¡ˆä¾‹</h4>
<h5 id="2-4-1-é€†å‘ç›®æ ‡">2.4.1 é€†å‘ç›®æ ‡</h5>
<ul>
<li>
<p>ç›®æ ‡ï¼šå‡å­¦Eç½‘é€šç™»å½•æ¥å£</p>
</li>
<li>
<p>ä¸»é¡µï¼š<a target="_blank" rel="noopener" href="https://web.ewt360.com/register/#/login">https://web.ewt360.com/register/#/login</a></p>
</li>
<li>
<p>æ¥å£ï¼šaHR0cHM6Ly9nYXRld2F5LmV3dDM2MC5jb20vYXBpL2F1dGhjZW50ZXIvdjIvb2F1dGgvbG9naW4vYWNjb3VudA==</p>
</li>
<li>
<p>é€†å‘å‚æ•°ï¼š</p>
</li>
<li>
<ul>
<li>Request Headersï¼š<code>sign: 3976F10977FC65F9CB967AEF79E508BD</code></li>
<li>Request Payloadï¼š<code>password: &quot;A7428361DEF118911783F446A129FFCE&quot;</code></li>
</ul>
</li>
</ul>
<h5 id="2-4-2-æŠ“åŒ…åˆ†æ">2.4.2 <strong>æŠ“åŒ…åˆ†æ</strong></h5>
<p>æ¥åˆ°æŸ e ç½‘é€šçš„ç™»å½•é¡µé¢ï¼Œéšä¾¿è¾“å…¥ä¸€ä¸ªè´¦å·å¯†ç ç™»é™†ï¼ŒæŠ“åŒ…å®šä½åˆ°ç™»å½•æ¥å£ä¸º aHR0cHM6Ly9nYXRld2F5LmV3dDM2MC5jb20vYXBpL2F1dGhjZW50ZXIvdjIvb2F1dGgvbG9naW4vYWNjb3VudA==ï¼Œè¯·æ±‚å¤´é‡Œï¼Œæœ‰ä¸€ä¸ª signï¼ŒPayload é‡Œï¼Œå¯†ç  password è¢«åŠ å¯†å¤„ç†äº†ã€‚</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c2de3e8fc.png" alt="image-20241128090947731" style="zoom:80%;" />
<h5 id="2-4-3-å‚æ•°é€†å‘">2.4.3 <strong>å‚æ•°é€†å‘</strong></h5>
<h6 id="2-4-3-signç­¾åå¤„ç†">2.4.3 signç­¾åå¤„ç†</h6>
<p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹è¯·æ±‚å¤´çš„ signï¼Œå°è¯•ç›´æ¥æœç´¢ä¸€ä¸‹ï¼Œå‘ç°å¹¶ä¸æ˜¯ç»è¿‡æŸäº›è¯·æ±‚è¿”å›çš„æ•°æ®ï¼Œè§‚å¯Ÿä¸€ä¸‹å…¶ä»–è¯·æ±‚ï¼Œå¯ä»¥å‘ç°åŒæ ·æœ‰ signï¼Œè€Œä¸”æ¯æ¬¡è¯·æ±‚çš„å€¼éƒ½ä¸ä¸€æ ·ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://mmbiz.qpic.cn/mmbiz_png/iabtD4jabia4LJmLPiaJcQvictOzV5grPjHoMDx6z4kPU6VhTuibYUBdXeVQFhFldMuklxpSL2DJygc8lMibR9O5sMdQ/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡"></p>
<p>ç”±æ­¤å¯ä»¥åˆæ­¥åˆ¤æ–­è¿™ä¸ªå€¼åº”è¯¥æ˜¯é€šè¿‡ JS ç”Ÿæˆçš„ï¼Œå…¨å±€æœç´¢å…³é”®å­— <code>sign:</code>ï¼Œå¯ä»¥åˆ†åˆ«åœ¨ request.jsã€request.ts ä¸¤ä¸ªæ–‡ä»¶é‡Œé¢çœ‹åˆ°ç–‘ä¼¼ sign èµ‹å€¼çš„åœ°æ–¹ï¼ŒåŸ‹ä¸‹æ–­ç‚¹è°ƒè¯•ï¼ŒæˆåŠŸæ–­ä¸‹ï¼ŒåŸç†ä¹Ÿå¾ˆç®€å•ï¼Œæ—¶é—´æˆ³åŠ ä¸Šä¸€ä¸²å›ºå®šçš„å­—ç¬¦ï¼Œç»è¿‡ MD5 åŠ å¯†åå†è½¬å¤§å†™å³å¯ã€‚</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c326140f4.png" alt="image-20241128091059633" style="zoom:80%;" />
<p><strong>ä½¿ç”¨ Python å®ç°ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line">timestamp = <span class="built_in">str</span>(<span class="built_in">int</span>(time.time() * <span class="number">1000</span>))</span><br><span class="line">sign = hashlib.md5((timestamp + <span class="string">&#x27;bdc739ff2dcf&#x27;</span>).encode(encoding=<span class="string">&#x27;utf-8&#x27;</span>)).hexdigest().upper()</span><br><span class="line"><span class="built_in">print</span>(sign)</span><br></pre></td></tr></table></figure>
<h6 id="2-4-4-passwordå¤„ç†">2.4.4 passwordå¤„ç†</h6>
<p>â€‹		<code>password</code> æ˜¯æ˜æ–‡å¯†ç ç»è¿‡åŠ å¯†åå¾—åˆ°çš„å€¼ï¼Œå¦‚æœå°è¯•ç›´æ¥å»æœç´¢çš„è¯ï¼Œä¼šå‘ç°å‡ºæ¥çš„å€¼éå¸¸éå¸¸å¤šï¼Œè¦æƒ³æ‰¾åˆ°å‡†ç¡®çš„å€¼éš¾åº¦å·¨å¤§ï¼š</p>
<p>å¯ä»¥çœ‹åˆ°è¿™æ¡è¯·æ±‚æ˜¯ XHR è¯·æ±‚ï¼Œæœ¬æ¬¡æˆ‘ä»¬ä½¿ç”¨ <code>XHR</code> æ–­ç‚¹çš„æ–¹æ³•æ¥å®šä½å…·ä½“çš„åŠ å¯†ä½ç½®ï¼Œé€šè¿‡æœ¬æ¬¡æ¡ˆä¾‹ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹å…·ä½“æ˜¯å¦‚ä½•è·Ÿè¿›è°ƒç”¨æ ˆã€å¦‚ä½•é€šè¿‡ä¸Šä¸‹æ–‡æ¥å®šä½å…·ä½“çš„åŠ å¯†ä½ç½®ã€‚</p>
<p>åˆ‡æ¢åˆ° <code>Network</code> é€‰é¡¹å¡ï¼Œæ‰¾åˆ°ç™»é™†è¯·æ±‚ï¼Œé¼ æ ‡ç§»åŠ¨åˆ° <code>Initiator</code> é€‰é¡¹å¡ä¸‹çš„ JS ä¸Šï¼Œå¯ä»¥çœ‹åˆ°å…¶è°ƒç”¨æ ˆï¼Œå¦‚æœç«™ç‚¹çš„åŠ å¯†æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰å¤ªå¤šæ··æ·†çš„è¯ï¼Œè°ƒç”¨æ ˆé‡Œé¢å°±å¯ä»¥çœ‹åˆ°<code> loginã€sendã€postã€encrypt</code> ç­‰ç­‰ä¹‹ç±»çš„å…³é”®è¯ï¼Œè¿™ç§æƒ…å†µä¸‹å°±å¯ä»¥ç›´æ¥ç‚¹è¿›å»ï¼Œæ¯”è¾ƒå®¹æ˜“æ‰¾åˆ°åŠ å¯†çš„åœ°æ–¹ï¼Œä½†æ˜¯å¤§å¤šæ•°ç«™ç‚¹å¯¹äºå‡½æ•°åã€å˜é‡åéƒ½åšäº†æ··æ·†ï¼Œå’Œæœ¬æ¡ˆä¾‹ä¸€æ ·ï¼Œè°ƒç”¨æ ˆé‡Œé¢æ˜¾ç¤ºçš„éƒ½æ˜¯ä¸€äº›å•ä¸ªæˆ–è€…å¤šä¸ªæ— è§„åˆ™çš„å­—æ¯çš„å‡½æ•°ï¼Œæ— æ³•ç›´æ¥å®šä½ï¼Œæ­¤æ—¶å°±éœ€è¦æˆ‘ä»¬ä»æœ€åä¸€ä¸ªå‡½æ•°å¾€å‰æ…¢æ…¢æ‰¾ã€‚</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c34f75a66.png" alt="image-20241128091137690" style="zoom:80%;" />
<p>ç‚¹å‡»è¿›å…¥æœ€åä¸€ä¸ªå‡½æ•°ï¼Œå³ Y å‡½æ•°ï¼Œå®ƒä½äºè°ƒç”¨æ ˆçš„æœ€é¡¶å±‚ï¼Œè¡¨ç¤ºç»è¿‡æ­¤å‡½æ•°åï¼Œæµè§ˆå™¨å°±ä¼šå‘é€ç™»å½•çš„è¯·æ±‚ï¼Œå¯†ç çš„åŠ å¯†è¿‡ç¨‹å·²ç»å¤„ç†å®Œæ¯•ã€‚åœ¨æ­¤å‡½æ•°åŸ‹ä¸‹æ–­ç‚¹ï¼Œå¯ä»¥åœ¨å³ä¾§çš„<code> Call Stack</code> çœ‹åˆ°è°ƒç”¨æ ˆï¼Œä»ä¸‹åˆ°ä¸Šï¼Œè¡¨ç¤ºçš„æ˜¯ç‚¹å‡»ç™»é™†åï¼Œå…ˆåè°ƒç”¨çš„å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c36f0a13a.png" alt="image-20241128091212530" style="zoom:67%;" />
<p>æ ¹æ®è¿™ç§æ€è·¯ï¼Œä¸€æ­¥ä¸€æ­¥å¾€ä¸‹è·Ÿè¿›è°ƒç”¨æ ˆï¼Œå¯ä»¥çœ‹åˆ°åœ¨ utils.ts é‡Œé¢æ‰§è¡Œäº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå…¶ä¸­è°ƒç”¨äº†ä¸€ä¸ª passwordEncrypt å‡½æ•°ï¼Œé€šè¿‡å‡½æ•°åå°±å¯ä»¥çœ‹å‡ºåŸºæœ¬ä¸Šå°±æ˜¯å¯†ç åŠ å¯†çš„å‡½æ•°äº†ï¼š</p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p>åœ¨æ­¤å¤„åŸ‹ä¸‹æ–­ç‚¹è¿›è¡Œè°ƒè¯•ï¼Œä¼ è¿›æ¥çš„æ˜¯æ˜æ–‡å¯†ç ï¼ŒpasswordEncrypt å®é™…ä¸Šæ˜¯è°ƒç”¨çš„ encode.ts ä¸­çš„ O å‡½æ•°ï¼š</p>
<p>è·Ÿè¿› O å‡½æ•°ï¼Œå¼•ç”¨äº† crypto-js åŠ å¯†æ¨¡å—ï¼Œå¾ˆæ˜æ˜¾çš„ AES åŠ å¯†ï¼Œæœ¬åœ°æ”¹å†™ä¸€ä¸‹å°±è¡Œäº†ã€‚</p>
<p><strong>JavaScript åŠ å¯†ä»£ç </strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">CryptoJS</span> = <span class="built_in">require</span>(<span class="string">&quot;crypto-js&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> key = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(<span class="string">&quot;20171109124536982017110912453698&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> iv = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(<span class="string">&#x27;2017110912453698&#x27;</span>); <span class="comment">//åå…­ä½åå…­è¿›åˆ¶æ•°ä½œä¸ºå¯†é’¥åç§»é‡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getEncryptedPassword</span>(<span class="params">word</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> srcs = <span class="title class_">CryptoJS</span>.<span class="property">enc</span>.<span class="property">Utf8</span>.<span class="title function_">parse</span>(word);</span><br><span class="line">    <span class="keyword">let</span> encrypted = <span class="title class_">CryptoJS</span>.<span class="property">AES</span>.<span class="title function_">encrypt</span>(srcs, key, &#123;</span><br><span class="line">            <span class="attr">iv</span>: iv,</span><br><span class="line">            <span class="attr">mode</span>: <span class="title class_">CryptoJS</span>.<span class="property">mode</span>.<span class="property">CBC</span>,</span><br><span class="line">            <span class="attr">padding</span>: <span class="title class_">CryptoJS</span>.<span class="property">pad</span>.<span class="property">Pkcs7</span></span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="keyword">return</span> encrypted.<span class="property">ciphertext</span>.<span class="title function_">toString</span>().<span class="title function_">toUpperCase</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•æ ·ä¾‹</span></span><br><span class="line"><span class="comment">// console.log(getEncryptedPassword(&quot;123457&quot;))</span></span><br></pre></td></tr></table></figure>
<p>pythonæ¨¡æ‹Ÿç™»å½•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">login_url = <span class="string">&#x27;https://gateway.ewt360.com/api/authcenter/v2/oauth/login/account&#x27;</span></span><br><span class="line">session = requests.session()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_sign</span>():</span><br><span class="line">    timestamp = <span class="built_in">str</span>(<span class="built_in">int</span>(time.time()*<span class="number">1000</span>))</span><br><span class="line">    sign = hashlib.md5((timestamp + <span class="string">&#x27;bdc739ff2dcf&#x27;</span>).encode(encoding=<span class="string">&#x27;utf-8&#x27;</span>)).hexdigest().upper()</span><br><span class="line">    <span class="keyword">return</span> sign</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_encrypted_parameter</span>(<span class="params">password</span>):</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;encrypt.js&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        ewt360_js = f.read()</span><br><span class="line">    encrypted_password = execjs.<span class="built_in">compile</span>(ewt360_js).call(<span class="string">&#x27;getEncryptedPassword&#x27;</span>, password)</span><br><span class="line">    <span class="keyword">return</span> encrypted_password</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">sign, username, encrypted_password</span>):</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;sign&#x27;</span>: sign,</span><br><span class="line">        <span class="string">&#x27;timestamp&#x27;</span>: <span class="built_in">str</span>(<span class="built_in">int</span>(time.time()*<span class="number">1000</span>)),</span><br><span class="line">        <span class="string">&#x27;sec-ch-ua&#x27;</span>: <span class="string">&#x27;&quot; Not;A Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;91&quot;, &quot;Chromium&quot;;v=&quot;91&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;autoLogin&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&#x27;password&#x27;</span>: encrypted_password,</span><br><span class="line">        <span class="string">&#x27;platform&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;userName&#x27;</span>: username</span><br><span class="line">    &#125;</span><br><span class="line">    response = session.post(url=login_url, headers=headers, json=data)</span><br><span class="line">    <span class="built_in">print</span>(response.json())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    username = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥ç™»å½•è´¦å·: &#x27;</span>)</span><br><span class="line">    password = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥ç™»å½•å¯†ç : &#x27;</span>)</span><br><span class="line">    sign = get_sign()</span><br><span class="line">    encrypted_password = get_encrypted_parameter(password)</span><br><span class="line">    login(sign, username, encrypted_password)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h2 id="éå¯¹ç§°åŠ å¯†">éå¯¹ç§°åŠ å¯†</h2>
<h3 id="1-éå¯¹ç§°ç®€ä»‹">1 éå¯¹ç§°ç®€ä»‹</h3>
<p>â€‹		ä¸å¯¹ç§°åŠ å¯†ç®—æ³•ä¸åŒï¼Œéå¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼šå…¬å¼€å¯†é’¥<code>ï¼ˆpublickeyï¼‰</code>å’Œç§æœ‰å¯†é’¥<code>ï¼ˆprivatekeyï¼‰</code>ã€‚å…¬å¼€å¯†é’¥ä¸ç§æœ‰å¯†é’¥æ˜¯ä¸€å¯¹ï¼Œå¦‚æœç”¨å…¬å¼€å¯†é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ç§æœ‰å¯†é’¥æ‰èƒ½è§£å¯†ï¼›å¦‚æœç”¨ç§æœ‰å¯†é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œé‚£ä¹ˆåªæœ‰ç”¨å¯¹åº”çš„å…¬å¼€å¯†é’¥æ‰èƒ½è§£å¯†ã€‚å› ä¸ºåŠ å¯†å’Œè§£å¯†ä½¿ç”¨çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯†é’¥ï¼Œæ‰€ä»¥è¿™ç§ç®—æ³•å«ä½œéå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚</p>
<ul>
<li>å¸¸è§éå¯¹ç§°åŠ å¯†ç®—æ³• <code>RSA</code>ã€<code>DSA</code>ã€‚</li>
<li>éå¯¹ç§°åŠ å¯†ç®—æ³•ç§é’¥ç”±æ•°æ®æ¥æ”¶æ–¹æŒæœ‰ï¼Œä¸ä¼šåœ¨ç½‘ç»œä¸Šä¼ é€’ï¼Œä¿è¯äº†å¯†é’¥çš„å®‰å…¨ã€‚</li>
<li>éå¯¹ç§°åŠ å¯†ç®—æ³•é€šå¸¸æ¯”å¯¹ç§°åŠ å¯†ç®—æ³•è®¡ç®—å¤æ‚ï¼Œæ€§èƒ½æ¶ˆè€—é«˜ã€‚</li>
<li>éå¯¹ç§°åŠ å¯†ç®—æ³•å¯ç”¨äºæ•°å­—ç­¾åã€‚</li>
</ul>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c39800079.png" alt="image-20241128091254142" style="zoom:33%;" />
<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨æ—¶éƒ½æ˜¯ä½¿ç”¨å…¬é’¥åŠ å¯†ä½¿ç”¨ç§é’¥è§£å¯†ï¼Œå…¬é’¥å¯ä»¥å…¬å¼€ï¼Œç§é’¥è‡ªå·±ä¿ç•™ã€‚</li>
<li>ç®—æ³•å¼ºåº¦å¤æ‚ã€å®‰å…¨æ€§ä¾èµ–äºç®—æ³•ä¸å¯†é’¥ä½†æ˜¯ç”±äºå…¶ç®—æ³•å¤æ‚ï¼Œè€Œä½¿åŠ å¯†è§£å¯†é€Ÿåº¦æ…¢äºå¯¹ç§°åŠ å¯†</li>
</ul>
<h3 id="2-éå¯¹ç§°ç‰¹å¾">2 éå¯¹ç§°ç‰¹å¾</h3>
<p>å¸¸è§JavaScriptè°ƒè¯•ç®—æ³•</p>
<ul>
<li>æœç´¢å…³é”®è¯ <code>new JSEncrypt()</code>ï¼Œ<code>JSEncrypt</code> ç­‰ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ <code>JSEncrypt </code>åº“ï¼Œä¼šæœ‰ new ä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„æ“ä½œï¼›</li>
<li>æœç´¢å…³é”®è¯ <code>setPublicKey</code>ã€<code>setKey</code>ã€<code>setPrivateKey</code>ã€<code>getPublicKey</code> ç­‰ï¼Œä¸€èˆ¬å®ç°çš„ä»£ç é‡Œéƒ½å«æœ‰è®¾ç½®å¯†é’¥çš„è¿‡ç¨‹ã€‚</li>
</ul>
<p>RSA çš„ç§é’¥ã€å…¬é’¥ã€æ˜æ–‡ã€å¯†æ–‡é•¿åº¦ä¹Ÿæœ‰ä¸€å®šå¯¹åº”å…³ç³»ï¼Œä¹Ÿå¯ä»¥ä»è¿™æ–¹é¢åˆæ­¥åˆ¤æ–­ï¼š</p>
<table>
<thead>
<tr>
<th>ç§é’¥é•¿åº¦</th>
<th>å…¬é’¥é•¿åº¦</th>
<th>æ˜æ–‡é•¿åº¦</th>
<th>å¯†æ–‡é•¿åº¦</th>
</tr>
</thead>
<tbody>
<tr>
<td>428</td>
<td>128</td>
<td>1~53</td>
<td>88</td>
</tr>
<tr>
<td>812</td>
<td>216</td>
<td>1~117</td>
<td>172</td>
</tr>
<tr>
<td>1588</td>
<td>392</td>
<td>1~245</td>
<td>344</td>
</tr>
</tbody>
</table>
<h4 id="2-1-JavaScript-å®ç°-2">2.1  JavaScript å®ç°</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// npm install node-rsa --save</span></span><br><span class="line"><span class="comment">// å¼•ç”¨ node-rsa åŠ å¯†æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">NodeRSA</span> = <span class="built_in">require</span>(<span class="string">&#x27;node-rsa&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">rsaEncrypt</span>(<span class="params"></span>) &#123;</span><br><span class="line">    pubKey = <span class="keyword">new</span> <span class="title class_">NodeRSA</span>(publicKey,<span class="string">&#x27;pkcs8-public&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> encryptedData = pubKey.<span class="title function_">encrypt</span>(text, <span class="string">&#x27;base64&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> encryptedData</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">rsaDecrypt</span>(<span class="params"></span>) &#123;</span><br><span class="line">    priKey = <span class="keyword">new</span> <span class="title class_">NodeRSA</span>(privatekey,<span class="string">&#x27;pkcs8-private&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> decryptedData = priKey.<span class="title function_">decrypt</span>(encryptedData, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> decryptedData</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> key = <span class="keyword">new</span> <span class="title class_">NodeRSA</span>(&#123;<span class="attr">b</span>: <span class="number">512</span>&#125;);                    <span class="comment">//ç”Ÿæˆ512ä½ç§˜é’¥</span></span><br><span class="line"><span class="keyword">var</span> publicKey = key.<span class="title function_">exportKey</span>(<span class="string">&#x27;pkcs8-public&#x27;</span>);    <span class="comment">//å¯¼å‡ºå…¬é’¥</span></span><br><span class="line"><span class="keyword">var</span> privatekey = key.<span class="title function_">exportKey</span>(<span class="string">&#x27;pkcs8-private&#x27;</span>);  <span class="comment">//å¯¼å‡ºç§é’¥</span></span><br><span class="line"><span class="keyword">var</span> text = <span class="string">&quot;I love Python!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> encryptedData = <span class="title function_">rsaEncrypt</span>()</span><br><span class="line"><span class="keyword">var</span> decryptedData = <span class="title function_">rsaDecrypt</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å…¬é’¥:\n&quot;</span>, publicKey)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç§é’¥:\n&quot;</span>, privatekey)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åŠ å¯†å­—ç¬¦ä¸²: &quot;</span>, encryptedData)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è§£å¯†å­—ç¬¦ä¸²: &quot;</span>, decryptedData)</span><br></pre></td></tr></table></figure>
<h4 id="2-2-Python-å®ç°-2">2.2 Python å®ç°</h4>
<p>æ¨¡å—ï¼š<code>rsa</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Author  : å¤æ´›</span></span><br><span class="line"><span class="comment"># @File    : 02-demo.py</span></span><br><span class="line"><span class="comment"># @VX : tl210329</span></span><br><span class="line"><span class="keyword">import</span> rsa</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rsa_encrypt</span>(<span class="params">pu_key, t</span>):</span><br><span class="line">    <span class="comment"># å…¬é’¥åŠ å¯†</span></span><br><span class="line">    rsas = rsa.encrypt(t.encode(<span class="string">&quot;utf-8&quot;</span>), pu_key)</span><br><span class="line">    <span class="keyword">return</span> base64.b64encode(rsas)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rsa_decrypt</span>(<span class="params">pr_key, t</span>):</span><br><span class="line">    <span class="comment"># ç§é’¥è§£å¯†</span></span><br><span class="line">    rsas = rsa.decrypt(base64.b64decode(t), pr_key).decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> rsas</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    public_key, private_key = rsa.newkeys(<span class="number">512</span>)   <span class="comment"># ç”Ÿæˆå…¬é’¥ã€ç§é’¥</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å…¬é’¥ï¼š&#x27;</span>, public_key)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ç§é’¥ï¼š&#x27;</span>, private_key)</span><br><span class="line">    text = <span class="string">&#x27;I love Python!&#x27;</span>  <span class="comment"># åŠ å¯†å¯¹è±¡</span></span><br><span class="line">    encrypted_str = rsa_encrypt(public_key, text)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;åŠ å¯†å­—ç¬¦ä¸²ï¼š&#x27;</span>, encrypted_str)</span><br><span class="line">    decrypted_str = rsa_decrypt(private_key, encrypted_str)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è§£å¯†å­—ç¬¦ä¸²ï¼š&#x27;</span>, decrypted_str)</span><br></pre></td></tr></table></figure>
<h3 id="3-æ¡ˆä¾‹å®æˆ˜">3 æ¡ˆä¾‹å®æˆ˜</h3>
<ul>
<li>
<p>ç›®æ ‡ï¼šæˆ¿å¤©ä¸‹è´¦å·å¯†ç ç™»å½•</p>
</li>
<li>
<p>ä¸»é¡µï¼š<a target="_blank" rel="noopener" href="https://passport.fang.com/">https://passport.fang.com/</a></p>
</li>
<li>
<p>æ¥å£ï¼š<a target="_blank" rel="noopener" href="https://passport.fang.com/login.api">https://passport.fang.com/login.api</a></p>
</li>
<li>
<p>é€†å‘å‚æ•°ï¼š</p>
<p><strong>Form Dataï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pwd: 044b527dba64d1e82657668beae1d61e4d86643d231792c78d5c538461a146b01c8e28d98b14915a11758deb60</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="3-1-æŠ“åŒ…åˆ†æ">3.1 æŠ“åŒ…åˆ†æ</h4>
<p>éšä¾¿è¾“å…¥ä¸€ä¸ªè´¦å·å¯†ç ï¼Œç‚¹å‡»ç™»é™†ï¼ŒæŠ“åŒ…å®šä½åˆ°ç™»å½•æ¥å£ä¸º <a target="_blank" rel="noopener" href="https://passport.fang.com/login.api">https://passport.fang.com/login.api</a> ï¼ŒPOST è¯·æ±‚ï¼Œ<code>Form Data</code> é‡Œï¼Œå¯†ç  <code>pwd</code> è¢«åŠ å¯†å¤„ç†äº†ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://mmbiz.qpic.cn/mmbiz_png/iabtD4jabia4JSlhKbZ7886IyfdWMia07OD7Tiad5l19Et3lneVcJf9Mq5hjibB7aibSAKQLXNTiaWicbUicaD6QNUrG4pA/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡"></p>
<h4 id="3-2-å‚æ•°é€†å‘">3.2 å‚æ•°é€†å‘</h4>
<p>åŠ å¯†å‚æ•°åªæœ‰ä¸€ä¸ª pwdï¼Œç›´æ¥å…¨å±€æœç´¢ï¼Œå‡ºç°ä¸€ä¸ª <code>loginbypassword.js</code>ï¼Œå¾ˆæ˜æ˜¾å°±æ˜¯åŠ å¯†çš„<code> JS</code>ï¼Œè¿™ä¸ª<code>JS</code>è´´å¿ƒçš„å†™ä¸Šäº†ä¸­æ–‡æ³¨é‡Šï¼Œç›´æ¥æ¥åˆ°ç™»å½•æ¨¡å—ï¼ŒåŸ‹ä¸‹æ–­ç‚¹ï¼š</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2024/11/28/6747c3ca19992.png" alt="image-20241128091343611" style="zoom:67%;" />
<p><strong>å…³é”®ä»£ç ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uid: that.username.val(),</span><br><span class="line">pwd: encryptedString(key_to_encode, that.password.val()),</span><br><span class="line">Service: that.service.val(),</span><br><span class="line">AutoLogin: that.autoLogin.val()</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸»è¦ç”¨åˆ°äº† <code>encryptedString</code> è¿™ä¸ªå‡½æ•°å’Œ <code>key_to_encode</code> å‚æ•°ï¼Œé¼ æ ‡æ”¾åˆ°<code> encryptedString</code> å‡½æ•°ä¸Šé¢ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°å®é™…ä¸Šæ˜¯åœ¨ä¸€ä¸ªå«åš <code>RSA.min.js</code> çš„åŠ å¯† JS æ–‡ä»¶é‡Œï¼Œå¾ˆæ˜æ˜¾çš„<code>RSA</code>åŠ å¯†ï¼Œæˆ‘ä»¬è·Ÿè¿›è¿™ä¸ªå‡½æ•°ï¼Œç›´æ¥å°†æ‰€æœ‰åŠ å¯†å‡½æ•°å‰¥ç¦»ä¸‹æ¥è¿›è¡Œæœ¬åœ°è°ƒè¯•å³å¯ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://mmbiz.qpic.cn/mmbiz_png/iabtD4jabia4IyXASUYVZqIEibOcJqWTkv3hcibJ0AqYiczRQ4ZKlpcIYKFAibH0uscqZgHI4xlaV2oPJlK4Oy5ST4Ww/640?wx_fmt=png&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡"></p>
<p>è€Œ <code>key_to_encode</code> è¿™ä¸ªå‚æ•°æ˜¯å¯ä»¥ç›´æ¥åœ¨é¦–é¡µæœåˆ°ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯å‘ <code>RSAKeyPair</code> å‡½æ•°ä¼ å…¥å‚æ•°å¾—åˆ°çš„ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282023649.png" alt="å›¾ç‰‡"></p>
<p>æ ¹æ®ä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåŠ å¯†çš„ä¸»è¦æ­¥éª¤é‡å†™å¹¶å°è£…æˆä¸€ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function getEncryptedPassword(pwd, n, i, t) &#123;</span><br><span class="line">    var key_to_encode = new RSAKeyPair(n, i, t);</span><br><span class="line">    <span class="keyword">return</span> encryptedString(key_to_encode, pwd)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code> pwd</code> å°±æ˜¯æ˜æ–‡å¯†ç ï¼Œ<code>nï¼Œiï¼Œt</code> æ˜¯ç”¨æ¥è·å– <code>key_to_encode</code> çš„å‚æ•°ï¼Œå®ƒä»¬ä¸‰ä¸ªçš„å€¼éƒ½å¯ä»¥åœ¨ä¸»é¡µä¸­æ‰¾åˆ°ã€‚</p>
<h4 id="3-3-JSä»£ç ">3.3 JSä»£ç </h4>
<ul>
<li><code>setMaxDigits()</code>è²Œä¼¼æ˜¯ç”Ÿæˆå¯†æ–‡çš„æœ€å¤§ä½æ•°ï¼Œ è®¡ç®—å…¬å¼<code> n ** 2 / 16</code>ã€‚å…¶ä¸­nä¸ºå¯†é’¥é•¿åº¦</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">setMaxDigits</span>(<span class="params">n</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BigInt</span>(<span class="params">n</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">biFromDecimal</span>(<span class="params">n</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­¤å¤„çœç•¥ N ä¸ªå‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">twoDigit</span>(<span class="params">n</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">encryptedString</span>(<span class="params">n, t</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">decryptedString</span>(<span class="params">n, t</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> biRadixBase = <span class="number">2</span>, biRadixBits = <span class="number">16</span>, bitsPerDigit = biRadixBits, biRadix = <span class="number">65536</span>, biHalfRadix = biRadix &gt;&gt;&gt; <span class="number">1</span>,</span><br><span class="line">    biRadixSquared = biRadix * biRadix, maxDigitVal = biRadix - <span class="number">1</span>, maxInteger = <span class="number">9999999999999998</span>, maxDigits, <span class="variable constant_">ZERO_ARRAY</span>,</span><br><span class="line">    bigZero, bigOne, dpl10, lr10, hexatrigesimalToChar, hexToChar, highBitMasks, lowBitMasks;</span><br><span class="line"><span class="title function_">setMaxDigits</span>(<span class="number">20</span>);</span><br><span class="line">dpl10 = <span class="number">15</span>;</span><br><span class="line">lr10 = <span class="title function_">biFromNumber</span>(<span class="number">1e15</span>);</span><br><span class="line">hexatrigesimalToChar = [<span class="string">&quot;0&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;6&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;8&quot;</span>, <span class="string">&quot;9&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;f&quot;</span>, <span class="string">&quot;g&quot;</span>, <span class="string">&quot;h&quot;</span>, <span class="string">&quot;i&quot;</span>, <span class="string">&quot;j&quot;</span>, <span class="string">&quot;k&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;m&quot;</span>, <span class="string">&quot;n&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;p&quot;</span>, <span class="string">&quot;q&quot;</span>, <span class="string">&quot;r&quot;</span>, <span class="string">&quot;s&quot;</span>, <span class="string">&quot;t&quot;</span>, <span class="string">&quot;u&quot;</span>, <span class="string">&quot;v&quot;</span>, <span class="string">&quot;w&quot;</span>, <span class="string">&quot;x&quot;</span>, <span class="string">&quot;y&quot;</span>, <span class="string">&quot;z&quot;</span>];</span><br><span class="line">hexToChar = [<span class="string">&quot;0&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;6&quot;</span>, <span class="string">&quot;7&quot;</span>, <span class="string">&quot;8&quot;</span>, <span class="string">&quot;9&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;f&quot;</span>];</span><br><span class="line">highBitMasks = [<span class="number">0</span>, <span class="number">32768</span>, <span class="number">49152</span>, <span class="number">57344</span>, <span class="number">61440</span>, <span class="number">63488</span>, <span class="number">64512</span>, <span class="number">65024</span>, <span class="number">65280</span>, <span class="number">65408</span>, <span class="number">65472</span>, <span class="number">65504</span>, <span class="number">65520</span>, <span class="number">65528</span>, <span class="number">65532</span>, <span class="number">65534</span>, <span class="number">65535</span>];</span><br><span class="line">lowBitMasks = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">15</span>, <span class="number">31</span>, <span class="number">63</span>, <span class="number">127</span>, <span class="number">255</span>, <span class="number">511</span>, <span class="number">1023</span>, <span class="number">2047</span>, <span class="number">4095</span>, <span class="number">8191</span>, <span class="number">16383</span>, <span class="number">32767</span>, <span class="number">65535</span>];</span><br><span class="line"><span class="title function_">setMaxDigits</span>(<span class="number">129</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getEncryptedPassword</span>(<span class="params">pwd, n, i, t</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> key_to_encode = <span class="keyword">new</span> <span class="title class_">RSAKeyPair</span>(n, i, t);</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">encryptedString</span>(key_to_encode, pwd)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•æ ·ä¾‹</span></span><br><span class="line"><span class="comment">// console.log(getEncryptedPassword(&quot;16521689404&quot;, &quot;010001&quot;, &quot;&quot;, &quot;978C0A92D2173439707498F0944AA476B1B62595877DD6FA87F6E2AC6DCB3D0BF0B82857439C99B5091192BC134889DFF60C562EC54EFBA4FF2F9D55ADBCCEA4A2FBA80CB398ED501280A007C83AF30C3D1A142D6133C63012B90AB26AC60C898FB66EDC3192C3EC4FF66925A64003B72496099F4F09A9FB72A2CF9E4D770C41&quot;))</span></span><br></pre></td></tr></table></figure>
<h4 id="3-4-pythonä»£ç ">3.4 pythonä»£ç </h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">index_url = <span class="string">&#x27;https://passport.fang.com/&#x27;</span></span><br><span class="line">login_url = <span class="string">&#x27;https://passport.fang.com/login.api&#x27;</span></span><br><span class="line">user_agent = <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.114 Safari/537.36&#x27;</span></span><br><span class="line">session = requests.session()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_key_to_encode</span>():</span><br><span class="line">    headers = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: user_agent&#125;</span><br><span class="line">    response = session.get(url=index_url, headers=headers)</span><br><span class="line">    key_to_encode = re.findall(<span class="string">r&#x27;RSAKeyPair\((.*)\);&#x27;</span>, response.text)[<span class="number">0</span>].replace(<span class="string">&#x27;&quot;&#x27;</span>, <span class="string">&#x27;&#x27;</span>).split(<span class="string">&#x27;, &#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> key_to_encode</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_encrypted_password</span>(<span class="params">key_to_encode, pwd</span>):</span><br><span class="line">    n, i, t = key_to_encode[<span class="number">0</span>], key_to_encode[<span class="number">1</span>], key_to_encode[<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;fang_encrypt.js&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        fang_js = f.read()</span><br><span class="line">    encrypted_pwd = execjs.<span class="built_in">compile</span>(fang_js).call(<span class="string">&#x27;getEncryptedPassword&#x27;</span>, pwd, n, i, t)</span><br><span class="line">    <span class="keyword">return</span> encrypted_pwd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">encrypted_password, uid</span>):</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: user_agent,</span><br><span class="line">        <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;passport.fang.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Origin&#x27;</span>: <span class="string">&#x27;https://passport.fang.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://passport.fang.com/?backurl=http%3a%2f%2fmy.fang.com%2f&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;sec-ch-ua&#x27;</span>: <span class="string">&#x27;&quot; Not;A Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;91&quot;, &quot;Chromium&quot;;v=&quot;91&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded; charset=UTF-8&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;uid&#x27;</span>: uid,</span><br><span class="line">        <span class="string">&#x27;pwd&#x27;</span>: encrypted_password,</span><br><span class="line">        <span class="string">&#x27;Service&#x27;</span>: <span class="string">&#x27;soufun-passport-web&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;AutoLogin&#x27;</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    response = session.post(url=login_url, data=data, headers=headers)</span><br><span class="line">    <span class="built_in">print</span>(response.json())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># 16521689404</span></span><br><span class="line">    uid = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥ç™»å½•è´¦å·ï¼š&#x27;</span>)</span><br><span class="line">    pwd = <span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥ç™»å½•å¯†ç ï¼š&#x27;</span>)</span><br><span class="line">    rsa_key = get_key_to_encode()</span><br><span class="line">    encrypted_pwd = get_encrypted_password(rsa_key, pwd)</span><br><span class="line">    login(encrypted_pwd, uid)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h3 id="4-æ¡ˆä¾‹å®æˆ˜">4. æ¡ˆä¾‹å®æˆ˜</h3>
<p><strong>è¯´æ˜</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ¬æ•™ç¨‹ä¸ºæ•™å­¦ä½¿ç”¨ï¼Œä¸æ‰¿æ‹…ä»»ä½•é£é™©ï¼Œè¯·å„å­¦å‘˜è‡ªè§‰éµå®ˆæ³•å¾‹æ³•è§„ -- å¾®æµäº‘å¹³å°</span><br></pre></td></tr></table></figure>
<h4 id="4-1-é€†å‘å‚æ•°">4.1 é€†å‘å‚æ•°</h4>
<ul>
<li>è¯¥æ¡ˆä¾‹æ˜¯å¤šå±‚åµŒå¥—åŠ å¯†</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åœ°å€ï¼šhttps://www.wei-liu.com/user/login.html</span><br><span class="line"></span><br><span class="line">password: <span class="string">&quot;ZfYhxYg6V6STQDo8FwTCeqpmtsWjh73R/nIotCh0RnkuJMgd7e72U+JVo/XQ6sY3qEVd+J+d6D</span></span><br></pre></td></tr></table></figure>
<h4 id="4-2-é€†å‘åˆ†æ">4.2 é€†å‘åˆ†æ</h4>
<p>ç‚¹å‡»ç™»å½•ä¼šåŠ è½½2ä¸ªåœ°å€</p>
<p>åœ°å€1ï¼š<a target="_blank" rel="noopener" href="https://api.wei-liu.com/api/v1/Token/code">https://api.wei-liu.com/api/v1/Token/code</a></p>
<p>åœ°å€2ï¼š<a target="_blank" rel="noopener" href="https://api.wei-liu.com/api/v1/Token">https://api.wei-liu.com/api/v1/Token</a></p>
<p>**æ€»ç»“ï¼š**åœ°å€2é‡Œé¢æœ‰æºå¸¦å‚æ•°  åœ°å€1è¿”å›<code>å…¬é’¥</code>å’Œ<code>item2</code>å‚æ•°</p>
<h4 id="4-3-JavaScriptåˆ†æ">4.3 JavaScriptåˆ†æ</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282023333.png" alt="image-20220817153828723"></p>
<p>**æ€»ç»“ï¼š**ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºå¯†ç æ˜¯å±äºåŠ å¯†çš„</p>
<p>ä¸‹<code>XHR</code>æ–­ç‚¹åˆ†æ<code>https://api.wei-liu.com/api/v1/Token</code>,å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®å‘ç°å‚æ•°</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282023820.png" alt="image-20220817154256383"></p>
<h4 id="4-4-å¯†é’¥åˆ†æ">4.4 å¯†é’¥åˆ†æ</h4>
<ul>
<li>æ‹‰åŠ¨æ»‘å—ï¼Œè·å–åå°å…¬é’¥ <code>item1</code> å’Œå¸¦æœ‰æ—¶é—´çš„<code>item2</code></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282023847.png" alt="image-20220817153949071"></p>
<h4 id="4-5-ç®—æ³•è¿˜åŸ">4.5 ç®—æ³•è¿˜åŸ</h4>
<h5 id="4-5-1-ç”¨pythonæ¨¡æ‹Ÿè¯·æ±‚æµ‹è¯•">4.5.1 ç”¨pythonæ¨¡æ‹Ÿè¯·æ±‚æµ‹è¯•</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_miyue</span>():</span><br><span class="line">    session = requests.session()</span><br><span class="line">    header = &#123;</span><br><span class="line">        <span class="string">&#x27;å…·ä½“å‚æ•°æ‰¾å¤æ´›è€å¸ˆæ‹¿&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    session.headers = header</span><br><span class="line">    url = <span class="string">&#x27;https://api.wei-liu.com/api/v1/Token/code&#x27;</span></span><br><span class="line">    res = session.get(url)</span><br><span class="line">    <span class="keyword">if</span> res.status_code == <span class="number">200</span>:</span><br><span class="line">        res1 = res.json().get(<span class="string">&#x27;data&#x27;</span>)</span><br><span class="line">        item1 = res1.get(<span class="string">&#x27;item1&#x27;</span>)</span><br><span class="line">        item2 = res1.get(<span class="string">&#x27;item2&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> item1,item2</span><br></pre></td></tr></table></figure>
<h5 id="4-5-2-JavaScriptæµ‹è¯•ä»£ç ">4.5.2  JavaScriptæµ‹è¯•ä»£ç </h5>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">JSEncrypt</span> = <span class="built_in">require</span>(<span class="string">&#x27;jsencrypt&#x27;</span>);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">encrypt</span>(<span class="params"><span class="variable language_">module</span>,pubCode,pwd</span>)&#123;</span><br><span class="line">	<span class="keyword">var</span> encrypt = <span class="keyword">new</span> <span class="title class_">JSEncrypt</span>();</span><br><span class="line">    encrypt.<span class="title function_">setPublicKey</span>(<span class="variable language_">module</span>);</span><br><span class="line">    <span class="keyword">var</span> result = encrypt.<span class="title function_">encrypt</span>(pubCode + pwd);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="4-5-3-å¯†ç è·å–">4.5.3 å¯†ç è·å–</h5>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">js_code = <span class="title function_">open</span>(<span class="string">&#x27;psd.js&#x27;</span>,<span class="string">&#x27;r&#x27;</span>).<span class="title function_">read</span>()</span><br><span class="line">result = execjs.<span class="title function_">compile</span>(js_code).<span class="title function_">call</span>(<span class="string">&#x27;encrypt&#x27;</span>,item1,item2,<span class="title function_">jm_sha256</span>(<span class="string">&#x27;&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h2 id="WebPackæ‰“åŒ…"><code>WebPack</code>æ‰“åŒ…</h2>
<p><code>webpack</code>æ˜¯ä¸€ä¸ªåŸºäºæ¨¡å—åŒ–çš„æ‰“åŒ…ï¼ˆæ„å»ºï¼‰å·¥å…·, å®ƒæŠŠä¸€åˆ‡éƒ½è§†ä½œæ¨¡å—</p>
<p><strong>æ¦‚å¿µï¼š</strong></p>
<p>â€‹       <code>webpack</code>æ˜¯ <code>JavaScript</code> åº”ç”¨ç¨‹åºçš„æ¨¡å—æ‰“åŒ…å™¨,å¯ä»¥æŠŠå¼€å‘ä¸­çš„æ‰€æœ‰èµ„æºï¼ˆå›¾ç‰‡ã€jsæ–‡ä»¶ã€cssæ–‡ä»¶ç­‰ï¼‰éƒ½çœ‹æˆæ¨¡å—ï¼Œé€šè¿‡loaderï¼ˆåŠ è½½å™¨ï¼‰å’Œ<code>plugins</code>ï¼ˆæ’ä»¶ï¼‰å¯¹èµ„æºè¿›è¡Œå¤„ç†ï¼Œæ‰“åŒ…æˆç¬¦åˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²çš„å‰ç«¯èµ„æºã€‚æ‰€æœ‰çš„èµ„æºéƒ½æ˜¯é€šè¿‡<code>JavaScript</code>æ¸²æŸ“å‡ºæ¥çš„ã€‚</p>
<p>å¦‚æœä¸€ä¸ªé¡µé¢å¤§éƒ¨åˆ†æ˜¯scriptæ ‡ç­¾æ„æˆï¼Œ80%ä»¥ä¸Šæ˜¯<code>webpack</code>æ‰“åŒ…ã€‚</p>
<p><strong>åœ°å€</strong>ï¼š<a target="_blank" rel="noopener" href="http://cls.cn/telegraph">http://cls.cn/telegraph</a></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://app.yinxiang.com/FileSharing.action?hash=1/7d9dde72b8262d871a27f10af50a9b44-286201" alt="img"></p>
<h3 id="1-webpackæ‰“åŒ…ç®€ä»‹">1. <code>webpack</code>æ‰“åŒ…ç®€ä»‹</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://app.yinxiang.com/FileSharing.action?hash=1/62be23ee03da0e043ff4b088eb0872cd-72813" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282024241.png" alt="image-20220329153518062"></p>
<h4 id="1-0-å¤šä¸ªJSæ–‡ä»¶æ‰“åŒ…ï¼š">1.0 å¤šä¸ª<code>JS</code>æ–‡ä»¶æ‰“åŒ…ï¼š</h4>
<p>â€‹		å¦‚æœæ¨¡å—æ¯”è¾ƒå¤šï¼Œå°±ä¼šå°†æ¨¡å—æ‰“åŒ…æˆJSæ–‡ä»¶, ç„¶åå®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ window[â€œwebpackJsonpâ€] = [ ]ï¼Œå®ƒçš„ä½œç”¨æ˜¯å­˜å‚¨éœ€è¦åŠ¨æ€å¯¼å…¥çš„æ¨¡å—ï¼Œç„¶åé‡å†™ window[â€œwebpackJsonpâ€] æ•°ç»„çš„ push( ) æ–¹æ³•ä¸º webpackJsonpCallback( ),ä¹Ÿå°±æ˜¯è¯´ window[â€œwebpackJsonpâ€].push( ) å…¶å®æ‰§è¡Œçš„æ˜¯ webpackJsonpCallback( ),window[â€œwebpackJsonpâ€].push( )æ¥æ”¶ä¸‰ä¸ªå‚æ•°,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¨¡å—çš„ID,ç¬¬äºŒä¸ªå‚æ•°æ˜¯ ä¸€ä¸ªæ•°ç»„æˆ–è€…å¯¹è±¡,é‡Œé¢å®šä¹‰å¤§é‡çš„å‡½æ•°,ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¦è°ƒç”¨çš„å‡½æ•°(å¯é€‰)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://app.yinxiang.com/FileSharing.action?hash=1/46d51af6b6946548adccc97f31a249ef-20029" alt="img"></p>
<h4 id="1-1-webpackæ•°ç»„å½¢å¼">1.1 <code>webpack</code>æ•°ç»„å½¢å¼</h4>
<ul>
<li>ç»™éœ€è¦å¤„ç†ä¸šåŠ¡çš„æ¨¡å—è¿›è¡Œæ‰“åŒ…ï¼Œé€šè¿‡ä¸‹æ ‡å–å€¼ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">!<span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> t = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŠ è½½å™¨  æ‰€æœ‰çš„æ¨¡å—éƒ½æ˜¯ä»è¿™ä¸ªå‡½æ•°åŠ è½½ æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">n</span>(<span class="params">r</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (t[r])</span><br><span class="line">            <span class="keyword">return</span> t[r].<span class="property">exports</span>;</span><br><span class="line">        <span class="keyword">var</span> o = t[r] = &#123;</span><br><span class="line">            <span class="attr">i</span>: r,</span><br><span class="line">            <span class="attr">l</span>: !<span class="number">1</span>,</span><br><span class="line">            <span class="attr">exports</span>: &#123;&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> e[r].<span class="title function_">call</span>(o.<span class="property">exports</span>, o, o.<span class="property">exports</span>, n),</span><br><span class="line">            o.<span class="property">l</span> = !<span class="number">0</span>,</span><br><span class="line">            o.<span class="property">exports</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">n</span>(<span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line">    ([</span><br><span class="line">        <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">              <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ¨¡å—2&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">    ])</span><br></pre></td></tr></table></figure>
<h4 id="1-2-webpackå¯¹è±¡å½¢å¼">1.2 <code>webpack</code>å¯¹è±¡å½¢å¼</h4>
<ul>
<li>ç»™éœ€è¦å¤„ç†ä¸šåŠ¡çš„æ¨¡å—è¿›è¡Œæ‰“åŒ…ï¼Œé€šè¿‡<code>key</code>å–å€¼ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">!<span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> t = &#123;&#125;;</span><br><span class="line">    <span class="comment">//  æ‰€æœ‰çš„æ¨¡å— éƒ½æ˜¯ä»è¿™ä¸ªåŠ è½½å™¨ æ‰§è¡Œçš„  åˆ†å‘å™¨</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">n</span>(<span class="params">r</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (t[r])</span><br><span class="line">            <span class="keyword">return</span> t[r].<span class="property">exports</span>;</span><br><span class="line">        <span class="keyword">var</span> o = t[r] = &#123;</span><br><span class="line">            <span class="attr">i</span>: r,</span><br><span class="line">            <span class="attr">l</span>: !<span class="number">1</span>,</span><br><span class="line">            <span class="attr">exports</span>: &#123;&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> e[r].<span class="title function_">call</span>(o.<span class="property">exports</span>, o, o.<span class="property">exports</span>, n),</span><br><span class="line">        o.<span class="property">l</span> = !<span class="number">0</span>,</span><br><span class="line">        o.<span class="property">exports</span></span><br><span class="line">    &#125;</span><br><span class="line">   <span class="title function_">n</span>(<span class="string">&#x27;xialuo&#x27;</span>)  <span class="comment">// å¯¹è±¡ æ ¹æ®KEY æ‰¾æ¨¡å—</span></span><br><span class="line">&#125;(&#123;</span><br><span class="line"></span><br><span class="line">        <span class="number">0</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æˆ‘æ˜¯æ¨¡å—1  è´Ÿè´£åŠ å¯†&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="string">&#x27;xialuo&#x27;</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æˆ‘æ˜¯æ¨¡å—2  è´Ÿè´£è§£å¯†&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="number">2</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æˆ‘æ˜¯æ¨¡å—3  è´Ÿè´£çˆ¬æ•°æ®&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="2-webpackæ•™å­¦">2. <code>webpack</code>æ•™å­¦</h3>
<h4 id="2-1-é€†å‘ç›®æ ‡">2.1 é€†å‘ç›®æ ‡</h4>
<ul>
<li>
<p>é¦–é¡µï¼š<a target="_blank" rel="noopener" href="https://agent.leju.com/ucenter/passportlogin/">https://agent.leju.com/ucenter/passportlogin/</a></p>
</li>
<li>
<p>æ¥å£ï¼š<a target="_blank" rel="noopener" href="https://agent.leju.com/ucenter/login/">https://agent.leju.com/ucenter/login/</a></p>
</li>
<li>
<p>é€†å‘å‚æ•°ï¼š<code>password: 8cbf7f88e70300def68533a74c77b785e11d743c77627b624</code></p>
</li>
</ul>
<h4 id="2-2-é€†å‘åˆ†æ">2.2 é€†å‘åˆ†æ</h4>
<ul>
<li>å…¨å±€æœç´¢<code>password</code>å‚æ•°ï¼Œç„¶åä¸‹æ–­ç‚¹è°ƒè¯•ï¼Œå¯ä»¥å‘ç°åŠ å¯†é€»è¾‘åœ¨<code>loginNew_9697dc1c616207641ca0.js</code>é‡Œé¢ã€‚</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282024248.png" alt="image-20220821172434242"></p>
<ul>
<li>
<p>ç‚¹å‡»è¿›å»ï¼Œå‘ç°æ˜¯æ¨¡å—</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282024245.png" alt="image-20220821173358041"></p>
</li>
<li>
<p>å¯¼å‡ºåŠ è½½å™¨ï¼ŒæŸ¥çœ‹æ‰€æœ‰æ¨¡å—</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282024706.png" alt="image-20220821180249172"></p>
<h4 id="2-3-ä»£ç å¤„ç†">2.3 ä»£ç å¤„ç†</h4>
<ul>
<li>æ‰¾å‡ºå¯¹åº”è´Ÿè´£æ¨¡å—</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282024558.png" alt="image-20220821181840088"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> _xx;</span><br><span class="line">!<span class="keyword">function</span>(<span class="params">t</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> e = &#123;&#125;;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">i</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e[n])</span><br><span class="line">            <span class="keyword">return</span> e[n].<span class="property">exports</span>;</span><br><span class="line">        <span class="keyword">var</span> s = e[n] = &#123;</span><br><span class="line">            <span class="attr">i</span>: n,</span><br><span class="line">            <span class="attr">l</span>: !<span class="number">1</span>,</span><br><span class="line">            <span class="attr">exports</span>: &#123;&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(n)</span><br><span class="line">        <span class="keyword">return</span> t[n].<span class="title function_">call</span>(s.<span class="property">exports</span>, s, s.<span class="property">exports</span>, i),</span><br><span class="line">        s.<span class="property">l</span> = !<span class="number">0</span>,</span><br><span class="line">        s.<span class="property">exports</span></span><br><span class="line">    &#125;</span><br><span class="line">    i.<span class="property">m</span> = t,</span><br><span class="line">    i.<span class="property">c</span> = e,</span><br><span class="line">    i.<span class="property">d</span> = <span class="keyword">function</span>(<span class="params">t, e, n</span>) &#123;</span><br><span class="line">        i.<span class="title function_">o</span>(t, e) || <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(t, e, &#123;</span><br><span class="line">            <span class="attr">enumerable</span>: !<span class="number">0</span>,</span><br><span class="line">            <span class="attr">get</span>: n</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    i.<span class="property">r</span> = <span class="keyword">function</span>(<span class="params">t</span>) &#123;</span><br><span class="line">        <span class="string">&quot;undefined&quot;</span> != <span class="keyword">typeof</span> <span class="title class_">Symbol</span> &amp;&amp; <span class="title class_">Symbol</span>.<span class="property">toStringTag</span> &amp;&amp; <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(t, <span class="title class_">Symbol</span>.<span class="property">toStringTag</span>, &#123;</span><br><span class="line">            <span class="attr">value</span>: <span class="string">&quot;Module&quot;</span></span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(t, <span class="string">&quot;__esModule&quot;</span>, &#123;</span><br><span class="line">            <span class="attr">value</span>: !<span class="number">0</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    i.<span class="property">t</span> = <span class="keyword">function</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span> &amp; e &amp;&amp; (t = <span class="title function_">i</span>(t)),</span><br><span class="line">        <span class="number">8</span> &amp; e)</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">4</span> &amp; e &amp;&amp; <span class="string">&quot;object&quot;</span> == <span class="keyword">typeof</span> t &amp;&amp; t &amp;&amp; t.<span class="property">__esModule</span>)</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        <span class="keyword">var</span> n = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">if</span> (i.<span class="title function_">r</span>(n),</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(n, <span class="string">&quot;default&quot;</span>, &#123;</span><br><span class="line">            <span class="attr">enumerable</span>: !<span class="number">0</span>,</span><br><span class="line">            <span class="attr">value</span>: t</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="number">2</span> &amp; e &amp;&amp; <span class="string">&quot;string&quot;</span> != <span class="keyword">typeof</span> t)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> s <span class="keyword">in</span> t)</span><br><span class="line">                i.<span class="title function_">d</span>(n, s, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> t[e]</span><br><span class="line">                &#125;</span><br><span class="line">                .<span class="title function_">bind</span>(<span class="literal">null</span>, s));</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    i.<span class="property">n</span> = <span class="keyword">function</span>(<span class="params">t</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> e = t &amp;&amp; t.<span class="property">__esModule</span> ? <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> t.<span class="property">default</span></span><br><span class="line">        &#125;</span><br><span class="line">        : <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> t</span><br><span class="line">        &#125;</span><br><span class="line">        ;</span><br><span class="line">        <span class="keyword">return</span> i.<span class="title function_">d</span>(e, <span class="string">&quot;a&quot;</span>, e),</span><br><span class="line">        e</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    i.<span class="property">o</span> = <span class="keyword">function</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(t, e)</span><br><span class="line">    &#125;</span><br><span class="line">    ,</span><br><span class="line">    i.<span class="property">p</span> = <span class="string">&quot;//esfres.leju.com/agent_www_new/dist/&quot;</span>,</span><br><span class="line">    <span class="comment">// i(i.s = 301)</span></span><br><span class="line">       _xx = i;</span><br><span class="line"></span><br><span class="line">&#125;(&#123;</span><br><span class="line"> <span class="number">305</span>: <span class="keyword">function</span>(<span class="params">t, e, i</span>) &#123;</span><br><span class="line">        <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(e, <span class="string">&quot;__esModule&quot;</span>, &#123;</span><br><span class="line">            <span class="attr">value</span>: !<span class="number">0</span></span><br><span class="line">        &#125;),</span><br><span class="line">        e.<span class="property">encryptedString</span> = e.<span class="property">RSAKeyPair</span> = <span class="keyword">void</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">var</span> n = <span class="title function_">i</span>(<span class="number">228</span>)</span><br><span class="line">          , s = <span class="title function_">i</span>(<span class="number">306</span>)</span><br><span class="line">          , o = &#123;&#125;;</span><br><span class="line">        o.<span class="property">NoPadding</span> = <span class="string">&quot;NoPadding&quot;</span>,</span><br><span class="line">        o.<span class="property">PKCS1Padding</span> = <span class="string">&quot;PKCS1Padding&quot;</span>,</span><br><span class="line">        o.<span class="property">RawEncoding</span> = <span class="string">&quot;RawEncoding&quot;</span>,</span><br><span class="line">        o.<span class="property">NumericEncoding</span> = <span class="string">&quot;NumericEncoding&quot;</span>,</span><br><span class="line">        e.<span class="property">RSAKeyPair</span> = <span class="keyword">function</span>(<span class="params">t, e, i, o</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">e</span> = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biFromHex</span>)(t),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">d</span> = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biFromHex</span>)(e),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">m</span> = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biFromHex</span>)(i),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">chunkSize</span> = <span class="string">&quot;number&quot;</span> != <span class="keyword">typeof</span> o ? <span class="number">2</span> * (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biHighIndex</span>)(<span class="variable language_">this</span>.<span class="property">m</span>) : o / <span class="number">8</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">radix</span> = <span class="number">16</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">barrett</span> = <span class="keyword">new</span> s.<span class="title class_">BarrettMu</span>(<span class="variable language_">this</span>.<span class="property">m</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        e.<span class="property">encryptedString</span> = <span class="keyword">function</span>(<span class="params">t, e, i, s</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> a, r, l, c, u, d, p, h, f, g = <span class="keyword">new</span> <span class="title class_">Array</span>, m = e.<span class="property">length</span>, y = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span> (c = <span class="string">&quot;string&quot;</span> == <span class="keyword">typeof</span> i ? i == o.<span class="property">NoPadding</span> ? <span class="number">1</span> : i == o.<span class="property">PKCS1Padding</span> ? <span class="number">2</span> : <span class="number">0</span> : <span class="number">0</span>,</span><br><span class="line">            u = <span class="string">&quot;string&quot;</span> == <span class="keyword">typeof</span> s &amp;&amp; s == o.<span class="property">RawEncoding</span> ? <span class="number">1</span> : <span class="number">0</span>,</span><br><span class="line">            <span class="number">1</span> == c ? m &gt; t.<span class="property">chunkSize</span> &amp;&amp; (m = t.<span class="property">chunkSize</span>) : <span class="number">2</span> == c &amp;&amp; m &gt; t.<span class="property">chunkSize</span> - <span class="number">11</span> &amp;&amp; (m = t.<span class="property">chunkSize</span> - <span class="number">11</span>),</span><br><span class="line">            a = <span class="number">0</span>,</span><br><span class="line">            r = <span class="number">2</span> == c ? m - <span class="number">1</span> : t.<span class="property">chunkSize</span> - <span class="number">1</span>; a &lt; m; )</span><br><span class="line">                c ? g[r] = e.<span class="title function_">charCodeAt</span>(a) : g[a] = e.<span class="title function_">charCodeAt</span>(a),</span><br><span class="line">                a++,</span><br><span class="line">                r--;</span><br><span class="line">            <span class="keyword">for</span> (<span class="number">1</span> == c &amp;&amp; (a = <span class="number">0</span>),</span><br><span class="line">            r = t.<span class="property">chunkSize</span> - m % t.<span class="property">chunkSize</span>; r &gt; <span class="number">0</span>; ) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="number">2</span> == c) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (d = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">256</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()); !d; )</span><br><span class="line">                        d = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">256</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>());</span><br><span class="line">                    g[a] = d</span><br><span class="line">                &#125; <span class="keyword">else</span></span><br><span class="line">                    g[a] = <span class="number">0</span>;</span><br><span class="line">                a++,</span><br><span class="line">                r--</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="number">2</span> == c &amp;&amp; (g[m] = <span class="number">0</span>,</span><br><span class="line">            g[t.<span class="property">chunkSize</span> - <span class="number">2</span>] = <span class="number">2</span>,</span><br><span class="line">            g[t.<span class="property">chunkSize</span> - <span class="number">1</span>] = <span class="number">0</span>),</span><br><span class="line">            p = g.<span class="property">length</span>,</span><br><span class="line">            a = <span class="number">0</span>; a &lt; p; a += t.<span class="property">chunkSize</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (h = <span class="keyword">new</span> n.<span class="property">BigInt</span>,</span><br><span class="line">                r = <span class="number">0</span>,</span><br><span class="line">                l = a; l &lt; a + t.<span class="property">chunkSize</span>; ++r)</span><br><span class="line">                    h.<span class="property">digits</span>[r] = g[l++],</span><br><span class="line">                    h.<span class="property">digits</span>[r] += g[l++] &lt;&lt; <span class="number">8</span>;</span><br><span class="line">                f = t.<span class="property">barrett</span>.<span class="title function_">powMod</span>(h, t.<span class="property">e</span>),</span><br><span class="line">                y += <span class="number">1</span> == u ? <span class="title function_">biToBytes</span>(f) : <span class="number">16</span> == t.<span class="property">radix</span> ? (<span class="number">0</span>,</span><br><span class="line">                n.<span class="property">biToHex</span>)(f) : <span class="title function_">biToString</span>(f, t.<span class="property">radix</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> y</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">           <span class="number">228</span>: <span class="keyword">function</span>(<span class="params">t, e, i</span>) &#123;</span><br><span class="line">        <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(e, <span class="string">&quot;__esModule&quot;</span>, &#123;</span><br><span class="line">            <span class="attr">value</span>: !<span class="number">0</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">var</span> n, s;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">o</span>(<span class="params">t</span>) &#123;</span><br><span class="line">n = <span class="keyword">new</span> <span class="title class_">Array</span>(t);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="number">0</span>; e &lt; n.<span class="property">length</span>; e++)</span><br><span class="line">                n[e] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">new</span> a,</span><br><span class="line">            (s = <span class="keyword">new</span> a).<span class="property">digits</span>[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">o</span>(<span class="number">20</span>);</span><br><span class="line">        <span class="title function_">l</span>(<span class="number">1e15</span>);</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">digits</span> = <span class="string">&quot;boolean&quot;</span> == <span class="keyword">typeof</span> t &amp;&amp; <span class="number">1</span> == t ? <span class="literal">null</span> : n.<span class="title function_">slice</span>(<span class="number">0</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isNeg</span> = !<span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">r</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> e = <span class="keyword">new</span> <span class="title function_">a</span>(!<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">return</span> e.<span class="property">digits</span> = t.<span class="property">digits</span>.<span class="title function_">slice</span>(<span class="number">0</span>),</span><br><span class="line">            e.<span class="property">isNeg</span> = t.<span class="property">isNeg</span>,</span><br><span class="line">            e</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">l</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> e = <span class="keyword">new</span> a;</span><br><span class="line">            e.<span class="property">isNeg</span> = t &lt; <span class="number">0</span>,</span><br><span class="line">            t = <span class="title class_">Math</span>.<span class="title function_">abs</span>(t);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; t &gt; <span class="number">0</span>; )</span><br><span class="line">                e.<span class="property">digits</span>[i++] = <span class="number">65535</span> &amp; t,</span><br><span class="line">                t &gt;&gt;= <span class="number">16</span>;</span><br><span class="line">            <span class="keyword">return</span> e</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="string">&quot;&quot;</span>, i = t.<span class="property">length</span> - <span class="number">1</span>; i &gt; -<span class="number">1</span>; --i)</span><br><span class="line">                e += t.<span class="title function_">charAt</span>(i);</span><br><span class="line">            <span class="keyword">return</span> e</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="string">&quot;0&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;3&quot;</span>,<span class="string">&quot;4&quot;</span>,<span class="string">&quot;5&quot;</span>,<span class="string">&quot;6&quot;</span>,<span class="string">&quot;7&quot;</span>,<span class="string">&quot;8&quot;</span>,<span class="string">&quot;9&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;f&quot;</span>,<span class="string">&quot;g&quot;</span>,<span class="string">&quot;h&quot;</span>,<span class="string">&quot;i&quot;</span>,<span class="string">&quot;j&quot;</span>,<span class="string">&quot;k&quot;</span>,<span class="string">&quot;l&quot;</span>,<span class="string">&quot;m&quot;</span>,<span class="string">&quot;n&quot;</span>,<span class="string">&quot;o&quot;</span>,<span class="string">&quot;p&quot;</span>,<span class="string">&quot;q&quot;</span>,<span class="string">&quot;r&quot;</span>,<span class="string">&quot;s&quot;</span>,<span class="string">&quot;t&quot;</span>,<span class="string">&quot;u&quot;</span>,<span class="string">&quot;v&quot;</span>,<span class="string">&quot;w&quot;</span>,<span class="string">&quot;x&quot;</span>,<span class="string">&quot;y&quot;</span>,<span class="string">&quot;z&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> u = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="string">&quot;0&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;3&quot;</span>,<span class="string">&quot;4&quot;</span>,<span class="string">&quot;5&quot;</span>,<span class="string">&quot;6&quot;</span>,<span class="string">&quot;7&quot;</span>,<span class="string">&quot;8&quot;</span>,<span class="string">&quot;9&quot;</span>,<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;d&quot;</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;f&quot;</span>);</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">d</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="string">&quot;&quot;</span>, i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i)</span><br><span class="line">                e += u[<span class="number">15</span> &amp; t],</span><br><span class="line">                t &gt;&gt;&gt;= <span class="number">4</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">c</span>(e)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">p</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> t &gt;= <span class="number">48</span> &amp;&amp; t &lt;= <span class="number">57</span> ? t - <span class="number">48</span> : t &gt;= <span class="number">65</span> &amp;&amp; t &lt;= <span class="number">90</span> ? <span class="number">10</span> + t - <span class="number">65</span> : t &gt;= <span class="number">97</span> &amp;&amp; t &lt;= <span class="number">122</span> ? <span class="number">10</span> + t - <span class="number">97</span> : <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="number">0</span>, i = <span class="title class_">Math</span>.<span class="title function_">min</span>(t.<span class="property">length</span>, <span class="number">4</span>), n = <span class="number">0</span>; n &lt; i; ++n)</span><br><span class="line">                e &lt;&lt;= <span class="number">4</span>,</span><br><span class="line">                e |= <span class="title function_">p</span>(t.<span class="title function_">charCodeAt</span>(n));</span><br><span class="line">            <span class="keyword">return</span> e</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i;</span><br><span class="line">            <span class="keyword">if</span> (t.<span class="property">isNeg</span> != e.<span class="property">isNeg</span>)</span><br><span class="line">                e.<span class="property">isNeg</span> = !e.<span class="property">isNeg</span>,</span><br><span class="line">                i = <span class="title function_">g</span>(t, e),</span><br><span class="line">                e.<span class="property">isNeg</span> = !e.<span class="property">isNeg</span>;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                i = <span class="keyword">new</span> a;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> n, s = <span class="number">0</span>, o = <span class="number">0</span>; o &lt; t.<span class="property">digits</span>.<span class="property">length</span>; ++o)</span><br><span class="line">                    n = t.<span class="property">digits</span>[o] + e.<span class="property">digits</span>[o] + s,</span><br><span class="line">                    i.<span class="property">digits</span>[o] = <span class="number">65535</span> &amp; n,</span><br><span class="line">                    s = <span class="title class_">Number</span>(n &gt;= <span class="number">65536</span>);</span><br><span class="line">                i.<span class="property">isNeg</span> = t.<span class="property">isNeg</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">g</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i;</span><br><span class="line">            <span class="keyword">if</span> (t.<span class="property">isNeg</span> != e.<span class="property">isNeg</span>)</span><br><span class="line">                e.<span class="property">isNeg</span> = !e.<span class="property">isNeg</span>,</span><br><span class="line">                i = <span class="title function_">f</span>(t, e),</span><br><span class="line">                e.<span class="property">isNeg</span> = !e.<span class="property">isNeg</span>;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> n, s;</span><br><span class="line">                i = <span class="keyword">new</span> a,</span><br><span class="line">                s = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> o = <span class="number">0</span>; o &lt; t.<span class="property">digits</span>.<span class="property">length</span>; ++o)</span><br><span class="line">                    n = t.<span class="property">digits</span>[o] - e.<span class="property">digits</span>[o] + s,</span><br><span class="line">                    i.<span class="property">digits</span>[o] = <span class="number">65535</span> &amp; n,</span><br><span class="line">                    i.<span class="property">digits</span>[o] &lt; <span class="number">0</span> &amp;&amp; (i.<span class="property">digits</span>[o] += <span class="number">65536</span>),</span><br><span class="line">                    s = <span class="number">0</span> - <span class="title class_">Number</span>(n &lt; <span class="number">0</span>);</span><br><span class="line">                <span class="keyword">if</span> (-<span class="number">1</span> == s) &#123;</span><br><span class="line">                    s = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">for</span> (o = <span class="number">0</span>; o &lt; t.<span class="property">digits</span>.<span class="property">length</span>; ++o)</span><br><span class="line">                        n = <span class="number">0</span> - i.<span class="property">digits</span>[o] + s,</span><br><span class="line">                        i.<span class="property">digits</span>[o] = <span class="number">65535</span> &amp; n,</span><br><span class="line">                        i.<span class="property">digits</span>[o] &lt; <span class="number">0</span> &amp;&amp; (i.<span class="property">digits</span>[o] += <span class="number">65536</span>),</span><br><span class="line">                        s = <span class="number">0</span> - <span class="title class_">Number</span>(n &lt; <span class="number">0</span>);</span><br><span class="line">                    i.<span class="property">isNeg</span> = !t.<span class="property">isNeg</span></span><br><span class="line">                &#125; <span class="keyword">else</span></span><br><span class="line">                    i.<span class="property">isNeg</span> = t.<span class="property">isNeg</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">m</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> e = t.<span class="property">digits</span>.<span class="property">length</span> - <span class="number">1</span>; e &gt; <span class="number">0</span> &amp;&amp; <span class="number">0</span> == t.<span class="property">digits</span>[e]; )</span><br><span class="line">                --e;</span><br><span class="line">            <span class="keyword">return</span> e</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">y</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> e, i = <span class="title function_">m</span>(t), n = t.<span class="property">digits</span>[i], s = <span class="number">16</span> * (i + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">for</span> (e = s; e &gt; s - <span class="number">16</span> &amp;&amp; <span class="number">0</span> == (<span class="number">32768</span> &amp; n); --e)</span><br><span class="line">                n &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> e</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">v</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i, n, s, o = <span class="keyword">new</span> a, r = <span class="title function_">m</span>(t), l = <span class="title function_">m</span>(e), c = <span class="number">0</span>; c &lt;= l; ++c) &#123;</span><br><span class="line">                i = <span class="number">0</span>,</span><br><span class="line">                s = c;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> u = <span class="number">0</span>; u &lt;= r; ++u,</span><br><span class="line">                ++s)</span><br><span class="line">                    n = o.<span class="property">digits</span>[s] + t.<span class="property">digits</span>[u] * e.<span class="property">digits</span>[c] + i,</span><br><span class="line">                    o.<span class="property">digits</span>[s] = <span class="number">65535</span> &amp; n,</span><br><span class="line">                    i = n &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">                o.<span class="property">digits</span>[c + r + <span class="number">1</span>] = i</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> o.<span class="property">isNeg</span> = t.<span class="property">isNeg</span> != e.<span class="property">isNeg</span>,</span><br><span class="line">            o</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i, n, s, o = <span class="keyword">new</span> a;</span><br><span class="line">            i = <span class="title function_">m</span>(t),</span><br><span class="line">            n = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> r = <span class="number">0</span>; r &lt;= i; ++r)</span><br><span class="line">                s = o.<span class="property">digits</span>[r] + t.<span class="property">digits</span>[r] * e + n,</span><br><span class="line">                o.<span class="property">digits</span>[r] = <span class="number">65535</span> &amp; s,</span><br><span class="line">                n = s &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">            <span class="keyword">return</span> o.<span class="property">digits</span>[<span class="number">1</span> + i] = n,</span><br><span class="line">            o</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">w</span>(<span class="params">t, e, i, n, s</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> o = <span class="title class_">Math</span>.<span class="title function_">min</span>(e + s, t.<span class="property">length</span>), a = e, r = n; a &lt; o; ++a,</span><br><span class="line">            ++r)</span><br><span class="line">                i[r] = t[a]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> k = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">0</span>,<span class="number">32768</span>,<span class="number">49152</span>,<span class="number">57344</span>,<span class="number">61440</span>,<span class="number">63488</span>,<span class="number">64512</span>,<span class="number">65024</span>,<span class="number">65280</span>,<span class="number">65408</span>,<span class="number">65472</span>,<span class="number">65504</span>,<span class="number">65520</span>,<span class="number">65528</span>,<span class="number">65532</span>,<span class="number">65534</span>,<span class="number">65535</span>);</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">C</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i = <span class="title class_">Math</span>.<span class="title function_">floor</span>(e / <span class="number">16</span>)</span><br><span class="line">              , n = <span class="keyword">new</span> a;</span><br><span class="line">            <span class="title function_">w</span>(t.<span class="property">digits</span>, <span class="number">0</span>, n.<span class="property">digits</span>, i, n.<span class="property">digits</span>.<span class="property">length</span> - i);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> s = e % <span class="number">16</span>, o = <span class="number">16</span> - s, r = n.<span class="property">digits</span>.<span class="property">length</span> - <span class="number">1</span>, l = r - <span class="number">1</span>; r &gt; <span class="number">0</span>; --r,</span><br><span class="line">            --l)</span><br><span class="line">                n.<span class="property">digits</span>[r] = n.<span class="property">digits</span>[r] &lt;&lt; s &amp; <span class="number">65535</span> | (n.<span class="property">digits</span>[l] &amp; k[s]) &gt;&gt;&gt; o;</span><br><span class="line">            <span class="keyword">return</span> n.<span class="property">digits</span>[<span class="number">0</span>] = n.<span class="property">digits</span>[r] &lt;&lt; s &amp; <span class="number">65535</span>,</span><br><span class="line">            n.<span class="property">isNeg</span> = t.<span class="property">isNeg</span>,</span><br><span class="line">            n</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> x = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">0</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">15</span>,<span class="number">31</span>,<span class="number">63</span>,<span class="number">127</span>,<span class="number">255</span>,<span class="number">511</span>,<span class="number">1023</span>,<span class="number">2047</span>,<span class="number">4095</span>,<span class="number">8191</span>,<span class="number">16383</span>,<span class="number">32767</span>,<span class="number">65535</span>);</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">_</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i = <span class="title class_">Math</span>.<span class="title function_">floor</span>(e / <span class="number">16</span>)</span><br><span class="line">              , n = <span class="keyword">new</span> a;</span><br><span class="line">            <span class="title function_">w</span>(t.<span class="property">digits</span>, i, n.<span class="property">digits</span>, <span class="number">0</span>, t.<span class="property">digits</span>.<span class="property">length</span> - i);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> s = e % <span class="number">16</span>, o = <span class="number">16</span> - s, r = <span class="number">0</span>, l = r + <span class="number">1</span>; r &lt; n.<span class="property">digits</span>.<span class="property">length</span> - <span class="number">1</span>; ++r,</span><br><span class="line">            ++l)</span><br><span class="line">                n.<span class="property">digits</span>[r] = n.<span class="property">digits</span>[r] &gt;&gt;&gt; s | (n.<span class="property">digits</span>[l] &amp; x[s]) &lt;&lt; o;</span><br><span class="line">            <span class="keyword">return</span> n.<span class="property">digits</span>[n.<span class="property">digits</span>.<span class="property">length</span> - <span class="number">1</span>] &gt;&gt;&gt;= s,</span><br><span class="line">            n.<span class="property">isNeg</span> = t.<span class="property">isNeg</span>,</span><br><span class="line">            n</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">$</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i = <span class="keyword">new</span> a;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">w</span>(t.<span class="property">digits</span>, <span class="number">0</span>, i.<span class="property">digits</span>, e, i.<span class="property">digits</span>.<span class="property">length</span> - e),</span><br><span class="line">            i</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">S</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (t.<span class="property">isNeg</span> != e.<span class="property">isNeg</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span> - <span class="number">2</span> * <span class="title class_">Number</span>(t.<span class="property">isNeg</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = t.<span class="property">digits</span>.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i)</span><br><span class="line">                <span class="keyword">if</span> (t.<span class="property">digits</span>[i] != e.<span class="property">digits</span>[i])</span><br><span class="line">                    <span class="keyword">return</span> t.<span class="property">isNeg</span> ? <span class="number">1</span> - <span class="number">2</span> * <span class="title class_">Number</span>(t.<span class="property">digits</span>[i] &gt; e.<span class="property">digits</span>[i]) : <span class="number">1</span> - <span class="number">2</span> * <span class="title class_">Number</span>(t.<span class="property">digits</span>[i] &lt; e.<span class="property">digits</span>[i]);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">j</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i, n, o = <span class="title function_">y</span>(t), l = <span class="title function_">y</span>(e), c = e.<span class="property">isNeg</span>;</span><br><span class="line">            <span class="keyword">if</span> (o &lt; l)</span><br><span class="line">                <span class="keyword">return</span> t.<span class="property">isNeg</span> ? ((i = <span class="title function_">r</span>(s)).<span class="property">isNeg</span> = !e.<span class="property">isNeg</span>,</span><br><span class="line">                t.<span class="property">isNeg</span> = !<span class="number">1</span>,</span><br><span class="line">                e.<span class="property">isNeg</span> = !<span class="number">1</span>,</span><br><span class="line">                n = <span class="title function_">g</span>(e, t),</span><br><span class="line">                t.<span class="property">isNeg</span> = !<span class="number">0</span>,</span><br><span class="line">                e.<span class="property">isNeg</span> = c) : (i = <span class="keyword">new</span> a,</span><br><span class="line">                n = <span class="title function_">r</span>(t)),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Array</span>(i,n);</span><br><span class="line">            i = <span class="keyword">new</span> a,</span><br><span class="line">            n = t;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> u = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(l / <span class="number">16</span>) - <span class="number">1</span>, d = <span class="number">0</span>; e.<span class="property">digits</span>[u] &lt; <span class="number">32768</span>; )</span><br><span class="line">                e = <span class="title function_">C</span>(e, <span class="number">1</span>),</span><br><span class="line">                ++d,</span><br><span class="line">                ++l,</span><br><span class="line">                u = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(l / <span class="number">16</span>) - <span class="number">1</span>;</span><br><span class="line">            n = <span class="title function_">C</span>(n, d),</span><br><span class="line">            o += d;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(o / <span class="number">16</span>) - <span class="number">1</span>, h = $(e, p - u); -<span class="number">1</span> != <span class="title function_">S</span>(n, h); )</span><br><span class="line">                ++i.<span class="property">digits</span>[p - u],</span><br><span class="line">                n = <span class="title function_">g</span>(n, h);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> v = p; v &gt; u; --v) &#123;</span><br><span class="line">                <span class="keyword">var</span> w = v &gt;= n.<span class="property">digits</span>.<span class="property">length</span> ? <span class="number">0</span> : n.<span class="property">digits</span>[v]</span><br><span class="line">                  , k = v - <span class="number">1</span> &gt;= n.<span class="property">digits</span>.<span class="property">length</span> ? <span class="number">0</span> : n.<span class="property">digits</span>[v - <span class="number">1</span>]</span><br><span class="line">                  , x = v - <span class="number">2</span> &gt;= n.<span class="property">digits</span>.<span class="property">length</span> ? <span class="number">0</span> : n.<span class="property">digits</span>[v - <span class="number">2</span>]</span><br><span class="line">                  , j = u &gt;= e.<span class="property">digits</span>.<span class="property">length</span> ? <span class="number">0</span> : e.<span class="property">digits</span>[u]</span><br><span class="line">                  , A = u - <span class="number">1</span> &gt;= e.<span class="property">digits</span>.<span class="property">length</span> ? <span class="number">0</span> : e.<span class="property">digits</span>[u - <span class="number">1</span>];</span><br><span class="line">                i.<span class="property">digits</span>[v - u - <span class="number">1</span>] = w == j ? <span class="number">65535</span> : <span class="title class_">Math</span>.<span class="title function_">floor</span>((<span class="number">65536</span> * w + k) / j);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> T = i.<span class="property">digits</span>[v - u - <span class="number">1</span>] * (<span class="number">65536</span> * j + A), q = <span class="number">4294967296</span> * w + (<span class="number">65536</span> * k + x); T &gt; q; )</span><br><span class="line">                    --i.<span class="property">digits</span>[v - u - <span class="number">1</span>],</span><br><span class="line">                    T = i.<span class="property">digits</span>[v - u - <span class="number">1</span>] * (<span class="number">65536</span> * j | A),</span><br><span class="line">                    q = <span class="number">65536</span> * w * <span class="number">65536</span> + (<span class="number">65536</span> * k + x);</span><br><span class="line">                (n = <span class="title function_">g</span>(n, <span class="title function_">b</span>(h = $(e, v - u - <span class="number">1</span>), i.<span class="property">digits</span>[v - u - <span class="number">1</span>]))).<span class="property">isNeg</span> &amp;&amp; (n = <span class="title function_">f</span>(n, h),</span><br><span class="line">                --i.<span class="property">digits</span>[v - u - <span class="number">1</span>])</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> n = <span class="title function_">_</span>(n, d),</span><br><span class="line">            i.<span class="property">isNeg</span> = t.<span class="property">isNeg</span> != c,</span><br><span class="line">            t.<span class="property">isNeg</span> &amp;&amp; (i = c ? <span class="title function_">f</span>(i, s) : <span class="title function_">g</span>(i, s),</span><br><span class="line">            n = <span class="title function_">g</span>(e = <span class="title function_">_</span>(e, d), n)),</span><br><span class="line">            <span class="number">0</span> == n.<span class="property">digits</span>[<span class="number">0</span>] &amp;&amp; <span class="number">0</span> == <span class="title function_">m</span>(n) &amp;&amp; (n.<span class="property">isNeg</span> = !<span class="number">1</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Array</span>(i,n)</span><br><span class="line">        &#125;</span><br><span class="line">        e.<span class="property">setMaxDigits</span> = o,</span><br><span class="line">        e.<span class="property">biFromHex</span> = <span class="keyword">function</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="keyword">new</span> a, i = t.<span class="property">length</span>, n = <span class="number">0</span>; i &gt; <span class="number">0</span>; i -= <span class="number">4</span>,</span><br><span class="line">            ++n)</span><br><span class="line">                e.<span class="property">digits</span>[n] = <span class="title function_">h</span>(t.<span class="title function_">substr</span>(<span class="title class_">Math</span>.<span class="title function_">max</span>(i - <span class="number">4</span>, <span class="number">0</span>), <span class="title class_">Math</span>.<span class="title function_">min</span>(i, <span class="number">4</span>)));</span><br><span class="line">            <span class="keyword">return</span> e</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        e.<span class="property">biHighIndex</span> = m,</span><br><span class="line">        e.<span class="property">biCopy</span> = r,</span><br><span class="line">        e.<span class="property">BigInt</span> = a,</span><br><span class="line">        e.<span class="property">biDivide</span> = <span class="keyword">function</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">j</span>(t, e)[<span class="number">0</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        e.<span class="property">biMultiply</span> = v,</span><br><span class="line">        e.<span class="property">biDivideByRadixPower</span> = <span class="keyword">function</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i = <span class="keyword">new</span> a;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">w</span>(t.<span class="property">digits</span>, e, i.<span class="property">digits</span>, <span class="number">0</span>, i.<span class="property">digits</span>.<span class="property">length</span> - e),</span><br><span class="line">            i</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        e.<span class="property">biModuloByRadixPower</span> = <span class="keyword">function</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i = <span class="keyword">new</span> a;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">w</span>(t.<span class="property">digits</span>, <span class="number">0</span>, i.<span class="property">digits</span>, <span class="number">0</span>, e),</span><br><span class="line">            i</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        e.<span class="property">biSubtract</span> = g,</span><br><span class="line">        e.<span class="property">biCompare</span> = S,</span><br><span class="line">        e.<span class="property">biShiftRight</span> = _,</span><br><span class="line">        e.<span class="property">biToHex</span> = <span class="keyword">function</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> e = <span class="string">&quot;&quot;</span>, i = (<span class="title function_">m</span>(t),</span><br><span class="line">            <span class="title function_">m</span>(t)); i &gt; -<span class="number">1</span>; --i)</span><br><span class="line">                e += <span class="title function_">d</span>(t.<span class="property">digits</span>[i]);</span><br><span class="line">            <span class="keyword">return</span> e</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">        <span class="number">306</span>: <span class="keyword">function</span>(<span class="params">t, e, i</span>) &#123;</span><br><span class="line">        <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(e, <span class="string">&quot;__esModule&quot;</span>, &#123;</span><br><span class="line">            <span class="attr">value</span>: !<span class="number">0</span></span><br><span class="line">        &#125;),</span><br><span class="line">        e.<span class="property">BarrettMu_powMod</span> = e.<span class="property">BarrettMu_multiplyMod</span> = e.<span class="property">BarrettMu_modulo</span> = e.<span class="property">BarrettMu</span> = <span class="keyword">void</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">var</span> n = <span class="title function_">i</span>(<span class="number">228</span>);</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">s</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> e = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biDivideByRadixPower</span>)(t, <span class="variable language_">this</span>.<span class="property">k</span> - <span class="number">1</span>)</span><br><span class="line">              , i = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biMultiply</span>)(e, <span class="variable language_">this</span>.<span class="property">mu</span>)</span><br><span class="line">              , s = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biDivideByRadixPower</span>)(i, <span class="variable language_">this</span>.<span class="property">k</span> + <span class="number">1</span>)</span><br><span class="line">              , o = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biModuloByRadixPower</span>)(t, <span class="variable language_">this</span>.<span class="property">k</span> + <span class="number">1</span>)</span><br><span class="line">              , a = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biMultiply</span>)(s, <span class="variable language_">this</span>.<span class="property">modulus</span>)</span><br><span class="line">              , r = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biModuloByRadixPower</span>)(a, <span class="variable language_">this</span>.<span class="property">k</span> + <span class="number">1</span>)</span><br><span class="line">              , l = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biSubtract</span>)(o, r);</span><br><span class="line">            l.<span class="property">isNeg</span> &amp;&amp; (l = <span class="title function_">biAdd</span>(l, <span class="variable language_">this</span>.<span class="property">bkplus1</span>));</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> c = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biCompare</span>)(l, <span class="variable language_">this</span>.<span class="property">modulus</span>) &gt;= <span class="number">0</span>; c; )</span><br><span class="line">                l = (<span class="number">0</span>,</span><br><span class="line">                n.<span class="property">biSubtract</span>)(l, <span class="variable language_">this</span>.<span class="property">modulus</span>),</span><br><span class="line">                c = (<span class="number">0</span>,</span><br><span class="line">                n.<span class="property">biCompare</span>)(l, <span class="variable language_">this</span>.<span class="property">modulus</span>) &gt;= <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> l</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">o</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biMultiply</span>)(t, e);</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">modulo</span>(i)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">t, e</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> i = <span class="keyword">new</span> n.<span class="property">BigInt</span>;</span><br><span class="line">            i.<span class="property">digits</span>[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> s = t, o = e; <span class="number">0</span> != (<span class="number">1</span> &amp; o.<span class="property">digits</span>[<span class="number">0</span>]) &amp;&amp; (i = <span class="variable language_">this</span>.<span class="title function_">multiplyMod</span>(i, s)),</span><br><span class="line">            <span class="number">0</span> != (o = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biShiftRight</span>)(o, <span class="number">1</span>)).<span class="property">digits</span>[<span class="number">0</span>] || <span class="number">0</span> != (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biHighIndex</span>)(o); )</span><br><span class="line">                s = <span class="variable language_">this</span>.<span class="title function_">multiplyMod</span>(s, s);</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line">        &#125;</span><br><span class="line">        e.<span class="property">BarrettMu</span> = <span class="keyword">function</span>(<span class="params">t</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">modulus</span> = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biCopy</span>)(t),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">k</span> = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biHighIndex</span>)(<span class="variable language_">this</span>.<span class="property">modulus</span>) + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">var</span> e = <span class="keyword">new</span> n.<span class="property">BigInt</span>;</span><br><span class="line">            e.<span class="property">digits</span>[<span class="number">2</span> * <span class="variable language_">this</span>.<span class="property">k</span>] = <span class="number">1</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">mu</span> = (<span class="number">0</span>,</span><br><span class="line">            n.<span class="property">biDivide</span>)(e, <span class="variable language_">this</span>.<span class="property">modulus</span>),</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">bkplus1</span> = <span class="keyword">new</span> n.<span class="property">BigInt</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">bkplus1</span>.<span class="property">digits</span>[<span class="variable language_">this</span>.<span class="property">k</span> + <span class="number">1</span>] = <span class="number">1</span>,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">modulo</span> = s,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">multiplyMod</span> = o,</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">powMod</span> = a</span><br><span class="line">        &#125;</span><br><span class="line">        ,</span><br><span class="line">        e.<span class="property">BarrettMu_modulo</span> = s,</span><br><span class="line">        e.<span class="property">BarrettMu_multiplyMod</span> = o,</span><br><span class="line">        e.<span class="property">BarrettMu_powMod</span> = a</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">_xx</span>(<span class="number">305</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">get_pwd</span>(<span class="params">pwd</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="title function_">_xx</span>(<span class="number">228</span>);</span><br><span class="line">     (<span class="number">0</span>, a.<span class="property">setMaxDigits</span>) (<span class="number">129</span>);</span><br><span class="line">    <span class="keyword">var</span> r = <span class="title function_">_xx</span>(<span class="number">305</span>);</span><br><span class="line">   <span class="keyword">var</span> n = <span class="keyword">new</span> r.<span class="title class_">RSAKeyPair</span>(<span class="string">&quot;10001&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;BC087C7C00848CE8A349C9072C3229E0D595F817EDDE9ABF6FC72B41942A759E97956CE9CB7D1F2E99399EADBACC0531F16EAE8EFCB68553DE0E125B2231ED955ADBF5208E65DC804237C93EB23C83E7ECDA0B586ECF31839038EE6B640E0EEC5FF17D219FDEA33E730F287F0D384C74A53DFE1F91ACC63C7C92039A43AC6E97&quot;</span>);</span><br><span class="line">   <span class="keyword">var</span> s = (<span class="number">0</span>, r.<span class="property">encryptedString</span>)(n, pwd);</span><br><span class="line">     <span class="keyword">return</span> s</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">get_pwd</span>(<span class="string">&#x27;123456&#x27;</span>));</span><br></pre></td></tr></table></figure>
<h3 id="3-webpackæ•™å­¦">3. <code>webpack</code>æ•™å­¦</h3>
<h4 id="3-1-é€†å‘ç›®æ ‡">3.1 é€†å‘ç›®æ ‡</h4>
<ul>
<li>åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://static.waitwaitpay.com/web/sd_se/index.html">https://static.waitwaitpay.com/web/sd_se/index.html</a></li>
<li>æ¥å£ï¼š<a target="_blank" rel="noopener" href="https://api.waitwaitpay.com/api/vendors/nearby">https://api.waitwaitpay.com/api/vendors/nearby</a></li>
<li>ç›®æ ‡ï¼šå“åº”æ•°æ®<code>ZmQzOTI0MjBlNnic7VvJcuM4Ev0aHqXADuRRtKWIPnT0uU8KEABtdWkbLVXj</code></li>
</ul>
<h4 id="3-2-é€†å‘åˆ†æ">3.2 é€†å‘åˆ†æ</h4>
<p>æ‰“å¼€ç›®æ ‡ç½‘ç«™ï¼Œå¾€ä¸‹æ‹‰ï¼Œåœ¨å¼€å‘è€…å·¥å…·å¯ä»¥æŠ“åˆ°è¿™ä¸‰ä¸ªåŒ…ï¼Œå…¶ä¸­nearbyæ¥å£è¯·æ±‚åˆ°çš„æ•°æ®æ˜¯åŠ å¯†ä¹‹åçš„å¯†æ–‡</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282024893.png" alt="image-20220329140603995"></p>
<h5 id="3-2-1-å…³é”®å­—æœç´¢">3.2.1 å…³é”®å­—æœç´¢</h5>
<p>è¿™ä¸ªæ—¶å€™å¯ä»¥å°è¯•å†åœ¨è¯¥æ–‡ä»¶é‡Œæœç´¢ JSON.parse( ï¼Œå°±ä¼šæ‰¾åˆ°è¿™æ ·ä¸€ä¸ªåœ°æ–¹ï¼Œè¿™é‡Œå¯ä»¥å‘ç°æœ‰ä¸€ä¸ªdecodeå‡½æ•°ï¼Œå°±æ¯”è¾ƒå¯ç–‘ï¼Œä¸‹ä¸ªæ–­ç‚¹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282024674.png" alt="image-20220329141945204"></p>
<p><strong>æ•°æ®å¤„ç†</strong></p>
<p>å¾€ä¸Šçœ‹å †æ ˆï¼Œå¯ä»¥å‘ç°è¯¥å‡½æ•°å°±æ˜¯è§£å¯†çš„å…¥å£ï¼Œè®²è¯·æ±‚å¾—åˆ°çš„åŠ å¯†æ•°æ®eä¼ åˆ°få‡½æ•°ï¼Œå³å¯è§£å¯†å¾—åˆ°æ˜æ–‡æ•°æ®</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282024559.png" alt="image-20220329142942404"></p>
<p>å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°è¿™ä¸ªfå‡½æ•°å†…éƒ¨å…³é”®è°ƒç”¨äº†è¿™ä¸¤ä¸ªå‡½æ•°æ¥è¿›è¡Œæ•°æ®çš„è§£å¯†ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬é¦–å…ˆå°±æ¥çœ‹çœ‹è¿™ä¸ª a.default.decode ï¼Œå‘ä¸Šå¯»æ‰¾aæ˜¯åœ¨å“ªé‡Œè¢«å®šä¹‰çš„</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282024739.png" alt="image-20220329150156127"></p>
<p>å¯å‘ç° a = s(n(432))ï¼Œè¿™é‡Œçš„432å°±æ˜¯ä»£è¡¨å¯¼å‡ºwebpackæ‰“åŒ…çš„å¤§æ•°ç»„é‡Œé¢ç¬¬432ä¸ªå¤§å‡½æ•°ï¼Œå¤§æ•°ç»„æŒ‡çš„æ˜¯è¿™ä¸ªå¤§æ•°ç»„</p>
<h5 id="3-2-2-JavaScriptåˆ†æ">3.2.2 JavaScriptåˆ†æ</h5>
<p>â€‹		é‚£æˆ‘ä»¬åœ¨æœ¬åœ°jsé‡Œé¢ï¼Œæ€ä¹ˆæ‰èƒ½å®ç°åƒæµè§ˆå™¨è¿™æ ·å¯¼å‡ºå‘¢ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥å»æ‰¾åˆ° <strong>å¯¼å‡ºå™¨</strong> ç±»ä¼¼äº <strong>exports</strong> è¿™æ ·çš„å…³é”®å­—ï¼Œæ‰€æœ‰çš„ <strong>webpack</strong> å¯¼å‡ºå™¨éƒ½æ˜¯é•¿è¿™æ ·çš„</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282024560.png" alt="image-20220329150257570"></p>
<ul>
<li>
<p>ç›´æ¥å¤åˆ¶å…¨éƒ¨çš„ä»£ç ï¼Œä¹‹å‰å·²ç»å‘ç°å¤„ç†è§£å¯†çš„è¯åªæœ‰<code>f</code>å‡½æ•°ï¼Œè§‚å¯Ÿæ•´ä¸ªå‡½æ•°è°ƒç”¨ç¬¬ä¸‰æ–¹åº“å¾ˆå°‘ï¼Œé‚£ä¹ˆå°±å¯ä»¥å…¨å¤åˆ¶ä»£ç ï¼Œç„¶åè°ƒç”¨è¿™ä¸ªå‡½æ•°å³å¯ã€‚</p>
</li>
<li>
<p>ç›´æ¥æ‰£å‡ºåŠ å¯†ä»£ç ï¼Œè°ƒç”¨å½“å‰è¿™ä¸ªå‡½æ•°</p>
<ul>
<li>
<p>æœ¬åœ°çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™æ ·æ¥è¿›è¡Œå¯¼å‡ºç„¶åèµ‹å€¼ç»™aè¿˜æœ‰o</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">s</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> e &amp;&amp; e.<span class="property">__esModule</span> ? e : &#123;</span><br><span class="line">        <span class="attr">default</span>: e</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// è¿™é‡Œçš„window.xiaoxiaobaiå°±æ˜¯ä¸Šé¢å¯¼å‡ºå™¨å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="title function_">s</span>(<span class="variable language_">window</span>.<span class="title function_">xl</span>(<span class="number">432</span>));</span><br><span class="line"><span class="keyword">var</span> o = <span class="title function_">s</span>(<span class="variable language_">window</span>.<span class="title function_">xl</span>(<span class="number">423</span>));</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282024161.png" alt="image-20220821214608114"></p>
</li>
</ul>
</li>
</ul>
<h4 id="3-3-ä»£ç å¤„ç†">3.3 ä»£ç å¤„ç†</h4>
<ul>
<li>ä»£ç æ¯”è¾ƒå¤šã€‚6wå¤šè¡Œï¼ï¼å°±ä¸å¤åˆ¶åœ¨è¿™å„¿äº†ï¼Œæœ‰éœ€è¦çš„ä¸Šç™¾åº¦ç½‘ç›˜ä¸‹è½½</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é“¾æ¥ï¼šhttps:<span class="regexp">//</span>pan.baidu.com<span class="regexp">/s/</span><span class="number">1</span>bkTFBs0oehozi32b6btaqQ </span><br><span class="line">æå–ç ï¼šm57l</span><br></pre></td></tr></table></figure>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<ul>
<li>æ‰¾åˆ°è¿™ä¸ªåŠ è½½å™¨</li>
<li>æ‰¾åˆ°è°ƒç”¨æ¨¡å—</li>
<li>æ„é€ ä¸€ä¸ªè‡ªæ‰§è¡Œæ–¹æ³•</li>
<li>å¯¼å‡ºåŠ å¯†æ–¹æ³•</li>
<li>ç¼–å†™è‡ªå®šä¹‰æ–¹æ³• æŒ‰ç…§æµç¨‹åŠ å¯†</li>
</ul>
<h2 id="RPC-æŠ€æœ¯">RPC æŠ€æœ¯</h2>
<p>RPCï¼Œè‹±æ–‡ RangPaCongï¼Œä¸­æ–‡è®©çˆ¬è™«ï¼Œæ—¨åœ¨ä¸ºçˆ¬è™«å¼€è·¯ï¼Œç§’æ€ä¸€åˆ‡ï¼Œè®©çˆ¬è™«ç•…é€šæ— é˜»ï¼<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282025041.png" alt="å›¾ç‰‡"></p>
<h3 id="1-JSRPC-ç®€ä»‹">1. JSRPC ç®€ä»‹</h3>
<p>â€‹		<strong>RPC</strong> æŠ€æœ¯æ˜¯éå¸¸å¤æ‚çš„ï¼Œå¯¹äºæˆ‘ä»¬æçˆ¬è™«ã€é€†å‘çš„æ¥è¯´ï¼Œä¸éœ€è¦å®Œå…¨äº†è§£ï¼Œåªéœ€è¦çŸ¥é“è¿™é¡¹æŠ€æœ¯å¦‚ä½•åœ¨é€†å‘ä¸­åº”ç”¨å°±è¡Œäº†ã€‚</p>
<p>RPC åœ¨é€†å‘ä¸­ï¼Œç®€å•æ¥è¯´å°±æ˜¯å°†æœ¬åœ°å’Œæµè§ˆå™¨ï¼Œçœ‹åšæ˜¯æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼ŒäºŒè€…ä¹‹é—´é€šè¿‡ <code>WebSocket</code> åè®®è¿›è¡Œ <code>RPC</code> é€šä¿¡ï¼Œåœ¨æµè§ˆå™¨ä¸­å°†åŠ å¯†å‡½æ•°æš´éœ²å‡ºæ¥ï¼Œåœ¨æœ¬åœ°ç›´æ¥è°ƒç”¨æµè§ˆå™¨ä¸­å¯¹åº”çš„åŠ å¯†å‡½æ•°ï¼Œä»è€Œå¾—åˆ°åŠ å¯†ç»“æœï¼Œä¸å¿…å»åœ¨æ„å‡½æ•°å…·ä½“çš„æ‰§è¡Œé€»è¾‘ï¼Œä¹Ÿçœå»äº†æ‰£ä»£ç ã€è¡¥ç¯å¢ƒç­‰æ“ä½œï¼Œå¯ä»¥çœå»å¤§é‡çš„é€†å‘è°ƒè¯•æ—¶é—´ã€‚</p>
<h3 id="2-Sekiro-RPC">2. Sekiro-RPC</h3>
<h4 id="2-1-ské£Ÿç”¨æ–¹å¼">2.1 ské£Ÿç”¨æ–¹å¼</h4>
<h5 id="2-1-0-ç½‘ç›˜åœ°å€">2.1.0 ç½‘ç›˜åœ°å€</h5>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é“¾æ¥ï¼šhttps:<span class="regexp">//</span>pan.baidu.com<span class="regexp">/s/</span><span class="number">1</span>wJESOx24r3m7As6NfKfRaA </span><br><span class="line">æå–ç ï¼š<span class="number">1234</span></span><br></pre></td></tr></table></figure>
<h5 id="2-1-1-æ‰§è¡Œæ–¹å¼">2.1.1 æ‰§è¡Œæ–¹å¼</h5>
<p>åœ¨æœ¬åœ°å¼€å¯æœåŠ¡ç«¯</p>
<ul>
<li>
<p>éœ€è¦æœ‰ Java ç¯å¢ƒï¼Œé…ç½®å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_62959684/article/details/122469086">https://blog.csdn.net/qq_62959684/article/details/122469086</a></p>
<ul>
<li>JDKè¿œç¨‹åœ°å€ï¼šé“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1qWutQEJ7315exPqQzNLspA">https://pan.baidu.com/s/1qWutQEJ7315exPqQzNLspA</a>  æå–ç ï¼švhfg</li>
</ul>
</li>
<li>
<p>Linux &amp; Macï¼š<code>bin/sekiro.sh</code></p>
</li>
<li>
<p>Windowsï¼š<code>bin/sekiro.bat</code></p>
</li>
</ul>
<h5 id="2-2-2-å®¢æˆ·ç«¯ç¯å¢ƒ">2.2.2 å®¢æˆ·ç«¯ç¯å¢ƒ</h5>
<ul>
<li>åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://sekiro.virjar.com/sekiro-doc/assets/sekiro_web_client.js">https://sekiro.virjar.com/sekiro-doc/assets/sekiro_web_client.js</a></li>
</ul>
<h5 id="2-2-3-å‚æ•°è¯´æ˜">2.2.3 å‚æ•°è¯´æ˜</h5>
<ul>
<li>ä½¿ç”¨åŸç†ï¼šå®¢æˆ·ç«¯æ³¨å…¥åˆ°æµè§ˆå™¨ç¯å¢ƒï¼Œç„¶åé€šè¿‡<code>SekiroClient</code>å’Œ <code>Sekiro </code>æœåŠ¡å™¨é€šä¿¡ï¼Œå³å¯ç›´æ¥ <code>RPC</code> è°ƒç”¨æµè§ˆå™¨å†…éƒ¨æ–¹æ³•ï¼Œå®˜æ–¹æä¾›çš„<code> SekiroClient</code> ä»£ç æ ·ä¾‹å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”Ÿæˆå”¯ä¸€æ ‡è®°uuidç¼–å·</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">guid</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">S4</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (((<span class="number">1</span>+<span class="title class_">Math</span>.<span class="title function_">random</span>())*<span class="number">0x10000</span>)|<span class="number">0</span>).<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">substring</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="title function_">S4</span>()+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="title function_">S4</span>()+<span class="title function_">S4</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿æ¥æœåŠ¡ç«¯</span></span><br><span class="line"><span class="keyword">var</span> client = <span class="keyword">new</span> <span class="title class_">SekiroClient</span>(<span class="string">&quot;ws://127.0.0.1:5620/business-demo/register?group=ws-group&amp;clientId=&quot;</span>+<span class="title function_">guid</span>());</span><br><span class="line"><span class="comment">// ä¸šåŠ¡æ¥å£ </span></span><br><span class="line">client.<span class="title function_">registerAction</span>(<span class="string">&quot;ç™»é™†&quot;</span>,<span class="keyword">function</span>(<span class="params">request, resolve, reject</span>)&#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;&quot;</span>+<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><strong>group</strong>ï¼šä¸šåŠ¡ç±»å‹ï¼ˆæ¥å£ç»„ï¼‰ï¼Œæ¯ä¸ªä¸šåŠ¡ä¸€ä¸ª <code>group</code>ï¼Œ<code>group</code> ä¸‹é¢å¯ä»¥æ³¨å†Œå¤šä¸ªç»ˆç«¯ï¼ˆ<code>SekiroClient</code>ï¼‰ï¼ŒåŒæ—¶<code>group</code> å¯ä»¥æŒ‚è½½å¤šä¸ª <code>Action</code>ï¼›</p>
</li>
<li>
<p><strong>clientId</strong>ï¼šæŒ‡ä»£è®¾å¤‡ï¼Œå¤šä¸ªè®¾å¤‡ä½¿ç”¨å¤šä¸ªæœºå™¨æä¾› <code>API</code> æœåŠ¡ï¼Œæä¾›ç¾¤æ§èƒ½åŠ›å’Œè´Ÿè½½å‡è¡¡èƒ½åŠ›ï¼›</p>
</li>
<li>
<p><strong>SekiroClient</strong>ï¼šæœåŠ¡æä¾›è€…å®¢æˆ·ç«¯ï¼Œä¸»è¦åœºæ™¯ä¸ºæ‰‹æœº/æµè§ˆå™¨ç­‰ã€‚æœ€ç»ˆçš„ <code>Sekiro</code> è°ƒç”¨ä¼šè½¬å‘åˆ° <code>SekiroClient</code>ã€‚æ¯ä¸ª<code> client</code> éœ€è¦æœ‰ä¸€ä¸ªæƒŸä¸€çš„ <code>clientId</code>ï¼›</p>
</li>
<li>
<p><strong>registerAction</strong>ï¼šæ¥å£ï¼ŒåŒä¸€ä¸ª <code>group</code> ä¸‹é¢å¯ä»¥æœ‰å¤šä¸ªæ¥å£ï¼Œåˆ†åˆ«åšä¸åŒçš„åŠŸèƒ½ï¼›</p>
</li>
<li>
<p><strong>resolve</strong>ï¼šå°†å†…å®¹ä¼ å›ç»™å®¢æˆ·ç«¯çš„æ–¹æ³•ï¼›</p>
</li>
<li>
<p><strong>request</strong>ï¼šæœåŠ¡ç«¯ä¼ è¿‡æ¥çš„è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚é‡Œæœ‰å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥ä»¥é”®å€¼å¯¹çš„æ–¹å¼ä»é‡Œé¢æå–å‚æ•°ç„¶åå†åšå¤„ç†ã€‚</p>
</li>
</ul>
<h4 id="2-2-æµ‹è¯•ä½¿ç”¨">2.2 æµ‹è¯•ä½¿ç”¨</h4>
<h5 id="2-2-1-1æ–°å»ºHTMLé¡µé¢">2.2.1 1æ–°å»ºHTMLé¡µé¢</h5>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://file.virjar.com/sekiro_web_client.js?_=123&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">guid</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">function</span> <span class="title function_">S4</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="keyword">return</span> (((<span class="number">1</span>+<span class="title class_">Math</span>.<span class="title function_">random</span>())*<span class="number">0x10000</span>)|<span class="number">0</span>).<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">substring</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> (<span class="title function_">S4</span>()+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="title function_">S4</span>()+<span class="title function_">S4</span>());</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> client = <span class="keyword">new</span> <span class="title class_">SekiroClient</span>(<span class="string">&quot;ws://127.0.0.1:5620/business-demo/register?group=rpc-test&amp;clientId=&quot;</span> + <span class="title function_">guid</span>());</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">        client.<span class="title function_">registerAction</span>(<span class="string">&quot;clientTime&quot;</span>,<span class="keyword">function</span>(<span class="params">request, resolve,reject </span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">resolve</span>(<span class="string">&quot;&quot;</span>+<span class="keyword">new</span> <span class="title class_">Date</span>());</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-2-2-SK-API">2.2.2 SK API</h5>
<p><code>Sekiro</code> ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº› API</p>
<ul>
<li>
<p>æŸ¥çœ‹åˆ†ç»„åˆ—è¡¨ï¼š<a target="_blank" rel="noopener" href="http://127.0.0.1:5620/business-demo/groupList">http://127.0.0.1:5620/business-demo/groupList</a></p>
</li>
<li>
<p>æŸ¥çœ‹é˜Ÿåˆ—çŠ¶æ€ï¼š<a target="_blank" rel="noopener" href="http://127.0.0.1:5620/business-demo/clientQueue?group=test">http://127.0.0.1:5620/business-demo/clientQueue?group=test</a></p>
</li>
<li>
<p>è°ƒç”¨è½¬å‘ï¼š<a target="_blank" rel="noopener" href="http://127.0.0.1:5620/business-demo/invoke?group=test&amp;action=test&amp;param=testparm">http://127.0.0.1:5620/business-demo/invoke?group=test&amp;action=test&amp;param=testparm</a></p>
</li>
</ul>
<h5 id="2-2-3-pythonä»£ç è°ƒè¯•">2.2.3 pythonä»£ç è°ƒè¯•</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">@author: å¤æ´›</span></span><br><span class="line"><span class="string">@QQ: 1972386194</span></span><br><span class="line"><span class="string">@file: æµ‹è¯•.py</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">data = &#123;<span class="string">&quot;group&quot;</span>: <span class="string">&quot;rpc-test&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;clientTime&quot;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">res = requests.get(<span class="string">&quot;http://127.0.0.1:5620/business-demo/invoke&quot;</span>,params=data )</span><br><span class="line"><span class="built_in">print</span>(res.text)</span><br></pre></td></tr></table></figure>
<h4 id="2-3-æ§åˆ¶å°æ³¨å…¥">2.3 æ§åˆ¶å°æ³¨å…¥</h4>
<h5 id="2-3-0-é€†å‘ç›®æ ‡">2.3.0 é€†å‘ç›®æ ‡</h5>
<ul>
<li>
<p>åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://q.10jqka.com.cn/">http://q.10jqka.com.cn/</a></p>
</li>
<li>
<p>æ¥å£ï¼š<a target="_blank" rel="noopener" href="http://q.10jqka.com.cn/index/index/board/all/field/zdf/order/desc/page/2/ajax/1/">http://q.10jqka.com.cn/index/index/board/all/field/zdf/order/desc/page/2/ajax/1/</a></p>
</li>
<li>
<p>å¯¹æŠ—ï¼š<code>cookie</code>åçˆ¬è™«å¤„ç†ï¼Œå…³é”®å­—<code>v</code></p>
</li>
</ul>
<h5 id="2-3-1-æ‰¾åˆ°å…³é”®ç‚¹">2.3.1 æ‰¾åˆ°å…³é”®ç‚¹</h5>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">document</span>, <span class="string">&#x27;cookie&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">val</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (val.<span class="title function_">indexOf</span>(<span class="string">&#x27;v&#x27;</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">debugger</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hookæ•è·åˆ°cookieè®¾ç½®-&gt;&#x27;</span>, val);</span><br><span class="line">      <span class="keyword">return</span> val;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>æ‰¾åˆ°å…³é”®ä½ç½®ï¼Œç„¶åå¯¼å‡ºç”ŸæˆcookieåŠ è½½çš„å‡½æ•°</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:/Users/XL/AppData/Roaming/Typora/typora-user-images/image-20220829154301457.png" alt="image-20220829154301457"></p>
<h5 id="2-3-2-åœ¨æ§åˆ¶å°æ³¨å…¥">2.3.2 åœ¨æ§åˆ¶å°æ³¨å…¥</h5>
<ul>
<li>åœ¨æ§åˆ¶å°æ³¨å…¥å®¢æˆ·ç«¯RPCè¿æ¥æœåŠ¡å™¨</li>
</ul>
<p>**æ³¨ï¼š**éœ€è¦å…³é—­debugger</p>
<h5 id="2-3-3-è¿æ¥æœåŠ¡å™¨å¹¶è½¬å‘">2.3.3 è¿æ¥æœåŠ¡å™¨å¹¶è½¬å‘</h5>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">guid</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">S4</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> (((<span class="number">1</span>+<span class="title class_">Math</span>.<span class="title function_">random</span>())*<span class="number">0x10000</span>)|<span class="number">0</span>).<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">substring</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (<span class="title function_">S4</span>()+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="string">&quot;-&quot;</span>+<span class="title function_">S4</span>()+<span class="title function_">S4</span>()+<span class="title function_">S4</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> client = <span class="keyword">new</span> <span class="title class_">SekiroClient</span>(<span class="string">&quot;ws://127.0.0.1:5620/business-demo/register?group=rpc-test&amp;clientId=&quot;</span> + <span class="title function_">guid</span>());</span><br><span class="line"></span><br><span class="line">client.<span class="title function_">registerAction</span>(<span class="string">&quot;ths&quot;</span>,<span class="keyword">function</span>(<span class="params">request, resolve,reject </span>)&#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="title function_">sss</span>());</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282026640.png" alt="image-20220829154631871"></p>
<h4 id="2-4-æ²¹çŒ´æ³¨å…¥å½¢å¼">2.4 æ²¹çŒ´æ³¨å…¥å½¢å¼</h4>
<h5 id="2-4-1-æ²¹çŒ´å·¥å…·ä»‹ç»">2.4.1 æ²¹çŒ´å·¥å…·ä»‹ç»</h5>
<p><a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https%3A%2F%2Ftampermonkey.net%2F">Tampermonkey</a>æ˜¯ä¸€æ¬¾å…è´¹çš„æµè§ˆå™¨æ‰©å±•å’Œæœ€ä¸ºæµè¡Œçš„ç”¨æˆ·è„šæœ¬ç®¡ç†å™¨ï¼Œå®ƒé€‚ç”¨äº Chrome, Microsoft Edge, Safari, Opera Next, å’Œ Firefoxã€‚<br>
ä»¥ä¸Šæ˜¯æ²¹çŒ´å®˜ç½‘ç»™å‡ºçš„ä»‹ç»ã€‚å®ƒå¯ä»¥è®©ç”¨æˆ·è‡ªè¡Œåœ¨æ·»åŠ è„šæœ¬ï¼Œå¹¶åœ¨å¼€å¯å¯¹åº”é¡µé¢æ—¶åº”ç”¨ã€‚å¦‚æœä½ äº†è§£&quot;<strong>è„šæœ¬æ³¨å…¥</strong>&quot;ï¼Œä½ å¯ä»¥æŠŠå®ƒè®¤ä¸ºæ˜¯ä¸€ä¸ªç»™è‡ªå·±æ³¨å…¥è„šæœ¬çš„ä¸€ä¸ªå·¥å…·ã€‚</p>
<p><strong>ç”¨æˆ·æ²¹çŒ´è„šæœ¬</strong>ï¼š<a target="_blank" rel="noopener" href="https://greasyfork.org/zh-CN/scripts">https://greasyfork.org/zh-CN/scripts</a></p>
<p>â€¦ å¤§å®¶å¯ä»¥è‡ªè¡Œå¨±ä¹å¨±ä¹ï¼Œ æ¯”å¦‚è¯´å•ŠVIPç”µå½±å…è´¹ç ´è§£</p>
<table>
<thead>
<tr>
<th style="text-align:left">é€‰é¡¹</th>
<th style="text-align:left">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">@name</td>
<td style="text-align:left">è„šæœ¬çš„åç§°</td>
</tr>
<tr>
<td style="text-align:left">@namespace</td>
<td style="text-align:left">å‘½åç©ºé—´ï¼Œç”¨æ¥åŒºåˆ†ç›¸åŒåç§°çš„è„šæœ¬ï¼Œä¸€èˆ¬å†™ä½œè€…åå­—æˆ–è€…ç½‘å€å°±å¯ä»¥</td>
</tr>
<tr>
<td style="text-align:left">@version</td>
<td style="text-align:left">è„šæœ¬ç‰ˆæœ¬ï¼Œæ²¹çŒ´è„šæœ¬çš„æ›´æ–°ä¼šè¯»å–è¿™ä¸ªç‰ˆæœ¬å·</td>
</tr>
<tr>
<td style="text-align:left">@description</td>
<td style="text-align:left">æè¿°è¿™ä¸ªè„šæœ¬æ˜¯å¹²ä»€ä¹ˆç”¨çš„</td>
</tr>
<tr>
<td style="text-align:left">@author</td>
<td style="text-align:left">ç¼–å†™è¿™ä¸ªè„šæœ¬çš„ä½œè€…çš„åå­—</td>
</tr>
<tr>
<td style="text-align:left"><strong>@match</strong></td>
<td style="text-align:left">ä»å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œåªæœ‰åŒ¹é…çš„ç½‘å€æ‰ä¼šæ‰§è¡Œå¯¹åº”çš„è„šæœ¬ï¼Œä¾‹å¦‚ <code>*</code> åŒ¹é…æ‰€æœ‰ï¼Œ<code>https://www.baidu.com/*</code> åŒ¹é…ç™¾åº¦ç­‰ï¼Œå¯ä»¥å‚è€ƒ Python re æ¨¡å—é‡Œé¢çš„ <code>re.match()</code> æ–¹æ³•ï¼Œå…è®¸å¤šä¸ªå®ä¾‹</td>
</tr>
<tr>
<td style="text-align:left"><strong>@include</strong></td>
<td style="text-align:left">å’Œ @match ç±»ä¼¼ï¼Œåªæœ‰åŒ¹é…çš„ç½‘å€æ‰ä¼šæ‰§è¡Œå¯¹åº”çš„è„šæœ¬ï¼Œä½†æ˜¯ @include ä¸ä¼šä»å­—ç¬¦ä¸²èµ·å§‹ä½ç½®åŒ¹é…ï¼Œä¾‹å¦‚ <code>*://*baidu.com/*</code> åŒ¹é…ç™¾åº¦ï¼Œå…·ä½“åŒºåˆ«å¯ä»¥å‚è€ƒ <strong>TamperMonkey å®˜æ–¹æ–‡æ¡£</strong>[8]</td>
</tr>
<tr>
<td style="text-align:left">@icon</td>
<td style="text-align:left">è„šæœ¬çš„ icon å›¾æ ‡</td>
</tr>
<tr>
<td style="text-align:left">@grant</td>
<td style="text-align:left">æŒ‡å®šè„šæœ¬è¿è¡Œæ‰€éœ€æƒé™ï¼Œå¦‚æœè„šæœ¬æ‹¥æœ‰ç›¸åº”çš„æƒé™ï¼Œå°±å¯ä»¥è°ƒç”¨æ²¹çŒ´æ‰©å±•æä¾›çš„ API ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’ã€‚å¦‚æœè®¾ç½®ä¸º none çš„è¯ï¼Œåˆ™ä¸ä½¿ç”¨æ²™ç®±ç¯å¢ƒï¼Œè„šæœ¬ä¼šç›´æ¥è¿è¡Œåœ¨ç½‘é¡µçš„ç¯å¢ƒä¸­ï¼Œè¿™æ—¶å€™æ— æ³•ä½¿ç”¨å¤§éƒ¨åˆ†æ²¹çŒ´æ‰©å±•çš„ APIã€‚å¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œæ²¹çŒ´ä¼šé»˜è®¤æ·»åŠ å‡ ä¸ªæœ€å¸¸ç”¨çš„ API</td>
</tr>
<tr>
<td style="text-align:left">@require</td>
<td style="text-align:left">å¦‚æœè„šæœ¬ä¾èµ–å…¶ä»– JS åº“çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ require æŒ‡ä»¤å¯¼å…¥ï¼Œåœ¨è¿è¡Œè„šæœ¬ä¹‹å‰å…ˆåŠ è½½å…¶å®ƒåº“</td>
</tr>
<tr>
<td style="text-align:left"><strong>@run-at</strong></td>
<td style="text-align:left">è„šæœ¬æ³¨å…¥æ—¶æœºï¼Œè¯¥é€‰é¡¹æ˜¯èƒ½ä¸èƒ½ hook åˆ°çš„å…³é”®ï¼Œæœ‰äº”ä¸ªå€¼å¯é€‰ï¼š<code>document-start</code>ï¼šç½‘é¡µå¼€å§‹æ—¶ï¼›<code>document-body</code>ï¼šbodyå‡ºç°æ—¶ï¼›<code>document-end</code>ï¼šè½½å…¥æ—¶æˆ–è€…ä¹‹åæ‰§è¡Œï¼›<code>document-idle</code>ï¼šè½½å…¥å®Œæˆåæ‰§è¡Œï¼Œé»˜è®¤é€‰é¡¹ï¼›<code>context-menu</code>ï¼šåœ¨æµè§ˆå™¨ä¸Šä¸‹æ–‡èœå•ä¸­å•å‡»è¯¥è„šæœ¬æ—¶ï¼Œä¸€èˆ¬å°†å…¶è®¾ç½®ä¸º <code>document-start</code></td>
</tr>
</tbody>
</table>
<h5 id="2-4-2-ç¼–å†™æ²¹çŒ´æ³¨å…¥">2.4.2 ç¼–å†™æ²¹çŒ´æ³¨å…¥</h5>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         toutiao</span></span><br><span class="line"><span class="comment">// @namespace    https://www.toutiao.com/</span></span><br><span class="line"><span class="comment">// @version      0.1</span></span><br><span class="line"><span class="comment">// @description  toutiao hook</span></span><br><span class="line"><span class="comment">// @author       xialuo</span></span><br><span class="line"><span class="comment">// @match        https://www.toutiao.com/*</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// @require      https://sekiro.virjar.com/sekiro-doc/assets/sekiro_web_client.js</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">guid</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">S4</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> (((<span class="number">1</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>()) * <span class="number">0x10000</span>) | <span class="number">0</span>).<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">substring</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (<span class="title function_">S4</span>() + <span class="title function_">S4</span>() + <span class="string">&quot;-&quot;</span> + <span class="title function_">S4</span>() + <span class="string">&quot;-&quot;</span> + <span class="title function_">S4</span>() + <span class="string">&quot;-&quot;</span> + <span class="title function_">S4</span>() + <span class="string">&quot;-&quot;</span> + <span class="title function_">S4</span>() + <span class="title function_">S4</span>() + <span class="title function_">S4</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> client = <span class="keyword">new</span> <span class="title class_">SekiroClient</span>(<span class="string">&quot;ws://127.0.0.1:5620/business-demo/register?group=tt-test&amp;clientId=&quot;</span> + <span class="title function_">guid</span>());</span><br><span class="line">    <span class="comment">/* è‡ªå®šä¹‰å‡½æ•° */</span></span><br><span class="line"></span><br><span class="line">    client.<span class="title function_">registerAction</span>(<span class="string">&quot;toutiao&quot;</span>, <span class="keyword">function</span> (<span class="params">request, resolve, reject</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> url = request[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line">        <span class="keyword">if</span> (!url)&#123;</span><br><span class="line">            <span class="title function_">reject</span>(<span class="string">&quot;url ä¸èƒ½ä¸ºç©º&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">resolve</span>(&#123;<span class="string">&quot;signature&quot;</span>: <span class="variable language_">window</span>.<span class="property">byted_acrawler</span>.<span class="title function_">sign</span>(&#123;url&#125;), <span class="string">&quot;cookie&quot;</span>: <span class="variable language_">document</span>.<span class="property">cookie</span>&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h5 id="2-4-3-pythonä»£ç è°ƒç”¨">2.4.3 pythonä»£ç è°ƒç”¨</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">@author: å¤æ´›</span></span><br><span class="line"><span class="string">@QQ: 1972386194</span></span><br><span class="line"><span class="string">@file: å¤´æ¡æµ‹è¯•.py</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib3,requests</span><br><span class="line">urllib3.disable_warnings()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_sig</span>(<span class="params">url</span>):</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;group&quot;</span>: <span class="string">&quot;tt-test&quot;</span>,</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;toutiao&quot;</span>,</span><br><span class="line">        <span class="string">&quot;url&quot;</span>: url</span><br><span class="line">    &#125;</span><br><span class="line">    res = requests.post(url=<span class="string">&quot;http://127.0.0.1:5620/business-demo/invoke&quot;</span>, data=data, verify=<span class="literal">False</span>)</span><br><span class="line">    resp = res.json()</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;?&quot;</span> <span class="keyword">in</span> url:</span><br><span class="line">        url += <span class="string">&quot;&amp;_signature=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(resp[<span class="string">&#x27;signature&#x27;</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        url += <span class="string">&quot;?_signature=&#123;&#125;&quot;</span>.<span class="built_in">format</span>(resp[<span class="string">&#x27;signature&#x27;</span>])</span><br><span class="line">    <span class="keyword">return</span> url</span><br><span class="line"></span><br><span class="line">url = get_sig(<span class="string">&#x27;https://www.toutiao.com/api/pc/list/feed?channel_id=0&amp;min_behot_time=1636703275&amp;refresh_count=2&amp;category=pc_profile_recommend&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(url)</span><br><span class="line"></span><br><span class="line">session = requests.session()</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">res = session.get(url,headers=headers)</span><br><span class="line"><span class="keyword">if</span> res.status_code == <span class="number">200</span>:</span><br><span class="line">    <span class="keyword">if</span> res.json().get(<span class="string">&#x27;message&#x27;</span>) == <span class="string">&#x27;success&#x27;</span>:</span><br><span class="line">        items = res.json().get(<span class="string">&#x27;data&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> items:</span><br><span class="line">            title = i.get(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(title)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>![image-20220412211115059](â€¦/â€¦/â€¦/python-å­¦ä¹ /çˆ¬è™«ç¬¬å…«æœŸ/27 JS RPC-2022-12-02-å¤æ´›/day23-js-rpc/images/image-20220412211115059.png)</p>
<h4 id="2-5-JSæ³¨å…¥åŠ¨æ€ä¼ å‚">2.5 JSæ³¨å…¥åŠ¨æ€ä¼ å‚</h4>
<h5 id="2-5-1-é€†å‘ç›®æ ‡">2.5.1 é€†å‘ç›®æ ‡</h5>
<ul>
<li>åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.xingtu.cn/sup/creator/hot">https://www.xingtu.cn/sup/creator/hot</a></li>
<li>æ¥å£ï¼š<a target="_blank" rel="noopener" href="https://www.xingtu.cn/h/api/gateway/handler_get/">https://www.xingtu.cn/h/api/gateway/handler_get/</a></li>
<li>å¯¹æŠ—ï¼š<code>sign</code>ç­¾åå¤„ç†<code> sign: w((0, r.Z)((0,r.Z)(&#123;&#125;, n), l), s, o)</code></li>
</ul>
<h5 id="2-5-2-é€†å‘åˆ†æ">2.5.2 é€†å‘åˆ†æ</h5>
<ol>
<li>
<p>ä½¿ç”¨<code>xhr</code>æ–­ç‚¹ï¼Œè¿›å…¥åˆ°å“åº”<code>.interceptors.response.use</code>çš„ä½ç½®</p>
</li>
<li>
<p>ç„¶åæ‰¾åˆ°è¯·æ±‚ä½ç½®<code>interceptors.request.use</code>ä¸‹æ–­ç‚¹</p>
</li>
<li>
<p><code>sign</code>ç­¾åéªŒè¯åœ¨https://lf6-cdn2-tos.bytegoofy.com/star/idou_fe/assets/js/chunk-vendors.4ca1ae37.jsé‡Œé¢</p>
</li>
</ol>
<h5 id="2-5-2-RPCæ³¨å…¥è¿›å»">2.5.2  RPCæ³¨å…¥è¿›å»</h5>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> newElement = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">    newElement.<span class="title function_">setAttribute</span>(<span class="string">&quot;type&quot;</span>, <span class="string">&quot;text/javascript&quot;</span>);</span><br><span class="line">    newElement.<span class="title function_">setAttribute</span>(<span class="string">&quot;src&quot;</span>, <span class="string">&quot;https://sekiro.virjar.com/sekiro-doc/assets/sekiro_web_client.js&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(newElement);</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">guid</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">S4</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> (((<span class="number">1</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>()) * <span class="number">0x10000</span>) | <span class="number">0</span>).<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">substring</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (<span class="title function_">S4</span>() + <span class="title function_">S4</span>() + <span class="string">&quot;-&quot;</span> + <span class="title function_">S4</span>() + <span class="string">&quot;-&quot;</span> + <span class="title function_">S4</span>() + <span class="string">&quot;-&quot;</span> + <span class="title function_">S4</span>() + <span class="string">&quot;-&quot;</span> + <span class="title function_">S4</span>() + <span class="title function_">S4</span>() + <span class="title function_">S4</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">startSekiro</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> client = <span class="keyword">new</span> <span class="title class_">SekiroClient</span>(<span class="string">&quot;ws://127.0.0.1:5620/business-demo/register?group=rpc-xl&amp;clientId=&quot;</span> + <span class="title function_">guid</span>());</span><br><span class="line"></span><br><span class="line">        client.<span class="title function_">registerAction</span>(<span class="string">&quot;des&quot;</span>, <span class="keyword">function</span> (<span class="params">request, resolve, reject</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> enc_data = request[<span class="string">&#x27;data&#x27;</span>]</span><br><span class="line">            <span class="keyword">var</span> res = enc_data;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="title function_">v</span>()(res));</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">setTimeout</span>(startSekiro, <span class="number">1000</span>)</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="2-5-3-æ¥å£è°ƒç”¨">2.5.3  æ¥å£è°ƒç”¨</h5>
<ul>
<li>ä½¿ç”¨pythonç¨‹åºæ¥è¿›è¡Œè°ƒç”¨</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282025860.png" alt="image-20220829190608678"></p>
<h5 id="2-5-4-æ•°æ®å¤„ç†">2.5.4 æ•°æ®å¤„ç†</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests,httpx</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">des_data</span>():</span><br><span class="line">    data = &#123;<span class="string">&quot;group&quot;</span>: <span class="string">&quot;rpc-xl&quot;</span>,</span><br><span class="line">            <span class="string">&quot;action&quot;</span>: <span class="string">&quot;des&quot;</span>,</span><br><span class="line">            <span class="string">&quot;data&quot;</span>: <span class="string">&#x27;hot_list_id0service_methodGetHotListDataservice_nameauthor.AdStarAuthorServicesign_strict1tag61e540314fe6649d1b8489d8e39539b8836fb99e1538974d3ac1fe98&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">    res = requests.get(<span class="string">&quot;http://127.0.0.1:5620/business-demo/invoke&quot;</span>,params=data)</span><br><span class="line">    <span class="built_in">print</span>(res.text)</span><br><span class="line">    <span class="keyword">return</span> res.json().get(<span class="string">&#x27;data&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_data</span>():</span><br><span class="line">    url = <span class="string">&#x27;https://www.xingtu.cn/h/api/gateway/handler_get/&#x27;</span></span><br><span class="line">    params = &#123;</span><br><span class="line">    <span class="string">&quot;hot_list_id&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;tag&quot;</span>: <span class="string">&quot;61e540314fe6649d1b8489d8&quot;</span>,</span><br><span class="line">    <span class="string">&quot;service_name&quot;</span>: <span class="string">&quot;author.AdStarAuthorService&quot;</span>,</span><br><span class="line">    <span class="string">&quot;service_method&quot;</span>: <span class="string">&quot;GetHotListData&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sign_strict&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    sign = des_data()</span><br><span class="line">    params[<span class="string">&#x27;sign&#x27;</span>] = sign</span><br><span class="line">    <span class="built_in">print</span>(params)</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;accept&quot;</span>: <span class="string">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;</span>,</span><br><span class="line">        <span class="string">&quot;cookie&quot;</span>: <span class="string">&quot;passport_csrf_token=716a6ee6bb6ae9fe54c4def566579821; passport_csrf_token_default=716a6ee6bb6ae9fe54c4def566579821; csrftoken=2WxhAKTfiTIfrZMDDGEefFi; tt_webid=7125341076596196878; gfpart_1.0.1.3839_220078=0; gfpart_1.0.1.3880_220078=1; csrf_session_id=989c7a1f558481addafc6a4445352540; ttcid=0891c26ee93b4f99a10e9617e05bfd6521; MONITOR_WEB_ID=a3ed951f-2a8d-4227-af45-fd8d6ab1c558; tt_scid=6YpBFdUP4y4viKPpF7.VwWymz5HfHwEji21sTogt2orWNJWqFx2mvEqK2F-FTP1j3e36; s_v_web_id=verify_l7eigj3o_JgIGTLCk_XV4L_4rbD_AN3O_OGR9TFMOjind; _tea_utm_cache_2018=undefined; passport_auth_status=fb7ee123cc0428b8c547fdea31241cb5%2C335b6426aae826682b6e84c8e827def4; passport_auth_status_ss=fb7ee123cc0428b8c547fdea31241cb5%2C335b6426aae826682b6e84c8e827def4; sid_guard=b0bdf59ccd1bee257f53107a3ce0b50a%7C1661762541%7C5183999%7CFri%2C+28-Oct-2022+08%3A42%3A20+GMT; uid_tt=6c1566658a3baed6a71c342a0769603d; uid_tt_ss=6c1566658a3baed6a71c342a0769603d; sid_tt=b0bdf59ccd1bee257f53107a3ce0b50a; sessionid=b0bdf59ccd1bee257f53107a3ce0b50a; sessionid_ss=b0bdf59ccd1bee257f53107a3ce0b50a; sid_ucp_v1=1.0.0-KDczYzBmOGY4MDYyMjlmOTZjNTNiZTQ2NGY0M2Y4YzA1MzEzOTdhZTAKFgjIk8Dk7I3-ARDt97GYBhimDDgIQCYaAmxmIiBiMGJkZjU5Y2NkMWJlZTI1N2Y1MzEwN2EzY2UwYjUwYQ; ssid_ucp_v1=1.0.0-KDczYzBmOGY4MDYyMjlmOTZjNTNiZTQ2NGY0M2Y4YzA1MzEzOTdhZTAKFgjIk8Dk7I3-ARDt97GYBhimDDgIQCYaAmxmIiBiMGJkZjU5Y2NkMWJlZTI1N2Y1MzEwN2EzY2UwYjUwYQ; star_sessionid=b0bdf59ccd1bee257f53107a3ce0b50a; gftoken=YjBiZGY1OWNjZHwxNjYxNzYyNjE0OTF8fDAGBgYGBgY; pay_sessionid=sOmyHbM1VmFN1cplmbaj9btodVx2M5E7uB1z9v2XpuqnBWyjEFef8RmPmYBMFnv8&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pragma&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-ch-ua&quot;</span>: <span class="string">&quot;\&quot;Chromium\&quot;;v=\&quot;104\&quot;, \&quot; Not A;Brand\&quot;;v=\&quot;99\&quot;, \&quot;Google Chrome\&quot;;v=\&quot;104\&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-ch-ua-mobile&quot;</span>: <span class="string">&quot;?0&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-ch-ua-platform&quot;</span>: <span class="string">&quot;\&quot;Windows\&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-dest&quot;</span>: <span class="string">&quot;document&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-mode&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-site&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sec-fetch-user&quot;</span>: <span class="string">&quot;?1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;upgrade-insecure-requests&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    res = requests.get(url,params=params,headers=headers,)</span><br><span class="line">    <span class="built_in">print</span>(res.url)</span><br><span class="line">    <span class="built_in">print</span>(res.text)</span><br><span class="line"></span><br><span class="line">des_data()</span><br></pre></td></tr></table></figure>
<h2 id="JSVMP">JSVMP</h2>
<p><strong>è¯´æ˜</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ¬æ•™ç¨‹ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œä¸¥ç¦ç”¨äºå•†ä¸šç”¨é€”å’Œéæ³•ç”¨é€”ï¼Œå¦åˆ™ç”±æ­¤äº§ç”Ÿçš„ä¸€åˆ‡åæœå‡ä¸æœ¬äººæ— å…³ï¼Œè¯·å„å­¦å‘˜è‡ªè§‰éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="1-ç®€ä»‹">1 ç®€ä»‹</h3>
<h4 id="1-1-jsè™šæ‹Ÿæœºä¿æŠ¤æ–¹æ¡ˆ">1.1 jsè™šæ‹Ÿæœºä¿æŠ¤æ–¹æ¡ˆ</h4>
<p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/YDx5Dr-HDfAm-sAqeWW0qg">https://mp.weixin.qq.com/s/YDx5Dr-HDfAm-sAqeWW0qg</a></p>
<p>å…³äºjsvmpçš„è§£æ³•ä¸€èˆ¬æœ‰3ç§ï¼Œ<code>è¡¥ç¯å¢ƒï¼Œå’Œæ’æ¡©æ‰£é€»è¾‘ï¼Œjsrpc</code>ï¼Œå½“ç„¶è¿˜æœ‰è‡ªåŠ¨åŒ–ç­‰æ–¹å¼å¯è‡ªè¡Œç ”ç©¶è¯•è¯•</p>
<h3 id="2-å®æˆ˜åˆ†æ">2 å®æˆ˜åˆ†æ</h3>
<ul>
<li>
<p>æŒæ¡æ’æ¡©è°ƒè¯•</p>
</li>
<li>
<p>æŒæ¡åŸºæœ¬è¡¥ç¯å¢ƒæ“ä½œ</p>
</li>
</ul>
<h4 id="2-1-é€†å‘ç›®æ ‡-2">2.1  é€†å‘ç›®æ ‡</h4>
<ul>
<li>ç›®æ ‡ï¼š<a target="_blank" rel="noopener" href="https://www.toutiao.com/">https://www.toutiao.com/</a></li>
<li>å‚æ•°ï¼š<code>_signature:  _02B4Z6wo00901-PSSggAAIDC</code></li>
</ul>
<h4 id="2-2-é€†å‘åˆ†æ-2">2.2 é€†å‘åˆ†æ</h4>
<p>è¿›å…¥<code>I</code>å‡½æ•°ï¼Œåœ¨<code>return o</code>å³<code>signature</code>ï¼Œç»åˆ†æå¾—æœ€åä¸€å¥å°±æ˜¯``var o = window.byted_acrawler.sign.call(n, i)<code> , ä¹Ÿå°±æ˜¯</code>signature<code>æ˜¯</code>window.byted_acrawler.sign`å‡½æ•°ç”Ÿæˆçš„</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282025395.png" alt="image-20221018145754018"></p>
<h5 id="2-2-1-è¡¥ç¯å¢ƒæ“ä½œ">2.2.1 è¡¥ç¯å¢ƒæ“ä½œ</h5>
<h6 id="1ã€è¡¥å……ç¬¬ä¸€ä¸ªreferrer">1ã€è¡¥å……ç¬¬ä¸€ä¸ªreferrer</h6>
<p>é‰´äºjsçš„ç¬¬ä¸€å¥åˆ¤æ–­äº†<code>window</code>æ˜¯å¦=<code>undefined</code>ï¼Œå¦‚æœ<code>=undefinedåˆ™glb=global</code>(nodeç¯å¢ƒ<code>global</code>æ˜¯å…¨å±€å˜é‡)ï¼Œå¦åˆ™<code>glb=window</code>(æµè§ˆå™¨<code>window</code>æ˜¯å…¨å±€å˜é‡)ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆè¡¥ä¸ª<code>window</code>å¯¹è±¡ï¼ˆæœ‰ä¸¤ç§æ–¹æ³•ï¼Œâ‘ æœ¬åœ°jså…ˆç”¨<code>sdom</code>è¡¥å……ä¸€ä¸ª<code>windowï¼Œâ‘¡window=globalï¼‰</code>ï¼Œæœ¬æ¬¡é‡‡ç”¨<code>window=global</code>çš„æ–¹æ³•ï¼›<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282026641.png" alt="image-20221018150800840"></p>
<p><strong>å°æ’æ›²çŸ¥è¯†ç‚¹1</strong>ï¼š<code>æ—¥å¿—æ–­ç‚¹åˆç§°æ’æ¡©</code>,å¯ä»¥åœ¨consoleç•Œé¢è¾“å‡ºAå˜é‡å€¼ä»¥åŠS[R][A]å€¼ï¼›æ­¤å¤„å¯ä»¥è¡¥å¾ˆå¤šä¸œè¥¿ï¼Œä½†æ˜¯æˆ‘ä»¬å…ˆçœ‹æŠ¥é”™å†åé¢æŒ‘ç€è¡¥</p>
<ul>
<li>ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€æ—¥å¿—æ–­ç‚¹,è¾“å…¥<code>A,S[R][A]</code></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282025399.png" alt="image-20221018151510074"></p>
<p><strong>å°æ’æ›²çŸ¥è¯†ç‚¹2ï¼š</strong><code>æ¡ä»¶æ–­ç‚¹</code>ï¼Œå½“Aå˜é‡ç­‰äº<code>referrer</code>æ—¶ä¼šè‡ªåŠ¨<code>debugger</code>ä½</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282025398.png" alt="image-20221018193545053"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282025407.png" alt="image-20221018154028571"></p>
<h6 id="2ã€è¡¥å……sign">2ã€è¡¥å……sign</h6>
<p><strong>ç¬¬äºŒæ¬¡è¿è¡ŒæŠ¥é”™å¦‚ä¸‹ï¼Œç¼ºå°‘<code>sign</code>è¿™ä¸ªå‡½æ•°</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">TypeError</span>: <span class="title class_">Cannot</span> read properties <span class="keyword">of</span> <span class="title function_">undefined</span> (reading <span class="string">&#x27;sign&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282025411.png" alt="image-20221018154759698"></p>
<p><strong>ç¬¬äºŒæ¬¡è¿è¡ŒæŠ¥é”™åŸå› åˆ†æ</strong>ï¼Œjsæ–‡ä»¶æ£€æµ‹äº†æ˜¯å¦æ˜¯<code>node</code>ç¯å¢ƒï¼Œå¦‚<code>exports</code>åªåœ¨<code>node</code>ç¯å¢ƒä¸‹å­˜åœ¨ï¼Œä½†æ˜¯æµè§ˆå™¨æ˜¯<code>undefined</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥æŠŠ<code>&quot;undefined&quot; != typeof exports ? exports : void 0 </code>æ›¿æ¢æˆæµè§ˆå™¨è¾“å‡ºçš„ç»“æœ<code>undefined</code><br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282025570.png" alt="image-20221018155612716"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282025388.png" alt="image-20221018155849684"></p>
<h6 id="3ã€è¡¥å……-href">3ã€è¡¥å…… href</h6>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">S[R] = S[R][A]</span><br><span class="line">     ^</span><br><span class="line"><span class="title class_">TypeError</span>: <span class="title class_">Cannot</span> read properties <span class="keyword">of</span> <span class="title function_">undefined</span> (reading <span class="string">&#x27;href&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>3.1ã€è§£å†³æ–¹æ¡ˆ</p>
<ul>
<li>ä½¿ç”¨æ’æ¡©ç»§ç»­è°ƒè¯•ï¼Œç„¶åè¡¥å……å¯¹åº”ç¯å¢ƒå³å¯</li>
</ul>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">location</span> <span class="title">= &#123;</span></span><br><span class="line"><span class="title">    href</span>:&#x27;https://www.toutiao.com/&#x27;,</span><br><span class="line">    protocol:&#x27;https&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="4ã€è¡¥-length">4ã€è¡¥ length</h6>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">S[R] = S[R][A]</span><br><span class="line">      ^</span><br><span class="line"><span class="title class_">TypeError</span>: <span class="title class_">Cannot</span> read properties <span class="keyword">of</span> <span class="title function_">undefined</span> (reading <span class="string">&#x27;length&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šè¿™é‡Œå¯ä»¥ä¸‹æ–­ç‚¹æŸ¥çœ‹ã€åˆ°äº†å“ªä¸ªä½ç½®ç»™ç¨‹åºæŠ¥çš„é”™ã€å¯ä»¥å‘ç°åœ¨æ‰§è¡Œå®Œ<code>protocol</code>å°±å¼€å§‹æŠ¥é”™ï¼Œæ‰€ä»¥å¯ä»¥åˆ¤æ–­æ²¡æœ‰<code>protocol</code>ã€åœ¨æ§åˆ¶å°æ‰§è¡Œæ‰“å‡ºå³å¯</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:/Users/XL/AppData/Roaming/Typora/typora-user-images/image-20221205223627376.png" alt="image-20221205223627376"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:/Users/XL/AppData/Roaming/Typora/typora-user-images/image-20221205223703551.png" alt="image-20221205223703551"></p>
<h6 id="5ã€è¡¥useragent">5ã€è¡¥useragent</h6>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:/Users/XL/AppData/Roaming/Typora/typora-user-images/image-20221205223758751.png" alt="image-20221205223758751"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">navigator = &#123;</span><br><span class="line">    <span class="attr">userAgent</span>:<span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282026642.png" alt="image-20221018162925649"></p>
<h6 id="6ã€å‚æ•°é•¿çŸ­è¡¥å……">6ã€å‚æ•°é•¿çŸ­è¡¥å……</h6>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ®å‰è¾ˆä»‹ç»<span class="keyword">signature</span>é•¿çŸ­å’Œcookieçš„é•¿åº¦æœ‰å…³ï¼Œæ‰€ä»¥æ‰“ä¸Šæ¡ä»¶æ–­ç‚¹ï¼Œç„¶åæˆ‘ä»¬å†è¡¥ä¸ªcookieï¼Œè€Œä¸”document.cookieçš„ä½ç½®å¾—å¾€åæ”¾ï¼Œå¦åˆ™å¯èƒ½è¢«åˆ é™¤æ¸…ç©ºä»€ä¹ˆçš„ï¼›è¿˜æœ‰<span class="keyword">signature</span>å¦‚æœä¸æˆåŠŸçš„è¯ï¼Œæœ‰å¯èƒ½å°±æ˜¯æ­¤å¤„<span class="number">281</span>è¡Œå‡ºäº†é—®é¢˜ï¼Œå¯ä»¥å¯¹æ¯”çš„ç»§ç»­è¡¥ç¯å¢ƒ</span><br></pre></td></tr></table></figure>
<h4 id="2-3-æ¡ˆä¾‹code">2.3 æ¡ˆä¾‹code</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_sign</span>(<span class="params">pp</span>):</span><br><span class="line">    signa = execjs.<span class="built_in">compile</span>(<span class="built_in">open</span>(<span class="string">&#x27;aa.js&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>).read()).call(<span class="string">&#x27;get_sign&#x27;</span>,pp)</span><br><span class="line">    <span class="keyword">return</span> signa</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;authority&quot;</span>: <span class="string">&quot;i.snssdk.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;accept&quot;</span>: <span class="string">&quot;*/*&quot;</span>,</span><br><span class="line">    <span class="string">&quot;accept-language&quot;</span>: <span class="string">&quot;zh-CN,zh;q=0.9&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cache-control&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">    <span class="string">&quot;pragma&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">    <span class="string">&quot;referer&quot;</span>: <span class="string">&quot;https://www.toutiao.com/&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua&quot;</span>: <span class="string">&quot;^\\^Chromium^^;v=^\\^106^^, ^\\^Google&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua-mobile&quot;</span>: <span class="string">&quot;?0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua-platform&quot;</span>: <span class="string">&quot;^\\^Windows^^&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-fetch-dest&quot;</span>: <span class="string">&quot;empty&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-fetch-mode&quot;</span>: <span class="string">&quot;cors&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-fetch-site&quot;</span>: <span class="string">&quot;cross-site&quot;</span>,</span><br><span class="line">    <span class="string">&quot;user-agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">    <span class="string">&quot;origin&quot;</span>: <span class="string">&quot;https://www.toutiao.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;access-control-request-headers&quot;</span>: <span class="string">&quot;content-type&quot;</span>,</span><br><span class="line">    <span class="string">&quot;access-control-request-method&quot;</span>: <span class="string">&quot;POST&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">cookies = &#123;</span><br><span class="line">    <span class="string">&quot;_S_WIN_WH&quot;</span>: <span class="string">&quot;1631_748&quot;</span>,</span><br><span class="line">    <span class="string">&quot;_S_DPR&quot;</span>: <span class="string">&quot;1.5&quot;</span>,</span><br><span class="line">    <span class="string">&quot;_S_IPAD&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;tt_webid&quot;</span>: <span class="string">&quot;7125340976496215589&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ttcid&quot;</span>: <span class="string">&quot;af0a3ffe0342459282b3b41073a931e426&quot;</span>,</span><br><span class="line">    <span class="string">&quot;csrftoken&quot;</span>: <span class="string">&quot;3e5c6c4772e586f2f8f2c25745914ab9&quot;</span>,</span><br><span class="line">    <span class="string">&quot;s_v_web_id&quot;</span>: <span class="string">&quot;verify_l7d90e5m_AVBEjJn8_ZHlS_4PDF_BMYV_v5HtPvp7Pxeu&quot;</span>,</span><br><span class="line">    <span class="string">&quot;MONITOR_WEB_ID&quot;</span>: <span class="string">&quot;a3ed951f-2a8d-4227-af45-fd8d6ab1c558&quot;</span>,</span><br><span class="line">    <span class="string">&quot;local_city_cache&quot;</span>: <span class="string">&quot;^%^E9^%^95^%^BF^%^E6^%^B2^%^99&quot;</span>,</span><br><span class="line">    <span class="string">&quot;_tea_utm_cache_24&quot;</span>: <span class="string">&quot;undefined&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ttwid&quot;</span>: <span class="string">&quot;1^%^7CbwiwxwyD2PbYRS3V5P3vpvR1EN-Iwiqicj_VNrFsM9g^%^7C1666081140^%^7Cd9aea9f3de2c3ed62318563856b529d65b7b6495151977756631e87aeb68ecfa&quot;</span>,</span><br><span class="line">    <span class="string">&quot;tt_scid&quot;</span>: <span class="string">&quot;IOB8RVnWE3XRiQTmqc9xdbPJA.-kxRc3ADliV7EU.LsP52IhKxUUsJHu0n5bwVjZa317&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">url = <span class="string">&quot;https://www.toutiao.com/api/pc/list/feed&quot;</span></span><br><span class="line">urla = <span class="string">&#x27;https://www.toutiao.com/api/pc/list/feed?offset=0&amp;channel_id=94349549395&amp;max_behot_time=0&amp;category=pc_profile_channel&amp;disable_raw_data=true&amp;aid=24&amp;app_name=toutiao_web&#x27;</span></span><br><span class="line">signa = get_sign(urla)</span><br><span class="line">urlx = urla + <span class="string">&#x27;&amp;_signature=&#x27;</span> + signa</span><br><span class="line">response = requests.get(urlx, headers=headers, cookies=cookies)</span><br><span class="line"><span class="built_in">print</span>(response.url)</span><br><span class="line"><span class="built_in">print</span>(response.text)</span><br></pre></td></tr></table></figure>
<h2 id="è¡¥ç¯å¢ƒç³»åˆ—æ•™ç¨‹">è¡¥ç¯å¢ƒç³»åˆ—æ•™ç¨‹</h2>
<ul>
<li>æŒæ¡è‡ªåŠ¨ååå¢ƒæ“ä½œ</li>
<li>æŒæ¡ç¯å¢ƒå·®å¼‚åŒ–hookæ“ä½œ</li>
</ul>
<h3 id="1-é¡¹ç›®å®æ“ä¸€">1 é¡¹ç›®å®æ“ä¸€</h3>
<h4 id="1-1-é€†å‘ç›®æ ‡">1.1  é€†å‘ç›®æ ‡</h4>
<ul>
<li>ç›®æ ‡ï¼š<a target="_blank" rel="noopener" href="https://www.zhihu.com/topic/19555513/hot">https://www.zhihu.com/topic/19555513/hot</a></li>
<li>å‚æ•°ï¼š<strong>x-zse-96</strong>:  _<code>02B4Z6wo00901-PSSggAAIDC</code></li>
</ul>
<h4 id="1-2-é€†å‘åˆ†æ">1.2 é€†å‘åˆ†æ</h4>
<p>å…¨å±€æœç´¢æŸä¹å…³é”®å­—ã€ç„¶ååœ¨JSé‡Œé¢æœ‰2å¤„åœ°æ–¹ï¼Œå…¨éƒ¨é€‰ä¸­ç„¶åä¸‹æ–­ç‚¹è°ƒè¯•</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282026739.png" alt="image-20221129164209119"></p>
<p>ä»è¿™é‡Œå¯ä»¥çœ‹å‡º</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">signature: (<span class="number">0</span>,<span class="built_in">Z</span>(r).encrypt)(<span class="built_in">f</span>()(s))</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282026736.png" alt="image-20221129164822023"></p>
<p>è¿›å»é‡Œé¢çš„ç®—æ³•æŸ¥çœ‹ï¼Œä¸‹ä¸ªæ–­ç‚¹çœ‹æ•°æ®ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282026738.png" alt="image-20221129164906448"></p>
<p>è¿™å°±ä¸å¥½åŠäº†ï¼Œé‚£ä¹ˆå³ä½¿è¡¥ç¯å¢ƒå‡ºæ¥çš„ç»“æœï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯å¯¹çš„ã€‚ä¸€èˆ¬è¿™ç§æƒ…å†µä¸‹ï¼Œå°±æ˜¯è®¡ç®—æ¶‰åŠåˆ°çš„éšæœºæ•°æˆ–è€…æ—¶é—´ã€‚è€Œè¿™é‡Œå°±æ˜¯åŒ…å«çš„éšæœºæ•°ï¼Œæ‰€ä»¥éœ€è¦hookéšæœºæ•°çš„è¿”å›</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Math</span>.<span class="property">random</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.50</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨å¤´éƒ¨åŠ ä¸Š<code>jsdom</code>çš„ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span>&#123;<span class="variable constant_">JSDOM</span>&#125;=<span class="built_in">require</span>(<span class="string">&quot;jsdom&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> dom=<span class="keyword">new</span> <span class="title function_">JSDOM</span>(<span class="string">&quot;&lt;!DOCTYPE html&gt;&lt;p&gt;Hello world&lt;/p&gt;&quot;</span>);</span><br><span class="line"><span class="variable language_">window</span>=dom.<span class="property">window</span>;</span><br><span class="line"><span class="variable language_">document</span>=<span class="variable language_">window</span>.<span class="property">document</span>;  <span class="comment">//documentå¯¹è±¡:ä»£è¡¨ç»™å®šæµè§ˆå™¨çª—å£ä¸­çš„HTMLæ–‡æ¡£,</span></span><br><span class="line">navigator=<span class="variable language_">window</span>.<span class="property">navigator</span>; <span class="comment">// å…³äºè¿è¡Œå½“å‰è„šæœ¬çš„åº”ç”¨ç¨‹åºçš„ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">location=<span class="variable language_">window</span>.<span class="property">location</span>; <span class="comment">//å¯¹è±¡åŒ…å«å½“å‰é¡µé¢çš„URLä¿¡æ¯</span></span><br><span class="line">history=<span class="variable language_">window</span>.<span class="property">history</span>; <span class="comment">// å†å²ä¼šè¯</span></span><br><span class="line">screen=<span class="variable language_">window</span>.<span class="property">screen</span>; <span class="comment">// æµè§ˆå™¨å±å¹•</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">random</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.50</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç»“æœå’Œæ ·æœ¬æ˜æ˜¾ä¸ä¸€æ ·ï¼Œè¯´æ˜è¿˜ç¼ºå°‘äº†å…¶ä»–ç¯å¢ƒæ²¡æœ‰è¡¥åˆ°,ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½¿ç”¨è‡ªåŠ¨åç¯å¢ƒå•¦ï¼Œå¯¹å‰é¢çš„ç¯å¢ƒå˜é‡ä¸Šä»£ç†ï¼Œçœ‹çœ‹è¿˜ç”¨åˆ°äº†ä»€ä¹ˆå±æ€§å’Œæ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span> = <span class="keyword">new</span> <span class="title class_">Proxy</span>(<span class="variable language_">window</span>, &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target, property, value, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®¾ç½®å±æ€§set window&quot;</span>, property, <span class="keyword">typeof</span> value);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(...<span class="variable language_">arguments</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, property, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è·å–å±æ€§get window&quot;</span>, property, <span class="keyword">typeof</span> target[property]);</span><br><span class="line">        <span class="keyword">return</span> target[property]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">document</span> = <span class="keyword">new</span> <span class="title class_">Proxy</span>(<span class="variable language_">document</span>, &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target, property, value, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®¾ç½®å±æ€§set document&quot;</span>, property, <span class="keyword">typeof</span> value);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(...<span class="variable language_">arguments</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, property, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è·å–å±æ€§get document&quot;</span>, property, <span class="keyword">typeof</span> target[property]);</span><br><span class="line">        <span class="keyword">return</span> target[property]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">navigator = <span class="keyword">new</span> <span class="title class_">Proxy</span>(navigator, &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target, property, value, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®¾ç½®å±æ€§set navigator&quot;</span>, property, <span class="keyword">typeof</span> value);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(...<span class="variable language_">arguments</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, property, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è·å–å±æ€§get navigator&quot;</span>, property, <span class="keyword">typeof</span> target[property]);</span><br><span class="line">        <span class="keyword">return</span> target[property]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">location = <span class="keyword">new</span> <span class="title class_">Proxy</span>(location, &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target, property, value, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®¾ç½®å±æ€§set location&quot;</span>, property, <span class="keyword">typeof</span> value);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(...<span class="variable language_">arguments</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, property, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è·å–å±æ€§get location&quot;</span>, property, <span class="keyword">typeof</span> target[property]);</span><br><span class="line">        <span class="keyword">return</span> target[property]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">history = <span class="keyword">new</span> <span class="title class_">Proxy</span>(history, &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target, property, value, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®¾ç½®å±æ€§set history&quot;</span>, property, <span class="keyword">typeof</span> value);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(...<span class="variable language_">arguments</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, property, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è·å–å±æ€§get history&quot;</span>, property, <span class="keyword">typeof</span> target[property]);</span><br><span class="line">        <span class="keyword">return</span> target[property]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">screen = <span class="keyword">new</span> <span class="title class_">Proxy</span>(screen, &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target, property, value, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®¾ç½®å±æ€§set screen&quot;</span>, property, <span class="keyword">typeof</span> value);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(...<span class="variable language_">arguments</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, property, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è·å–å±æ€§get screen&quot;</span>, property, <span class="keyword">typeof</span> target[property]);</span><br><span class="line">        <span class="keyword">return</span> target[property]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="2-é¡¹ç›®å®æ“äºŒ">2 é¡¹ç›®å®æ“äºŒ</h3>
<h4 id="2-1-é€†å‘ç›®æ ‡-3">2.1 é€†å‘ç›®æ ‡</h4>
<p>åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://q.10jqka.com.cn/">http://q.10jqka.com.cn/</a></p>
<h4 id="2-2-è¡¥ç¯å¢ƒå®æ“">2.2 è¡¥ç¯å¢ƒå®æ“</h4>
<p>å…ˆè¡¥å……åŸºæœ¬çš„ç¯å¢ƒ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282027298.png" alt="image-20221201221307777"></p>
<p>æ³¨ï¼šå¦‚å›¾ç¯å¢ƒè¡¥å®Œåã€å‘ç°è¿˜æ˜¯æ²¡æœ‰cookieçš„å€¼ã€è¿™ä¸ªæ—¶å€™éœ€è¦æ’æŸ¥æ˜¯ä¸æ˜¯ä»£ç èµ°äº†å…¶ä»–çš„åˆ†æ”¯ã€å¯¼è‡´è¾“å‡ºå¼‚å¸¸ã€‚å¯ä»¥åœ¨<code>tryã€catch</code>é‡Œé¢è¾“å‡ºæŸ¥çœ‹ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282026751.png" alt="image-20221201221150407"></p>
<p>åœ¨è¿™ä¸ªä½ç½®è¾“å‡ºã€å¯ä»¥å‘ç°æœ‰ç¯å¢ƒå‡ºç°äº†å¼‚å¸¸ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦è¡¥äº†</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282027299.png" alt="image-20221201221646291"></p>
<h3 id="3-åç¯å¢ƒè„šæœ¬">3 åç¯å¢ƒè„šæœ¬</h3>
<h4 id="3-1-ç®€ä»‹">3.1 ç®€ä»‹</h4>
<p><code>Proxy</code>å¯ä»¥ç†è§£ä¸ºï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰è®¾ä¸€å±‚&quot;æ‹¦æˆª&quot;ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»é€šè¿‡è¿™å±‚æ‹¦æˆª,å¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ï¼ˆè¡¨ç¤ºå¯ä»¥ç”¨å®ƒ&quot;ä»£ç†&quot;æŸäº›æ“ä½œï¼Œå¯ä»¥ç¿»ä¸ºâ€œä»£ç†å™¨&quot;ï¼‰ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282026153.webp" alt="img"></p>
<p>åŸºæœ¬ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›®æ ‡å¯¹è±¡ï¼ˆè¢«ä»£ç†å¯¹è±¡ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> target = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;JACK&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»£ç†è¡Œä¸ºå¯¹è±¡ï¼ˆå¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œå–å€¼æˆ–èµ‹å€¼è¡Œä¸ºæ—¶ï¼Œä¼šè¿›å…¥æ­¤å¯¹è±¡çš„æ–¹æ³•ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> handler = &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span>(<span class="params">target, property, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;get: &quot;</span>, target, property, target[property]);</span><br><span class="line">        <span class="keyword">return</span> target[property];</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span>(<span class="params">target, property, value</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;set: &quot;</span>, target, property, value);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(...<span class="variable language_">arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ Proxy æ„é€ å‡½æ•°å®ä¾‹å‡ºæ–°çš„targetå¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> targets = <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, handler)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–å€¼æ“ä½œ ä¼šè¿›å…¥handlerä¸­çš„getæ–¹æ³• å¹¶æ‰“å°</span></span><br><span class="line">targets.<span class="property">name</span>     <span class="comment">//  get:  &#123;name: &#x27;JACK&#x27;, age: 18&#125; name JACK</span></span><br><span class="line"><span class="comment">// èµ‹å€¼æ“ä½œ ä¼šè¿›å…¥handlerä¸­çš„setæ–¹æ³• å¹¶æ‰“å°</span></span><br><span class="line">targets.<span class="property">age</span> = <span class="number">25</span> <span class="comment">//  set:  &#123;name: &#x27;JACK&#x27;, age: 18&#125; age 25</span></span><br></pre></td></tr></table></figure>
<p>Proxyå¯¹è±¡ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼štargetã€handler</p>
<p>target:ç›®æ ‡å¯¹è±¡<br>
handlerï¼šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå£°æ˜äº†ä»£ç†targetçš„æŒ‡å®šè¡Œä¸ºï¼Œæ”¯æŒçš„æ‹¦æˆªæ“ä½œï¼Œä¸€å…±13ç§ï¼š</p>
<ul>
<li>get(target,propKey,receiver)ï¼šæ‹¦æˆªå¯¹è±¡å±æ€§çš„è¯»å–ã€‚</li>
<li>set(target,propKey,value,receiver)ï¼šæ‹¦æˆªå¯¹è±¡å±æ€§çš„è®¾ç½®ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆä¿®æ”¹æˆåŠŸï¼‰ã€‚</li>
</ul>
<p>å¯¹äºJSé€†å‘æ¥è¯´ï¼Œæˆ‘ä»¬æ‰£å®Œä»£ç çš„ç›®çš„å°±æ˜¯è°ƒç”¨ç›®æ ‡ç½‘ç«™çš„åŠ /è§£å¯†å‡½æ•°æˆ–æŸä¸ªå€¼çš„ç®—æ³•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬æŠŠä»–çš„ç®—æ³•æ‰£ä¸‹æ¥èƒ½å¤Ÿç›´æ¥æ‰§è¡Œï¼Œä½†æ˜¯å¦‚æœæ£€æµ‹äº†æµè§ˆå™¨æŒ‡çº¹ï¼Œé‚£å°±æ¯”è¾ƒéš¾äº†ï¼Œåªèƒ½å¤Ÿå»æ·±å…¥åˆ†æè¿›è¡Œè¡¥ç¯å¢ƒã€‚</p>
<p>ä¸€èˆ¬çš„è¡¥ç¯å¢ƒçš„æ˜¯é€šè¿‡è¿è¡Œç¨‹åºåçš„undefinedæŠ¥é”™å»ä¸€ç‚¹ä¸€ç‚¹åˆ†æï¼Œä¸€ç‚¹ä¸€ç‚¹çš„å»è¡¥ä¸€äº›ç¯å¢ƒï¼Œæ˜¯éå¸¸æ‰å¤´å‘çš„ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ Proxy å¯¹å…¨å±€éå†windowã€documentã€navigatorç­‰å¸¸è§ç¯å¢ƒæ£€æµ‹ç‚¹è¿›è¡Œä»£ç†ï¼Œæ‹¦æˆªä»£ç†å¯¹è±¡çš„è¯»å–ã€å‡½æ•°è°ƒç”¨ç­‰æ“ä½œï¼Œå¹¶é€šè¿‡æ§åˆ¶å°è¾“å‡ºï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬å°±èƒ½å¤Ÿå®ç°æ£€æµ‹ç¯å¢ƒè‡ªåçš„åŠŸèƒ½ï¼Œåç»­æˆ‘ä»¬å†é’ˆå¯¹åå‡ºæ¥çš„ç¯å¢ƒç»Ÿä¸€çš„è¿›è¡Œè¡¥ç¯å¢ƒï¼Œè¿™æ ·å°±ä¼šæ–¹ä¾¿çš„å¤šã€‚</p>
<h4 id="3-2-è„šæœ¬ç¼–å†™">3.2 è„šæœ¬ç¼–å†™</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span> = <span class="keyword">new</span> <span class="title class_">Proxy</span>(<span class="variable language_">document</span>, &#123;</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target, property, value, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®¾ç½®å±æ€§set document&quot;</span>, property, <span class="keyword">typeof</span> value);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(...<span class="variable language_">arguments</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, property, receiver</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è·å–å±æ€§get document&quot;</span>, property, <span class="keyword">typeof</span> target[property]);</span><br><span class="line">        <span class="keyword">return</span> target[property]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="4-jsdomè¡¥ç¯å¢ƒ">4 <code>jsdom</code>è¡¥ç¯å¢ƒ</h3>
<p>å‚è€ƒåœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/jsdom/jsdom/wiki/jsdom-%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3">https://github.com/jsdom/jsdom/wiki/jsdom-ä¸­æ–‡æ–‡æ¡£</a></p>
<p><code>jsdom</code>æ˜¯ä¸€ä¸ªçº¯ç²¹ç”± <code>javascript</code> å®ç°çš„ä¸€ç³»åˆ— webæ ‡å‡†ï¼Œç‰¹åˆ«æ˜¯ WHATWG ç»„ç»‡åˆ¶å®šçš„<a target="_blank" rel="noopener" href="https://dom.spec.whatwg.org/">DOM</a>å’Œ <a target="_blank" rel="noopener" href="https://html.spec.whatwg.org/multipage/">HTML</a> æ ‡å‡†ï¼Œç”¨äºåœ¨<code>nodejs</code>ä¸­ä½¿ç”¨ã€‚å¤§ä½“ä¸Šæ¥è¯´ï¼Œè¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯æ¨¡æ‹Ÿè¶³å¤Ÿçš„Webæµè§ˆå™¨å­é›†ï¼Œä»¥ä¾¿ç”¨äºæµ‹è¯•å’ŒæŒ–æ˜çœŸå®ä¸–ç•Œçš„Webåº”ç”¨ç¨‹åº</p>
<h4 id="4-1-ç¯å¢ƒå®‰è£…">4.1 ç¯å¢ƒå®‰è£…</h4>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install </span><span class="keyword">jsdom </span>--save</span><br></pre></td></tr></table></figure>
<h4 id="4-2-åŸºæœ¬ä½¿ç”¨">4.2 åŸºæœ¬ä½¿ç”¨</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jsdom = <span class="built_in">require</span>(<span class="string">&quot;jsdom&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="variable constant_">JSDOM</span> &#125; = jsdom;</span><br><span class="line"><span class="keyword">const</span> dom = <span class="keyword">new</span> <span class="title function_">JSDOM</span>(<span class="string">`&lt;!DOCTYPE html&gt;&lt;p&gt;Hello world&lt;/p&gt;`</span>);</span><br><span class="line">title = dom.<span class="property">window</span>.<span class="property">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;p&quot;</span>).<span class="property">textContent</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(title)</span><br></pre></td></tr></table></figure>
<h4 id="4-3-æ·»åŠ å‚æ•°å½¢å¼">4.3 æ·»åŠ å‚æ•°å½¢å¼</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> dom = <span class="keyword">new</span> <span class="title function_">JSDOM</span>(<span class="string">``</span>, &#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;http://q.10jqka.com.cn/&quot;</span>,</span><br><span class="line">  <span class="attr">referrer</span>: <span class="string">&quot;http://q.10jqka.com.cn/&quot;</span>,</span><br><span class="line">  <span class="attr">contentType</span>: <span class="string">&quot;text/html&quot;</span>,</span><br><span class="line">  <span class="attr">includeNodeLocations</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">storageQuota</span>: <span class="number">10000000</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="COOkIEåçˆ¬è™«">COOkIEåçˆ¬è™«</h2>
<h3 id="1-cookieåçˆ¬ç®€ä»‹">1 cookieåçˆ¬ç®€ä»‹</h3>
<p>Cookie åçˆ¬è™«æŒ‡çš„æ˜¯æœåŠ¡å™¨ç«¯é€šè¿‡æ ¡éªŒè¯·æ±‚å¤´ä¸­çš„ Cookie å€¼æ¥åŒºåˆ†æ­£å¸¸ç”¨æˆ·å’Œçˆ¬è™«ç¨‹åºçš„æ‰‹æ®µï¼Œè¿™ç§æ‰‹æ®µè¢«å¹¿æ³›åº”ç”¨åœ¨ Web åº”ç”¨ä¸­ã€‚</p>
<h4 id="1-1-cookieåŠ å¯†åŸç†">1.1 cookieåŠ å¯†åŸç†</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031693.png" alt="image-20220824165530043"></p>
<h3 id="2-cookieé€†å‘å®è·µ1">2 cookieé€†å‘å®è·µ1</h3>
<ul>
<li>å­¦ä¹ å“åº”cookieå’Œsessionçš„å¤„ç†</li>
<li>å­¦ä¹ åŸºäºé¦–é¡µè¿”å›çš„cookieå€¼</li>
</ul>
<h4 id="2-1-é€†å‘ç›®æ ‡-4">2.1 é€†å‘ç›®æ ‡</h4>
<ul>
<li>
<p>åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://www.zjmazhang.gov.cn/hdjlpt/published?via=pc">http://www.zjmazhang.gov.cn/hdjlpt/published?via=pc</a></p>
</li>
<li>
<p>æ¥å£ï¼š<a target="_blank" rel="noopener" href="http://www.zjmazhang.gov.cn/hdjlpt/letter/pubList">http://www.zjmazhang.gov.cn/hdjlpt/letter/pubList</a></p>
</li>
<li>
<p>å¯¹æŠ—ï¼š<code>cookie</code>åçˆ¬è™«å¤„ç†</p>
</li>
</ul>
<h4 id="2-2-é€†å‘åˆ†æ-3">2.2 é€†å‘åˆ†æ</h4>
<ul>
<li>
<p>å¯ä»¥å‘ç°æŠ“å–æ¥å£æ•°æ®ï¼Œéœ€è¦æºå¸¦å¯¹åº”çš„cookieæ‰èƒ½æ­£å¸¸è·å–</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282028839.png" alt="image-20220823170811179"></p>
</li>
</ul>
<h4 id="2-3-é€†å‘ç»“æœ">2.3 é€†å‘ç»“æœ</h4>
<ul>
<li>ä½¿ç”¨pythonå…ˆæå–cookieï¼Œç„¶åæºå¸¦è¯·æ±‚å¯ä»¥æ­£å¸¸çªç ´</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> httpx</span><br><span class="line"><span class="keyword">from</span> utils <span class="keyword">import</span> ua</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_ck</span>():</span><br><span class="line">    url = <span class="string">&#x27;http://www.zjmazhang.gov.cn/hdjlpt/published?via=pc&#x27;</span></span><br><span class="line">    res = httpx.request(<span class="string">&#x27;GET&#x27;</span>,url)</span><br><span class="line">    cookie = res.cookies.get(<span class="string">&#x27;szxx_session&#x27;</span>)</span><br><span class="line">    token = re.findall(<span class="string">r&quot;var _CSRF = &#x27;(.*?)&#x27;;&quot;</span>,res.text)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> cookie,token</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    c, t = get_ck()</span><br><span class="line">    url = <span class="string">&#x27;http://www.zjmazhang.gov.cn/hdjlpt/letter/pubList&#x27;</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;user-agent&#x27;</span>: ua.FakeChromeUA.get_ua(),</span><br><span class="line">        <span class="string">&#x27;X-CSRF-TOKEN&#x27;</span>: t,</span><br><span class="line">        <span class="string">&#x27;Cookie&#x27;</span>: <span class="string">&#x27;XSRF-TOKEN=&#123;&#125;;szxx_session=&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(t, c)</span><br><span class="line">    &#125;</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;offset&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">        <span class="string">&quot;limit&quot;</span>: <span class="string">&quot;20&quot;</span>,</span><br><span class="line">        <span class="string">&quot;site_id&quot;</span>: <span class="string">&quot;759010&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    res = httpx.post(url,data=data,headers=headers)</span><br><span class="line">    <span class="keyword">if</span> res.status_code == <span class="number">200</span>:</span><br><span class="line">        <span class="built_in">print</span>(res.text)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¯·æ±‚é”™è¯¯&#x27;</span>)</span><br><span class="line"></span><br><span class="line">index()</span><br></pre></td></tr></table></figure>
<h3 id="3-cookieé€†å‘å®æˆ˜">3. cookieé€†å‘å®æˆ˜</h3>
<ul>
<li>å­¦ä¹ JSè®¾ç½®çš„cookieå¤„ç†</li>
<li>å­¦ä¹ è½»åº¦JSæ··æ·†å¤„ç†</li>
</ul>
<h4 id="3-1-é€†å‘ç›®æ ‡-2">3.1 é€†å‘ç›®æ ‡</h4>
<ul>
<li>é¦–é¡µï¼š<a target="_blank" rel="noopener" href="https://sh.esfxiaoqu.zhuge.com/page2/">https://sh.esfxiaoqu.zhuge.com/page2/</a></li>
<li>ç›®æ ‡ï¼šcookieï¼š<code>acw_sc__v2</code></li>
</ul>
<h4 id="3-2-é€†å‘åˆ†æ-2">3.2 é€†å‘åˆ†æ</h4>
<p>ç›´æ¥ç”¨ä»£ç å¸¦ä¸Šå‚æ•°è¯·æ±‚è¿™ä¸ªæ¥å£ï¼Œå‘ç°å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬æ•°æ®ï¼Œè€Œæ˜¯ç»™äº†ä¸€æ®µjsã€‚ä½†æ˜¯è¿™ä¸ªjså¯ä»¥æ˜æ˜¾çš„çœ‹åˆ°ï¼Œsetäº†ä¸€ä¸ªcookieï¼Œ<code>acw_sc__v2</code>ï¼Œæ¥ä¸‹æ¥å°±ç®€å•äº†ï¼Œç›´æ¥åˆ†æè¿™æ®µjså°±å¥½äº†</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282028071.png" alt="å›¾ç‰‡"></p>
<h5 id="3-2-2-JS-è°ƒè¯•åˆ†æ">3.2.2 JS è°ƒè¯•åˆ†æ</h5>
<ul>
<li>åœ¨æµè§ˆå™¨é‡Œé¢ç»™<code>arg2</code>ä¸‹ä¸ªæ–­ç‚¹è§‚å¯Ÿå¯¹åº”å‚æ•°</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031695.png" alt="image-20220824162743929"></p>
<ul>
<li>æ‰¾å‡ºå¯¹åº”çš„æ ¸å¿ƒä»£ç ï¼Œæ–¹ä¾¿åç»­çš„è°ƒè¯•</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282028847.png" alt="image-20220824162627614"></p>
<ul>
<li>è€è§„çŸ©ï¼Œè¿˜åŸå¯¹åº”çš„å‚æ•°å’Œé€»è¾‘</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031696.png" alt="image-20220824162919831"></p>
<h4 id="3-3-é€†å‘ç»“æœ">3.3 é€†å‘ç»“æœ</h4>
<h5 id="3-3-1-Jsè¿˜åŸ">3.3.1 Jsè¿˜åŸ</h5>
<ul>
<li>
<p>è¯¦ç»†ä»£ç è§ç™¾åº¦ç½‘ç›˜åœ°å€</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é“¾æ¥ï¼šhttps://pan.baidu.com/s/1u9eAfCp0FvLSOKA8YuWntw </span><br><span class="line">æå–ç ï¼š8pbx</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="3-3-2-pythonè¿˜åŸ">3.3.2 pythonè¿˜åŸ</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> execjs</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;https://sh.esfxiaoqu.zhuge.com/&#x27;</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Accept-Language&quot;</span>: <span class="string">&quot;zh-CN,zh;q=0.9&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Cache-Control&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;keep-alive&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Host&quot;</span>: <span class="string">&quot;sh.esfxiaoqu.zhuge.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Pragma&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua&quot;</span>: <span class="string">&quot;\&quot;Chromium\&quot;;v=\&quot;104\&quot;, \&quot; Not A;Brand\&quot;;v=\&quot;99\&quot;, \&quot;Google Chrome\&quot;;v=\&quot;104\&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua-mobile&quot;</span>: <span class="string">&quot;?0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sec-ch-ua-platform&quot;</span>: <span class="string">&quot;\&quot;Windows\&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Sec-Fetch-Dest&quot;</span>: <span class="string">&quot;document&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Sec-Fetch-Mode&quot;</span>: <span class="string">&quot;navigate&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Sec-Fetch-Site&quot;</span>: <span class="string">&quot;same-origin&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Sec-Fetch-User&quot;</span>: <span class="string">&quot;?1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Upgrade-Insecure-Requests&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_complete_cookie</span>():</span><br><span class="line">    complete_cookie = &#123;&#125;</span><br><span class="line">    <span class="comment"># ç¬¬ä¸€æ¬¡ä¸å¸¦å‚æ•°è®¿é—®é¦–é¡µï¼Œè·å– acw_tc å’Œ acw_sc__v2</span></span><br><span class="line">    response = requests.get(url=url, headers=headers)</span><br><span class="line">    complete_cookie.update(response.cookies.get_dict())</span><br><span class="line">    arg1 = re.findall(<span class="string">&quot;arg1=&#x27;(.*?)&#x27;&quot;</span>, response.text)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;tiaoshi.js&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        acw_sc_v2_js = f.read()</span><br><span class="line">    acw_sc__v2 = execjs.<span class="built_in">compile</span>(acw_sc_v2_js).call(<span class="string">&#x27;xl&#x27;</span>, arg1)</span><br><span class="line">    complete_cookie.update(&#123;<span class="string">&quot;acw_sc__v2&quot;</span>: acw_sc__v2&#125;)</span><br><span class="line">    <span class="comment"># ç¬¬äºŒæ¬¡è®¿é—®é¦–é¡µï¼Œè·å–å…¶ä»– cookies</span></span><br><span class="line">    response2 = requests.get(url=url, headers=headers, cookies=complete_cookie)</span><br><span class="line">    complete_cookie.update(response2.cookies.get_dict())</span><br><span class="line">    <span class="keyword">return</span> complete_cookie</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    complete_cookie = get_complete_cookie()</span><br></pre></td></tr></table></figure>
<h3 id="4-å·¥å…·ä½¿ç”¨">4 å·¥å…·ä½¿ç”¨</h3>
<p>ä½¿ç”¨ä¸€é”®obè¿˜åŸå·¥å…·ï¼Œå¯¹ä»£ç è¿›è¡Œå¤„ç†</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é“¾æ¥ï¼šhttps:<span class="regexp">//</span>pan.baidu.com<span class="regexp">/s/</span><span class="number">1</span>DXjOx_1B4CuzFFTwfB7Q-A </span><br><span class="line">æå–ç ï¼š<span class="number">1234</span></span><br></pre></td></tr></table></figure>
<ul>
<li>inputæ–‡ä»¶å¤¹ï¼Œ  å­˜æ”¾obæ··æ·†ä»£ç ;</li>
<li>outputæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾è¿˜åŸåçš„ä»£ç ;</li>
<li>tools,å­˜æ”¾æ‰“åŒ…çš„babelåº“ä»¥åŠéƒ¨åˆ†è¿˜åŸçš„ASTæ’ä»¶;</li>
<li>main.js  è¿è¡Œä¸»æ–‡ä»¶;</li>
</ul>
<p><strong>ä½¿ç”¨æ–¹å¼ï¼š</strong></p>
<p>åˆ‡æ¢åˆ° decodeObfuscator-main ç›®å½•ï¼Œå‘½ä»¤è¡Œæ¨¡å¼ä¸‹è¿è¡Œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node main.<span class="property">js</span></span><br></pre></td></tr></table></figure>
<h2 id="æ»‘å—éªŒè¯ç ">æ»‘å—éªŒè¯ç </h2>
<h3 id="1-æ»‘å—ç®€ä»‹">1. æ»‘å—ç®€ä»‹</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:/Users/XL/AppData/Roaming/Typora/typora-user-images/image-20220830221204749.png" alt="image-20220830221204749"></p>
<p>**æ³¨ï¼š**é‡ç‚¹æ˜¯è¯†åˆ«æ»‘å—ç¼ºå£ï¼Œæµ‹å‡ºéœ€è¦æ‹–åŠ¨çš„è·ç¦»</p>
<h4 id="1-1-æ ¸å¿ƒæ­¥éª¤">1.1 <strong>æ ¸å¿ƒæ­¥éª¤</strong></h4>
<ol>
<li>
<p>ä»æœåŠ¡å™¨éšæœºå–ä¸€å¼ å›¾ç‰‡ï¼Œå¹¶å¯¹å›¾ç‰‡ä¸Šçš„éšæœº<code>x,y</code>åæ ‡å’Œå®½é«˜ä¸€å—åŒºåŸŸæŠ å›¾ï¼›</p>
</li>
<li>
<p>æ ¹æ®æ­¥éª¤ä¸€çš„åæ ‡å’Œå®½é«˜ï¼Œä½¿ç”¨äºŒç»´æ•°ç»„ä¿å­˜åŸå›¾ä¸ŠæŠ å›¾åŒºåŸŸçš„åƒç´ ç‚¹åæ ‡ï¼›</p>
</li>
<li>
<p>æ ¹æ®æ­¥éª¤äºŒçš„åæ ‡ç‚¹ï¼Œå¯¹åŸå›¾çš„æŠ å›¾åŒºåŸŸçš„é¢œè‰²è¿›è¡Œå¤„ç†ã€‚</p>
</li>
<li>
<p>å®Œæˆä»¥ä¸Šæ­¥éª¤ä¹‹åå¾—åˆ°ä¸¤å¼ å›¾(æ‰£ä¸‹æ¥çš„æ–¹å—å›¾ï¼Œå¸¦æœ‰æŠ å›¾åŒºåŸŸé˜´å½±çš„åŸå›¾),å°†è¿™ä¸¤å¼ å›¾å’ŒæŠ å›¾åŒºåŸŸçš„yåæ ‡ä¼ åˆ°å‰å°ï¼Œå‰ç«¯åœ¨ç§»åŠ¨æ–¹å—éªŒè¯æ—¶ï¼Œå°†ç§»åŠ¨åçš„xåæ ‡ä¼ é€’åˆ°åå°ä¸åŸæ¥çš„xåæ ‡ä½œæ¯”è¾ƒï¼Œå¦‚æœåœ¨é˜ˆå€¼å†…åˆ™éªŒè¯é€šè¿‡ã€‚</p>
</li>
<li>
<p>è¯·æ±‚éªŒè¯çš„æ­¥éª¤ï¼šå‰å°å‘åå°å‘èµ·è¯·æ±‚ï¼Œåå°éšæœºä¸€å¼ å›¾ç‰‡åšå¤„ç†å°†å¤„ç†å®Œçš„ä¸¤å¼ å›¾ç‰‡çš„<code>base64</code>ï¼ŒæŠ å›¾yåæ ‡å’Œ<code>token</code>(tokenä¸ºåå°ç¼“å­˜éªŒè¯ç çš„å”¯ä¸€<code>token</code>,å¯ä»¥ç”¨ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜)è¿”å›ç»™å‰å°ã€‚</p>
</li>
<li>
<p>å‰å°æ»‘åŠ¨å›¾ç‰‡å°†<code>x</code>åæ ‡å’Œ<code>token</code>ä½œä¸ºå‚æ•°è¯·æ±‚åå°éªŒè¯ï¼ŒæœåŠ¡å™¨æ ¹æ®<code>token</code>å–å‡º<code>x</code>åæ ‡ä¸å‚æ•°çš„xè¿›è¡Œæ¯”è¾ƒã€‚</p>
</li>
</ol>
<h4 id="1-2-çªç ´è§„åˆ™">1.2 çªç ´è§„åˆ™</h4>
<p>è¿™ç±»éªŒè¯ç å¯ä»¥ä½¿ç”¨ <code>selenium</code> æ“ä½œæµè§ˆå™¨æ‹–æ‹½æ»‘å—æ¥è¿›è¡Œç ´è§£ï¼Œéš¾ç‚¹ä¸¤ä¸ªï¼Œä¸€ä¸ªå¦‚ä½•ç¡®å®šæ‹–æ‹½åˆ°çš„ä½ç½®ï¼Œå¦ä¸€ä¸ªæ˜¯é¿å¼€äººæœºè¯†åˆ«ï¼ˆåçˆ¬è™«ï¼‰ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆçœ‹çœ‹ï¼Œ<strong>ç¡®å®šæ»‘å—éªŒè¯ç éœ€è¦æ‹–æ‹½çš„ä½ç§»è·ç¦»</strong></p>
<p>æœ‰ä¸‰ç§æ–¹å¼</p>
<ul>
<li>äººå·¥æ™ºèƒ½æœºå™¨å­¦ä¹ ï¼Œç¡®å®šæ»‘å—ä½ç½®</li>
<li>é€šè¿‡å®Œæ•´å›¾ç‰‡ä¸ç¼ºå¤±æ»‘å—çš„å›¾ç‰‡è¿›è¡Œåƒç´ å¯¹æ¯”ï¼Œç¡®å®šæ»‘å—ä½ç½®</li>
<li>è¾¹ç¼˜æ£€æµ‹ç®—æ³•ï¼Œç¡®å®šä½ç½®</li>
</ul>
<p>å„æœ‰ä¼˜ç¼ºç‚¹ã€‚äººå·¥æ™ºèƒ½æœºå™¨å­¦ä¹ ï¼Œç¡®å®šæ»‘å—ä½ç½®ï¼Œéœ€è¦è¿›è¡Œè®­ç»ƒæ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸»è¦çœ‹åé¢ä¸¤ç§ã€‚</p>
<p><strong>å¯¹æ¯”å®Œæ•´å›¾ç‰‡ä¸ç¼ºå¤±æ»‘å—çš„å›¾ç‰‡</strong></p>
<h4 id="1-3-éªŒè¯ç å›¾ç‰‡å¤„ç†">1.3 éªŒè¯ç å›¾ç‰‡å¤„ç†</h4>
<ul>
<li>
<p>ç«™ç‚¹:<a target="_blank" rel="noopener" href="https://www.geetest.com/demo/">https://www.geetest.com/demo/</a></p>
</li>
<li>
<p>ä½¿ç”¨æµè§ˆå™¨æŠ€æœ¯æå–æ»‘å—å›¾ç‰‡ï¼Œè¿›è¡Œå¤„ç†</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æå–èƒŒæ™¯å›¾</span></span><br><span class="line">document.getElementsByClassName(<span class="string">&#x27;geetest_canvas_bg geetest_absolute&#x27;</span>)[<span class="number">0</span>].toDataURL(<span class="string">&#x27;image/png&#x27;</span>)</span><br><span class="line">document.getElementsByClassName(<span class="string">&#x27;geetest_canvas_fullbg geetest_fade geetest_absolute&#x27;</span>)[<span class="number">0</span>].toDataURL(<span class="string">&#x27;image/png&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿å­˜å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">import</span> base64,io</span><br><span class="line">images = q_qt.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">images = base64.b64decode(images)</span><br><span class="line">images = Image.<span class="built_in">open</span>(io.BytesIO(images))</span><br><span class="line">images.save(<span class="string">&#x27;q_qg.png&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="1-4-èƒŒæ™¯æ»‘å—è¯†åˆ«">1.4 èƒŒæ™¯æ»‘å—è¯†åˆ«</h4>
<ul>
<li>è¿™é‡Œä½¿ç”¨å¼€æºçš„æŠ€æœ¯<code>ddddocr</code>è¿›è¡Œæ»‘å—çš„è¯†åˆ«</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ddddocr</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">text_dis</span>():</span><br><span class="line">    slide = ddddocr.DdddOcr(det=<span class="literal">False</span>, ocr=<span class="literal">False</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;bg.png&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        target_bytes = f.read()</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;zg.png&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        background_bytes = f.read()</span><br><span class="line">    res = slide.slide_comparison(target_bytes, background_bytes)</span><br><span class="line">    <span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>
<h3 id="2-æéªŒæ»‘å—å®æˆ˜">2  æéªŒæ»‘å—å®æˆ˜</h3>
<ul>
<li>ä½¿ç”¨è‡ªåŠ¨åŒ–è¿‡æ»‘å—</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é“¾æ¥ï¼šhttps://pan.baidu.com/s/1zR2fIvO2iyC3esraWWYIvw </span><br><span class="line">æå–ç ï¼š<span class="number">1234</span></span><br></pre></td></tr></table></figure>
<h3 id="3-æ‰‹æ’•æ»‘å—">3 æ‰‹æ’•æ»‘å—</h3>
<h3 id="1ã€åº•å›¾è¿˜åŸ">1ã€åº•å›¾è¿˜åŸ</h3>
<p>ä¸‹ æ–­ç‚¹ï¼Œå¯ä»¥åˆ†æåº•å›¾è¿˜åŸé€»è¾‘</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:/Users/XL/AppData/Roaming/Typora/typora-user-images/image-20221219145010615.png" alt="image-20221219145010615"></p>
<h3 id="2ã€è·ŸWå€¼">2ã€è·ŸWå€¼</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Str</span>_Unicode=<span class="keyword">function</span>(<span class="params">str</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> unid=<span class="string">&#x27;\\u00&#x27;</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,len=str.<span class="property">length</span>;i&lt;len;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;len-<span class="number">1</span>)&#123;</span><br><span class="line">            unid+=str.<span class="title function_">charCodeAt</span>(i).<span class="title function_">toString</span>(<span class="number">16</span>)+<span class="string">&#x27;\\u00&#x27;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(i===len-<span class="number">1</span>)&#123;</span><br><span class="line">            unid+=str.<span class="title function_">charCodeAt</span>(i).<span class="title function_">toString</span>(<span class="number">16</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> unid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>JS</code>é‡Œé¢æ˜¯è¢«ç¼–ç çš„ï¼Œå¯ä»¥æŠŠWå€¼ç¼–ç ï¼Œè¿›è¡ŒæŸ¥æ‰¾ï¼Œåœ¨<code>JS</code>é‡Œé¢æœç´¢<code>u0077&quot;:</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> u = r[$_CAHJR(<span class="number">706</span>)]()</span><br><span class="line">, l = V[$_CAIAZ(<span class="number">339</span>)](pt[$_CAHJR(<span class="number">278</span>)](o), r[$_CAHJR(<span class="number">721</span>)]())</span><br><span class="line">, h = m[$_CAIAZ(<span class="number">769</span>)](l)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;w&quot;</span> =  h + u</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œè¾¹çš„<code>W</code>å€¼ä¸º <code>h+u</code>ï¼Œ å¯ä»¥æŒ‰ç…§é€»è¾‘æŒ¨ä¸ªå¤„ç†</p>
<h4 id="2-1-åˆ†æUç”Ÿæˆ">2.1 åˆ†æUç”Ÿæˆ</h4>
<h5 id="2-1-1-å¤„ç†æ˜æ–‡">2.1.1 å¤„ç†æ˜æ–‡</h5>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031697.png" alt="image-20221025164115542"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">65536</span> * (<span class="number">1</span> + <span class="title class_">Math</span>[$_BFBFy(<span class="number">14</span>)]()) | <span class="number">0</span>)[$_BFBFy(<span class="number">287</span>)](<span class="number">16</span>)[$_BFBEu(<span class="number">489</span>)](<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>å¯¹æ˜æ–‡è¿›è¡Œæ”¹å†™</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ne = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">t</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> ((<span class="number">1</span> + <span class="title class_">Math</span>[<span class="string">&quot;random&quot;</span>]()) * <span class="number">65536</span> | <span class="number">0</span>)[<span class="string">&quot;toString&quot;</span>](<span class="number">16</span>)[<span class="string">&quot;substring&quot;</span>](<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">t</span>() + <span class="title function_">t</span>() + <span class="title function_">t</span>() + <span class="title function_">t</span>();</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>
<h5 id="2-1-2-å¤„ç†åŠ å¯†æ–¹æ³•">2.1.2 å¤„ç†åŠ å¯†æ–¹æ³•</h5>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031933.png" alt="image-20221025171051774"></p>
<p>1ã€ å…¨å±€æ‰£ä»£ç å½¢å¼</p>
<ul>
<li>å¤åˆ¶æ‰€æœ‰çš„<code>JS</code>ä»£ç ï¼Œç„¶åä½¿ç”¨<code>xl</code>å¯¼å‡ºå…¨å±€<code>U</code>æ–¹æ³•</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title function_">U</span>()[$_CBGAZ(<span class="number">353</span>)](<span class="variable language_">this</span>[$_CBFJo(<span class="number">756</span>)](t))</span><br><span class="line"><span class="keyword">new</span> <span class="variable language_">window</span>.<span class="title function_">xl</span>()[<span class="string">&#x27;encrypt&#x27;</span>](<span class="string">&quot;293844e47865d090&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031932.png" alt="image-20221025193715106"></p>
<h4 id="2-2-åˆ†ælå€¼">2.2 åˆ†æ<code>l</code>å€¼</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">l = V[$_CAIAZ(<span class="number">339</span>)](pt[$_CAHJR(<span class="number">278</span>)](o), r[$_CAHJR(<span class="number">721</span>)]())</span><br></pre></td></tr></table></figure>
<p><strong>ç»è¿‡æ›¿æ¢å</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">l =   V[<span class="string">&#x27;encrypt&#x27;</span>](pt[<span class="string">&#x27;stringify&#x27;</span>](o), <span class="title function_">ne</span>())</span><br></pre></td></tr></table></figure>
<p><code>pt</code>è›®çŒœæ˜¯ä¸€ä¸ª<code>json</code>å¯¹è±¡ï¼Œå› ä¸ºéœ€è¦æŠŠ<code>JavaScript</code>å¯¹è±¡è½¬æˆ<code>json</code>å­—ç¬¦ä¸²ã€‚éœ€è¦å¤„ç†çš„æ˜¯<code>o</code>å€¼</p>
<h5 id="2-2-1-å¤„ç†oå€¼">2.2.1 å¤„ç†oå€¼</h5>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031937.png" alt="image-20221025201028843"></p>
<p>ç»è¿‡2æ¬¡æ¯”å¯¹ï¼Œå‘ç°æœ‰å‡ ä¸ªå€¼åœ¨å˜åŠ¨</p>
<h6 id="1ã€å…ˆå¤„ç†aaçš„å€¼"><strong>1ã€å…ˆå¤„ç†aaçš„å€¼</strong></h6>
<ul>
<li>å‘ç°åœ¨æœ€ä¸Šè¾¹è®¾ç½®çš„ã€è·³ç¬¬2ä¸ªæ ˆã€æŸ¥çœ‹ç¬¬2ä¸ªå‚æ•°</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031698.png" alt="image-20221025202751422"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">l =  n[<span class="string">&#x27;$_CICe&#x27;</span>][<span class="string">&#x27;$_BBES&#x27;</span>](n[<span class="string">&#x27;$_CICe&#x27;</span>][<span class="string">&#x27;$_GFJ&#x27;</span>](), n[<span class="string">&#x27;$_CJT&#x27;</span>][<span class="string">&#x27;c&#x27;</span>], n[<span class="string">&#x27;$_CJT&#x27;</span>][<span class="string">&#x27;s&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<p>å‘ç° <code>n['$_CICe']['$_BBES']</code>æ˜¯æ–¹æ³•ï¼Œéœ€è¦ä¼ é€’3ä¸ªå‚æ•°</p>
<ul>
<li><code>'g!).-,-(!!U(tsyyt(yyt()s)yvvs(!!(K92011120202019219$/*'</code></li>
<li><code>[12, 58, 98, 36, 43, 95, 62, 15, 12]</code></li>
<li><code>2a796138</code></li>
</ul>
<p>æ³¨ï¼šæŸ¥çœ‹<code>n['$_CJT']</code>å¯ä»¥å¾—å‡ºå2ä¸ªå€¼æ˜¯å›¾ç‰‡æ¥å£è·å–çš„</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031945.png" alt="image-20221025203736767"></p>
<p>è·Ÿæ ˆæŸ¥çœ‹ç¬¬ä¸€ä¸ªå€¼å¾—ç»“æœ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031763.png" alt="image-20221025210626852"></p>
<p>æ³¨ï¼šè¿™é‡Œé¢æ˜¯å¯¹è½¨è¿¹è¿›è¡ŒåŠ å¯†ï¼Œå¯ä»¥ä½¿ç”¨å…¨å±€å¯¼å‡ºåŠ å¯†è½¨è¿¹</p>
<p>å¾€ä¸Šè·Ÿå †æ ˆï¼Œä¿®æ”¹å‚æ•°å¯¼å‡ºï¼Œç„¶åå…¨å±€è°ƒç”¨</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031225.png" alt="image-20221026125933400"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031699.png" alt="image-20221026125943955"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">get_ps</span> = W[$_CJEZ(<span class="number">251</span>)][<span class="string">&quot;\u0024\u005f\u0047\u0046\u004a&quot;</span>]</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031700.png" alt="image-20221026130014756"></p>
<h6 id="2ã€å¤„ç†å…¶ä»–å€¼">2ã€å¤„ç†å…¶ä»–å€¼</h6>
<p>å‚æ•°åœ¨è¿™é‡Œç”Ÿæˆçš„ï¼Œå¯ä»¥è°ƒè¯•ç»“æœ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:/Users/XL/AppData/Roaming/Typora/typora-user-images/image-20221027174708000.png" alt="image-20221027174708000"></p>
<h6 id="4ã€å¤„ç†Lå€¼">4ã€å¤„ç†Lå€¼</h6>
<p>è¯¥å€¼éœ€è¦ä¼ å…¥2ä¸ªå‚æ•°è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆä¸€ä¸ªå¤§æ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è½¨è¿¹ä¿¡æ¯ï¼Œç¬¬2ä¸ªå‚æ•°æ˜¯éšæœºå¾—å€¼ï¼ŒåŠ å¯†å®Œæˆè¿”å›æ•°ç»„ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031885.png" alt="image-20221026144528623"></p>
<p>å¯ä»¥ç›´æ¥ä½¿ç”¨å…¨å±€å¯¼å‡º<code>V</code>æ–¹æ³•ï¼Œç„¶åç›´æ¥ä¼ å€¼å³å¯ï¼Œå¯¼å‡ºå¾—åœ°ç‚¹åœ¨Vå‡½æ•°å¤–è¾¹ï¼Œç„¶åè°ƒç”¨<code>'encrypt'</code>è¿™ä¸ªæ–¹æ³•ã€‚ç»“æœå¦‚ä¸‹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031916.png" alt="image-20221026145421348"></p>
<h4 id="2-3-åˆ†æhå€¼">2.3 åˆ†æ<code>h</code>å€¼</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h = m[$_CAIAZ(<span class="number">769</span>)](l)</span><br></pre></td></tr></table></figure>
<p>å¯¼å‡ºè¿™ä¸ªæ–¹æ³•</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031701.png" alt="image-20221026152730305"></p>
<p>åœ¨å‡½æ•°å¤–éƒ¨è¿›è¡Œå¯¼å‡º</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031549.png" alt="image-20221026152814459"></p>
<p>æ–¹æ³•è°ƒç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">get_h</span>(<span class="params"></span>)&#123;</span><br><span class="line">    h = <span class="variable language_">window</span>.<span class="property">h</span>[<span class="string">&quot;\u0024\u005f\u0047\u0047\u0063&quot;</span>](<span class="title function_">get_ls</span>())</span><br><span class="line">    <span class="keyword">return</span> h</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Wå€¼å¾—æœ€ç»ˆç»“æœ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031548.png" alt="image-20221026152938866"></p>
<h2 id="æ–‡æœ¬æ··æ·†ç« èŠ‚">æ–‡æœ¬æ··æ·†ç« èŠ‚</h2>
<h3 id="1-æ–‡æœ¬æ··æ·†ç®€ä»‹">1.  æ–‡æœ¬æ··æ·†ç®€ä»‹</h3>
<p>ç®€å•è€Œè¨€å°±æ˜¯åˆ©ç”¨å‰ç«¯æŠ€æœ¯å¹²æ‰°ï¼Œé¡µé¢å¯ä»¥æ­£å¸¸å±•ç¤ºï¼Œè€Œä½¿ç”¨çˆ¬è™«ä¸‹è½½åæ— æ³•æå–æ­£å¸¸çš„æ•°æ®ã€‚</p>
<h4 id="1-1-å¸¸è§çš„å¹²æ‰°æ–¹å¼">1.1 å¸¸è§çš„å¹²æ‰°æ–¹å¼</h4>
<ul>
<li>å­—ä½“åçˆ¬</li>
</ul>
<h3 id="2-å­—ä½“åçˆ¬">2. å­—ä½“åçˆ¬</h3>
<h4 id="2-1-å­—ä½“åçˆ¬ç®€ä»‹">2.1 å­—ä½“åçˆ¬ç®€ä»‹</h4>
<p>â€‹		åœ¨ <code>CSS3 </code>ä¹‹å‰ï¼Œ<code>Web</code> å¼€å‘è€…å¿…é¡»ä½¿ç”¨ç”¨æˆ·è®¡ç®—æœºä¸Šå·²æœ‰çš„å­—ä½“ã€‚ç›®å‰çš„æŠ€æœ¯å¼€å‘è€…å¯ä»¥ä½¿ç”¨<code>@font-face</code>ä¸ºç½‘é¡µæŒ‡å®šå­—ä½“ï¼Œå¼€å‘è€…å¯å°†å¿ƒä»ªçš„å­—ä½“æ–‡ä»¶æ”¾åœ¨ Web æœåŠ¡å™¨ä¸Šï¼Œå¹¶åœ¨<code> CSS</code> æ ·å¼ä¸­ä½¿ç”¨å®ƒã€‚ç”¨æˆ·ä½¿ç”¨æµè§ˆå™¨è®¿é—® <code>Webåº”ç”¨</code>æ—¶ï¼Œå¯¹åº”çš„å­—ä½“ä¼šè¢«æµè§ˆå™¨ä¸‹è½½åˆ°ç”¨æˆ·çš„è®¡ç®—æœºä¸Šã€‚</p>
<p>**æ³¨ï¼š**ä½¿ç”¨è‡ªåŠ¨åŒ–<code>selenium</code>ä¹Ÿæ— æ³•è·å–æ­£å¸¸çš„æ•°æ®</p>
<h3 id="3-æŸä¹ å­—ä½“åçˆ¬å®è·µ">3.  æŸä¹ å­—ä½“åçˆ¬å®è·µ</h3>
<h4 id="3-1-é€†å‘ç›®æ ‡-3">3.1 é€†å‘ç›®æ ‡</h4>
<ul>
<li>é¦–é¡µï¼š<a target="_blank" rel="noopener" href="https://www.shixiseng.com/">https://www.shixiseng.com/</a></li>
<li>ç›®æ ‡ï¼š<a target="_blank" rel="noopener" href="https://www.shixiseng.com/interns?keyword=%E4%BA%A7%E5%93%81&amp;city=%E5%85%A8%E5%9B%BD&amp;type=intern&amp;from=menu">https://www.shixiseng.com/interns?keyword=äº§å“&amp;city=å…¨å›½&amp;type=intern&amp;from=menu</a></li>
<li>é€†å‘ï¼šè–ªé…¬å­—ä½“</li>
</ul>
<h4 id="3-2-é€†å‘åˆ†æ-3">3.2 é€†å‘åˆ†æ</h4>
<h5 id="3-2-1-ç½‘é¡µåˆ†æ">3.2.1 ç½‘é¡µåˆ†æ</h5>
<ul>
<li>æ‰“å¼€ç½‘ç«™å¯ä»¥å‘ç°ï¼Œä»·æ ¼çš„å­—ä½“æ˜¯ä¹±ç </li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031702.png" alt="image-20220830135453763"></p>
<h5 id="3-2-2-é¡µé¢å¤„ç†">3.2.2 é¡µé¢å¤„ç†</h5>
<ul>
<li>åœ¨é¡µé¢æºä»£ç ä¸­æœç´¢<code>font-face</code>å…³é”®å­—ï¼Œå¯ä»¥å‘ç°å­—ä½“æ–‡ä»¶åœ¨ç½‘é¡µæºä»£ç ä¸­</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031703.png" alt="image-20220830140449959"></p>
<ul>
<li>
<p>å¯ä»¥åœ¨ç½‘ç»œæŠ“åŒ…é‡Œé¢è¿›è¡Œç­›é€‰ï¼Œå¯ä»¥å‘ç°è¿™é‡Œé¢æœ‰å¯¹åº”çš„å­—ä½“æ–‡ä»¶åŠ è½½åœ°å€ï¼Œç”±åç«¯è¿”å›</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031873.png" alt="image-20220830140631194"></p>
</li>
<li>
<p>å¯¹äºå­—ä½“æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å·¥å…·è§£æ</p>
<ul>
<li>åœ¨çº¿åœ°å€ï¼š<a target="_blank" rel="noopener" href="http://font.qqe2.com/">http://font.qqe2.com/</a>
<ul>
<li>ä½¿ç”¨æ–¹å¼:
<ul>
<li>ä¸‹è½½å­—ä½“æ–‡ä»¶åˆ°æœ¬åœ°ç›®å½•</li>
<li>è®¿é—®åœ¨çº¿å·¥å…·ç½‘ç«™ï¼Œç‚¹å‡»å·¦ä¸Šè§’æ‰“å¼€ï¼Œæ‰¾åˆ°æœ¬åœ°ç›®å½•å­—ä½“æ–‡ä»¶å³å¯</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031874.png" alt="image-20220830141035825"></p>
<h5 id="3-3-3-å­—ä½“åˆ†æ">3.3.3 å­—ä½“åˆ†æ</h5>
<p>æ­£å¸¸åœ¨ç½‘é¡µé‡Œé¢å±•ç¤ºçš„è–ªé…¬æ˜¯ï¼š<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031704.png" alt="image-20220830141940433"></p>
<ul>
<li>ä¸‹è½½åçš„é¡µé¢å…ƒç´ </li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031881.png" alt="image-20220830141754024"></p>
<ul>
<li>
<p>è§£æçš„å­—ä½“æ–‡ä»¶</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031705.png" alt="image-20220830141835755"></p>
</li>
<li>
<p><code>woff</code>æ–‡ä»¶è½¬åŒ–æˆ<code>xml</code>æ–‡ä»¶è¿›è¡Œåˆ†æ <code>cmap</code>æ˜¯å…³é”® åŸæ¥æ˜¯<code>unicode</code>ç </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031811.png" alt="image-20220830153625467"></p>
</li>
</ul>
<h4 id="3-3-é€†å‘ç»“æœ-2">3.3 é€†å‘ç»“æœ</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031706.png" alt="image-20220830153726609"></p>
<h5 id="3-3-1-å®Œæ•´code">3.3.1 å®Œæ•´code</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Sxs</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.headers = &#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.96 Safari/537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_html</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># ç¬¬1æ­¥ï¼šè·å–htmlï¼Œä¸”å­˜ä¸ºhtmlæ–‡ä»¶ä»¥ä¾¿åé¢ç ”ç©¶ä½¿ç”¨</span></span><br><span class="line">        url = <span class="string">&#x27;https://www.shixiseng.com/interns?keyword=%E4%BA%A7%E5%93%81&amp;city=%E5%85%A8%E5%9B%BD&amp;type=intern&amp;from=menu&#x27;</span></span><br><span class="line">        ret = requests.get(url=url, headers=<span class="variable language_">self</span>.headers).text</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;index.html&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(ret)</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_font</span>(<span class="params">self,ret</span>):</span><br><span class="line">        <span class="comment"># ç¬¬2æ­¥ï¼šä¸‹è½½htmlé…å¥—çš„ttfæ–‡ä»¶</span></span><br><span class="line">        font_url = re.findall(<span class="string">&#x27;src: url\((.*?)\);&#x27;</span>, ret)</span><br><span class="line">        f_url = <span class="string">&#x27;https://www.shixiseng.com&#x27;</span> + font_url[<span class="number">0</span>] <span class="keyword">if</span> font_url <span class="keyword">else</span> font_url</span><br><span class="line">        font_data = requests.get(f_url)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;file.woff&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(font_data.content)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_font_data</span>(<span class="params">self,ttf</span>):</span><br><span class="line">        font_dict = &#123;&#125;</span><br><span class="line">        <span class="comment"># font = TTFont(&quot;file.woff&quot;)</span></span><br><span class="line">        font = TTFont(ttf)</span><br><span class="line">        cmap = font.get(<span class="string">&quot;cmap&quot;</span>).getBestCmap()</span><br><span class="line">        <span class="keyword">for</span> k, v <span class="keyword">in</span> cmap.items():</span><br><span class="line">            <span class="keyword">if</span> v[<span class="number">3</span>:]:</span><br><span class="line">                content = <span class="string">&quot;\\u00&quot;</span> + v[<span class="number">3</span>:] <span class="keyword">if</span> <span class="built_in">len</span>(v[<span class="number">3</span>:]) == <span class="number">2</span> <span class="keyword">else</span> <span class="string">&quot;\\u&quot;</span> + v[<span class="number">3</span>:]</span><br><span class="line">                real_content = content.encode(<span class="string">&#x27;utf-8&#x27;</span>).decode(<span class="string">&#x27;unicode_escape&#x27;</span>)</span><br><span class="line">                k_hex = <span class="built_in">hex</span>(k)</span><br><span class="line">                <span class="comment"># ç½‘é¡µè¿”å›çš„å­—ä½“æ˜¯ä»¥&amp;#xå¼€å¤´  ï¼Œæ¢æˆä»¥è¿™ä¸ªå¼€å¤´ï¼Œä¸‹é¢ä»£ç å°±æ˜¯ç›´æ¥æ›¿æ¢</span></span><br><span class="line">                real_k = k_hex.replace(<span class="string">&quot;0x&quot;</span>, <span class="string">&quot;&amp;#x&quot;</span>)</span><br><span class="line">                font_dict[real_k] = real_content</span><br><span class="line">        <span class="keyword">return</span> font_dict</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">put_html</span>(<span class="params">self,ttf_dict</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;index.html&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            html = f.read()</span><br><span class="line">            <span class="keyword">for</span> k, v <span class="keyword">in</span> ttf_dict.items():</span><br><span class="line">                html = html.replace(k, v)</span><br><span class="line">            <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_data</span>(<span class="params">self,html</span>):</span><br><span class="line">        html = etree.HTML(html)</span><br><span class="line">        li_list = html.xpath(<span class="string">&quot;//div[@class=&#x27;intern-wrap intern-item&#x27;]&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> li <span class="keyword">in</span> li_list:</span><br><span class="line">            title = <span class="string">&quot;&quot;</span>.join(li.xpath(<span class="string">&quot;.//div[@class=&#x27;f-l intern-detail__job&#x27;]//a/text()&quot;</span>)[<span class="number">0</span>].split())</span><br><span class="line">            price = <span class="string">&quot;&quot;</span>.join( li.xpath(<span class="string">&quot;.//div[@class=&#x27;f-l intern-detail__job&#x27;]//span[@class=&#x27;day font&#x27;]/text()&quot;</span>)[<span class="number">0</span>].split())</span><br><span class="line">            name = li.xpath(<span class="string">&#x27;.//a[@class=&quot;title ellipsis&quot;]/text()&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">            <span class="built_in">print</span>(title, price,name)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># ç¬¬1æ­¥ï¼šè·å–htmlï¼Œä¸”å­˜ä¸ºhtmlæ–‡ä»¶ä»¥ä¾¿åé¢ç ”ç©¶ä½¿ç”¨</span></span><br><span class="line">        ret = <span class="variable language_">self</span>.get_html()</span><br><span class="line">        <span class="comment"># ç¬¬2æ­¥ï¼šä¸‹è½½htmlé…å¥—çš„ttfæ–‡ä»¶</span></span><br><span class="line">        <span class="variable language_">self</span>.get_font(ret)</span><br><span class="line">        <span class="comment"># ç¬¬3æ­¥ï¼šæå–ttfä¸­æ‘„å½±çš„æ•°æ®</span></span><br><span class="line">        font_dict = <span class="variable language_">self</span>.get_font_data(<span class="string">&#x27;file.woff&#x27;</span>)</span><br><span class="line">        <span class="comment"># ç¬¬4æ­¥ï¼šå¯¹ä¸‹è½½ï¼ˆHTMLå†…å®¹ï¼‰è¿›è¡Œæ›¿æ¢</span></span><br><span class="line">        html = <span class="variable language_">self</span>.put_html(font_dict)</span><br><span class="line">        <span class="comment"># ç¬¬5æ­¥ï¼šä½¿ç”¨xpathæå–æƒ³è¦çš„æ•°æ®</span></span><br><span class="line">        data = <span class="variable language_">self</span>.get_data(html)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    Sxs().main()</span><br></pre></td></tr></table></figure>
<h3 id="4-å­—ä½“è§£æå·¥å…·">4. å­—ä½“è§£æå·¥å…·</h3>
<p><strong>å­—ä½“è¯»å–å·¥å…·</strong></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é“¾æ¥ï¼šhttps:<span class="regexp">//</span>pan.baidu.com<span class="regexp">/s/</span><span class="number">1</span>c57IHzTN0aPVgIO5NMq3OA </span><br><span class="line">æå–ç ï¼š<span class="number">1234</span></span><br></pre></td></tr></table></figure>
<p><strong>4.1 å·¥å…·å®‰è£…</strong></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">install</span> fontTools  <span class="comment"># ä½¿ç”¨è¿™ä¸ªåŒ…å¤„ç†å­—ä½“æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>
<h4 id="4-2-å­—ä½“è¯»å–">4.2 å­—ä½“è¯»å–</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fontTools.ttLib <span class="keyword">import</span> TTFont</span><br><span class="line"><span class="comment"># åŠ è½½å­—ä½“æ–‡ä»¶ï¼š</span></span><br><span class="line">font = TTFont(<span class="string">&#x27;file.woff&#x27;</span>)</span><br><span class="line"><span class="comment"># è½¬ä¸ºxmlæ–‡ä»¶ï¼š</span></span><br><span class="line">font.saveXML(<span class="string">&#x27;file.xml&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="4-3-èŠ‚ç‚¹è¯»å–">4.3 èŠ‚ç‚¹è¯»å–</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fontTools.ttLib <span class="keyword">import</span> TTFont</span><br><span class="line"><span class="comment"># åŠ è½½å­—ä½“æ–‡ä»¶ï¼š</span></span><br><span class="line">font = TTFont(<span class="string">&#x27;file.woff&#x27;</span>)</span><br><span class="line">kv = font.keys()</span><br><span class="line"><span class="built_in">print</span>(kv)</span><br></pre></td></tr></table></figure>
<p>å­—ä½“æ–‡ä»¶ä¸ä»…åŒ…å«å­—å½¢æ•°æ®å’Œç‚¹ä¿¡æ¯ï¼Œè¿˜åŒ…æ‹¬å­—ç¬¦åˆ°å­—å½¢æ˜ å°„ã€å­—ä½“æ ‡é¢˜ã€å‘½åå’Œæ°´å¹³æŒ‡æ ‡ç­‰ï¼Œè¿™äº›ä¿¡æ¯å­˜åœ¨å¯¹åº”çš„è¡¨ä¸­ï¼š</p>
<table>
<thead>
<tr>
<th>è¡¨</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>cmap</td>
<td>å­—ç¬¦åˆ°å­—å½¢æ˜ å°„</td>
</tr>
<tr>
<td>glyf</td>
<td>å­—å½¢æ•°æ®</td>
</tr>
<tr>
<td>head</td>
<td>å­—ä½“æ ‡é¢˜</td>
</tr>
<tr>
<td>hhea</td>
<td>æ°´å¹³æ ‡é¢˜</td>
</tr>
<tr>
<td>hmtx</td>
<td>æ°´å¹³æŒ‡æ ‡</td>
</tr>
<tr>
<td>loca</td>
<td>ç´¢å¼•åˆ°ä½ç½®</td>
</tr>
<tr>
<td>maxp</td>
<td>æœ€å¤§é™åº¦çš„</td>
</tr>
<tr>
<td>name</td>
<td>å‘½å</td>
</tr>
<tr>
<td>post</td>
<td>åè®°</td>
</tr>
</tbody>
</table>
<h4 id="4-4-è·å–è¯·æ±‚åˆ°çš„å­—ä½“codeå’Œnameçš„å¯¹åº”å…³ç³»">4.4 è·å–è¯·æ±‚åˆ°çš„å­—ä½“codeå’Œnameçš„å¯¹åº”å…³ç³»</h4>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">code_name_map</span> = font_aa.getBestCmap()</span><br></pre></td></tr></table></figure>
<h4 id="4-5-è·å–å­—ä½“åæ ‡ä¿¡æ¯">4.5 è·å–å­—ä½“åæ ‡ä¿¡æ¯</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">font_aa = TTFont(<span class="string">&#x27;file.woff&#x27;</span>)</span><br><span class="line"><span class="comment"># è·å–è¯·æ±‚åˆ°çš„å­—ä½“å½¢çŠ¶</span></span><br><span class="line">glyf = font_aa[<span class="string">&#x27;glyf&#x27;</span>]</span><br><span class="line"><span class="comment">#font[&#x27;glyf&#x27;][å­—ä½“ç¼–ç ].coordinates</span></span><br><span class="line">font_aa[<span class="string">&#x27;glyf&#x27;</span>][<span class="string">&#x27;uni4E94&#x27;</span>].coordinates</span><br></pre></td></tr></table></figure>
<h3 id="5-æŸè½¦å­—ä½“åçˆ¬">5. æŸè½¦å­—ä½“åçˆ¬</h3>
<h4 id="5-1-é€†å‘ç›®æ ‡">5.1 é€†å‘ç›®æ ‡</h4>
<ul>
<li>é¦–é¡µï¼š<a target="_blank" rel="noopener" href="https://www.renrenche.com/">https://www.renrenche.com/</a></li>
<li>ç›®æ ‡ï¼š<a target="_blank" rel="noopener" href="https://www.renrenche.com/bj/ershouche/p2/?&amp;plog_id=838083390d4b077a45852d11065f60ad">https://www.renrenche.com/bj/ershouche/p2/?&amp;plog_id=838083390d4b077a45852d11065f60ad</a></li>
<li>é€†å‘ï¼šæ ‡é¢˜å­—ä½“</li>
</ul>
<h4 id="5-2-é€†å‘åˆ†æ">5.2 é€†å‘åˆ†æ</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031707.png" alt="image-20220830164839285"></p>
<ul>
<li>
<p>æ‰“å¼€ç½‘é¡µæºä»£ç æœç´¢<code>font-face</code>,æŸ¥æ‰¾å­—ä½“æ–‡ä»¶</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031708.png" alt="image-20220830165032274"></p>
</li>
<li>
<p>åˆ†æå­—å½¢å…³ç³»</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282031520.png" alt="image-20220830165555789"></p>
</li>
</ul>
<h5 id="5-2-1-åŸå­—å½¢è¿˜åŸ">5.2.1 åŸå­—å½¢è¿˜åŸ</h5>
<p>è¯·æ±‚å­—ä½“é“¾æ¥ï¼Œè·å–å­—ä½“codeå’Œnameçš„å¯¹åº”å…³ç³»ï¼Œç„¶åéå†ï¼Œè·å–ç½‘é¡µä¸­åçˆ¬æ–‡å­—çš„çœŸå®æ–‡å­—ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">relation_table = &#123;<span class="string">&quot;zero&quot;</span>: <span class="string">&quot;0&quot;</span>, <span class="string">&quot;one&quot;</span>: <span class="string">&quot;1&quot;</span>, <span class="string">&quot;two&quot;</span>: <span class="string">&quot;2&quot;</span>, <span class="string">&quot;three&quot;</span>: <span class="string">&quot;3&quot;</span>, <span class="string">&quot;four&quot;</span>: <span class="string">&quot;4&quot;</span>, <span class="string">&quot;five&quot;</span>: <span class="string">&quot;5&quot;</span>, <span class="string">&quot;seven&quot;</span>: <span class="string">&quot;6&quot;</span>,<span class="string">&quot;eight&quot;</span>: <span class="string">&quot;7&quot;</span>, <span class="string">&quot;six&quot;</span>: <span class="string">&quot;8&quot;</span>, <span class="string">&quot;nine&quot;</span>: <span class="string">&quot;9&quot;</span>&#125;</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">woff_font</span>(<span class="params">font_url</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;è·å–å­—ä½“çœŸå®å¯¹åº”å…³ç³»&#x27;&#x27;&#x27;</span></span><br><span class="line">    newmap = &#123;&#125;</span><br><span class="line">    resp = session.get(font_url)  <span class="comment"># è¯·æ±‚å­—ä½“é“¾æ¥</span></span><br><span class="line">    woff_data = BytesIO(resp.content)</span><br><span class="line">    font = TTFont(woff_data)  <span class="comment"># è¯»å–woffæ•°æ®</span></span><br><span class="line">    cmap = font.getBestCmap()  <span class="comment"># è·å–å­—ä½“å¯¹åº”å…³ç³»</span></span><br><span class="line">    font.close()</span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> cmap.items():</span><br><span class="line">        value = v</span><br><span class="line">        key = <span class="built_in">str</span>(k - <span class="number">48</span>)  <span class="comment"># è·å–çœŸå®çš„key</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            get_real_data = relation_table[value]</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            get_real_data = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> get_real_data != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">            newmap[key] = get_real_data  <span class="comment"># å°†å­—ä½“çœŸå®ç»“æœå¯¹åº”</span></span><br><span class="line">    <span class="keyword">return</span> newmap</span><br></pre></td></tr></table></figure>
<h4 id="5-3-é€†å‘ä»£ç ">5.3 é€†å‘ä»£ç </h4>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é“¾æ¥ï¼šhttps:<span class="regexp">//</span>pan.baidu.com<span class="regexp">/s/</span><span class="number">1</span>uhqLb7pVkRjgHlwwMxEJVA </span><br><span class="line">æå–ç ï¼š<span class="number">1234</span></span><br></pre></td></tr></table></figure>
<h2 id="Scrapyé‡‡é›†æ¡†æ¶"><code>Scrapy</code>é‡‡é›†æ¡†æ¶</h2>
<h2 id="1-å­¦ä¹ ç›®æ ‡">1 å­¦ä¹ ç›®æ ‡</h2>
<p>1ã€æ¡†æ¶æµç¨‹å’Œç»“æ„è®¾è®¡åŸç†</p>
<p>2ã€æ¡†æ¶çˆ¬è™«ç¨‹åºç¼–å†™</p>
<p>3ã€æ¡†æ¶æ—¥å¿—æ¨¡å—ä½¿ç”¨</p>
<p>4ã€æ¡†æ¶è¯·æ±‚å‘é€æµç¨‹</p>
<h2 id="2-scrapyç®€ä»‹">2 <code>scrapy</code>ç®€ä»‹</h2>
<p>â€‹		<code>Scrapy</code>æ˜¯ç”¨çº¯<code>Python</code>å®ç°ä¸€ä¸ªä¸ºäº†çˆ¬å–ç½‘ç«™æ•°æ®ã€æå–ç»“æ„æ€§æ•°æ®è€Œç¼–å†™çš„åº”ç”¨æ¡†æ¶ï¼Œç”¨é€”éå¸¸å¹¿æ³›ï¼Œç”¨æˆ·åªéœ€è¦å®šåˆ¶å¼€å‘å‡ ä¸ªæ¨¡å—å°±å¯ä»¥è½»æ¾çš„å®ç°ä¸€ä¸ªçˆ¬è™«ï¼Œç”¨æ¥æŠ“å–ç½‘é¡µå†…å®¹ä»¥åŠå„ç§å›¾ç‰‡ï¼Œéå¸¸ä¹‹æ–¹ä¾¿ã€‚</p>
<h3 id="2-0-å•ä¸ªçˆ¬è™«ç¼–å†™">2.0 å•ä¸ªçˆ¬è™«ç¼–å†™</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Spider</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># è´Ÿè´£å…¨å±€é…ç½®</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">url_list</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># è´Ÿè´£ä»»åŠ¡æ± ç»´æŠ¤</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">request</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># è´Ÿè´£ç½‘ç»œè¯·æ±‚æ¨¡å—</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># è´Ÿè´£è§£ææ•°æ®æ¨¡å—</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># è´Ÿè´£æ•°æ®å­˜å‚¨</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># è´Ÿè´£æ¨¡å—è°ƒåº¦</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h3 id="2-1-æ¶æ„ä»‹ç»">2.1 æ¶æ„ä»‹ç»</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282033187.png" alt=""></p>
<h4 id="2-2-1-åè¯è§£æ">2.2.1 åè¯è§£æ</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282033196.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h4 id="2-2-2-è¿è¡Œé€»è¾‘å›¾">2.2.2 è¿è¡Œé€»è¾‘å›¾</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282033631.png" alt="image-20220908143553410"></p>
<h2 id="3-æ¡†æ¶ä½¿ç”¨">3 æ¡†æ¶ä½¿ç”¨</h2>
<h3 id="3-1-é¡¹ç›®æ­å»º">3.1 é¡¹ç›®æ­å»º</h3>
<h4 id="3-1-1-æ¡†æ¶å®‰è£…">3.1.1 æ¡†æ¶å®‰è£…</h4>
<p>æŸ¥æ‰¾å†å²ç‰ˆæœ¬ï¼š<a target="_blank" rel="noopener" href="https://pypi.org/project/Scrapy/#history">https://pypi.org/project/Scrapy/#history</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install scrapy==<span class="number">2.3</span><span class="number">.0</span> -i æ¸…åæº</span><br></pre></td></tr></table></figure>
<h4 id="3-1-2-é¡¹ç›®åˆ›å»º">3.1.2  é¡¹ç›®åˆ›å»º</h4>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">scrapy 2.3.0 - no active project</span><br><span class="line"></span><br><span class="line">usage:</span><br><span class="line">  scrapy &lt;command&gt;[options] [args]</span><br><span class="line"></span><br><span class="line">Available commands :</span><br><span class="line">  bench      Run quick benchmark test #æµ‹è¯•ç”µè„‘æ€§èƒ½</span><br><span class="line">  fetch      Fetch a URL using the scrapy down1oader#å°†æºä»£ç ä¸‹è½½ä¸‹æ¥å¹¶æ˜¾ç¤ºå‡ºæ¥</span><br><span class="line">  genspider      Generate new spider using pre-defined temp1ates#åˆ›å»ºä¸€ä¸ªæ–°çš„spideræ–‡ä»¶</span><br><span class="line">  runspider      Run a self-contained spider (without creating a project)# è¿™ä¸ªå’Œé€šè¿‡craw1å¯åŠ¨çˆ¬è™«ä¸åŒï¼Œscrapy runspiderçˆ¬è™«æ–‡ä»¶åç§°</span><br><span class="line">  settings      Get settings values#è·å–å½“å‰çš„é…ç½®ä¿¡æ¯</span><br><span class="line">  she11      Interactive scraping console#è¿›å…¥scrapy çš„äº¤äº’æ¨¡å¼</span><br><span class="line">  startproject      create new project#åˆ›å»ºçˆ¬è™«é¡¹ç›®</span><br><span class="line">  version      Print scrapy version#æ˜¾ç¤ºscrapyæ¡†æ¶çš„ç‰ˆæœ¬</span><br><span class="line">  view      open URL in browserï¼Œas seen by scrapy#å°†ç½‘é¡µdocumentå†…å®¹ä¸‹è½½ä¸‹æ¥ï¼Œå¹¶ä¸”åœ¨æµè§ˆå™¨æ˜¾ç¤ºå‡ºæ¥</span><br></pre></td></tr></table></figure>
<p><strong>é¡¹ç›®åˆ›å»º</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject ps</span><br></pre></td></tr></table></figure>
<p><strong>æ–‡ä»¶ä»‹ç»</strong></p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>scrapy.cfgï¼šå®ƒæ˜¯ Scrapy é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œå…¶å†…å®šä¹‰äº†é¡¹ç›®çš„é…ç½®æ–‡ä»¶è·¯å¾„ã€éƒ¨ç½²ç›¸å…³ä¿¡æ¯ç­‰å†…å®¹ã€‚</span><br><span class="line"><span class="bullet">- </span>items.pyï¼šå®ƒå®šä¹‰ Item æ•°æ®ç»“æ„ï¼Œæ‰€æœ‰çš„ Item çš„å®šä¹‰éƒ½å¯ä»¥æ”¾è¿™é‡Œã€‚</span><br><span class="line"><span class="bullet">- </span>pipelines.pyï¼šå®ƒå®šä¹‰ Item Pipeline çš„å®ç°ï¼Œæ‰€æœ‰çš„ Item Pipeline çš„å®ç°éƒ½å¯ä»¥æ”¾è¿™é‡Œã€‚</span><br><span class="line"><span class="bullet">- </span>settings.pyï¼šå®ƒå®šä¹‰é¡¹ç›®çš„å…¨å±€é…ç½®ã€‚</span><br><span class="line"><span class="bullet">- </span>middlewares.pyï¼šå®ƒå®šä¹‰ Spider Middlewares å’Œ Downloader Middlewares çš„å®ç°ã€‚</span><br><span class="line"><span class="bullet">- </span>spidersï¼šå…¶å†…åŒ…å«ä¸€ä¸ªä¸ª Spider çš„å®ç°ï¼Œæ¯ä¸ª Spider éƒ½æœ‰ä¸€ä¸ªæ–‡ä»¶ã€‚</span><br></pre></td></tr></table></figure>
<h2 id=""></h2>
<h4 id="3-1-3-åˆ›å»ºçˆ¬è™«">3.1.3 åˆ›å»ºçˆ¬è™«</h4>
<p>â€‹		<code>Spider</code> æ˜¯è‡ªå·±å®šä¹‰çš„ç±»ï¼Œ<code>Scrapy</code> ç”¨å®ƒæ¥ä»ç½‘é¡µé‡ŒæŠ“å–å†…å®¹ï¼Œå¹¶è§£ææŠ“å–çš„ç»“æœã€‚ä¸è¿‡è¿™ä¸ªç±»å¿…é¡»ç»§æ‰¿ <code>Scrapy</code> æä¾›çš„ <code>Spider</code> ç±» <code>scrapy.Spider</code>ï¼Œè¿˜è¦å®šä¹‰ <code>Spider</code> çš„åç§°å’Œèµ·å§‹è¯·æ±‚ï¼Œä»¥åŠæ€æ ·å¤„ç†çˆ¬å–åçš„ç»“æœçš„æ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd é¡¹ç›®è·¯å¾„</span><br><span class="line">scrapy genspider  çˆ¬è™«åç§°  ç›®æ ‡åœ°å€</span><br></pre></td></tr></table></figure>
<p><strong>é…ç½®æ–‡ä»¶ç®€ä»‹</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Scrapy settings for ScrapyDemo project</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®ï¼Œæ— éœ€å…³æ³¨ï¼Œä¸ç”¨ä¿®æ”¹</span></span><br><span class="line">BOT_NAME = <span class="string">&#x27;ScrapyDemo&#x27;</span></span><br><span class="line">SPIDER_MODULES = [<span class="string">&#x27;ScrapyDemo.spiders&#x27;</span>]</span><br><span class="line">NEWSPIDER_MODULE = <span class="string">&#x27;ScrapyDemo.spiders&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®UAï¼Œä½†ä¸å¸¸ç”¨ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨MiddleWareä¸­æ·»åŠ </span></span><br><span class="line">USER_AGENT = <span class="string">&#x27;ScrapyDemo (+http://www.yourdomain.com)&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># éµå¾ªrobots.txtä¸­çš„çˆ¬è™«è§„åˆ™ï¼Œå¾ˆå¤šäººå–œæ¬¢Falseï¼Œå½“ç„¶æˆ‘ä¹Ÿå–œæ¬¢....</span></span><br><span class="line">ROBOTSTXT_OBEY = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹ç½‘ç«™å¹¶å‘è¯·æ±‚æ€»æ•°ï¼Œé»˜è®¤16</span></span><br><span class="line">CONCURRENT_REQUESTS = <span class="number">32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›¸åŒç½‘ç«™ä¸¤ä¸ªè¯·æ±‚ä¹‹é—´çš„é—´éš”æ—¶é—´ï¼Œé»˜è®¤æ˜¯0sã€‚ç›¸å½“äºtime.sleep()</span></span><br><span class="line">DOWNLOAD_DELAY = <span class="number">3</span></span><br><span class="line"><span class="comment"># ä¸‹é¢ä¸¤ä¸ªé…ç½®äºŒé€‰ä¸€ï¼Œä½†å…¶å€¼ä¸èƒ½å¤§äºCONCURRENT_REQUESTSï¼Œé»˜è®¤å¯ç”¨PER_DOMAIN</span></span><br><span class="line"><span class="comment"># å¯¹ç½‘ç«™æ¯ä¸ªåŸŸåçš„æœ€å¤§å¹¶å‘è¯·æ±‚ï¼Œé»˜è®¤8</span></span><br><span class="line">CONCURRENT_REQUESTS_PER_DOMAIN = <span class="number">16</span></span><br><span class="line"><span class="comment"># é»˜è®¤0ï¼Œå¯¹ç½‘ç«™æ¯ä¸ªIPçš„æœ€å¤§å¹¶å‘è¯·æ±‚ï¼Œä¼šè¦†ç›–ä¸Šé¢PER_DOMAINé…ç½®ï¼Œ</span></span><br><span class="line"><span class="comment"># åŒæ—¶DOWNLOAD_DELAYä¹Ÿæˆäº†ç›¸åŒIPä¸¤ä¸ªè¯·æ±‚é—´çš„é—´éš”äº†</span></span><br><span class="line">CONCURRENT_REQUESTS_PER_IP = <span class="number">16</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¦ç”¨cookieï¼Œé»˜è®¤æ˜¯Trueï¼Œå¯ç”¨</span></span><br><span class="line">COOKIES_ENABLED = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯·æ±‚å¤´è®¾ç½®ï¼Œè¿™é‡ŒåŸºæœ¬ä¸Šä¸ç”¨</span></span><br><span class="line">DEFAULT_REQUEST_HEADERS = &#123;</span><br><span class="line"><span class="comment">#   &#x27;Accept&#x27;: &#x27;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#x27;,</span></span><br><span class="line"><span class="comment">#   &#x27;Accept-Language&#x27;: &#x27;en&#x27;,</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®å¯ç”¨Spider MiddleWaresï¼ŒKeyæ˜¯classï¼ŒValueæ˜¯ä¼˜å…ˆçº§</span></span><br><span class="line">SPIDER_MIDDLEWARES = &#123;</span><br><span class="line">    <span class="string">&#x27;ScrapyDemo.middlewares.ScrapydemoSpiderMiddleware&#x27;</span>: <span class="number">543</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®å¯ç”¨Downloader MiddleWares</span></span><br><span class="line"></span><br><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">    <span class="string">&#x27;ScrapyDemo.middlewares.ScrapydemoDownloaderMiddleware&#x27;</span>: <span class="number">543</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®å¹¶å¯ç”¨æ‰©å±•ï¼Œä¸»è¦æ˜¯ä¸€äº›çŠ¶æ€ç›‘æ§</span></span><br><span class="line">EXTENSIONS = &#123;</span><br><span class="line">    <span class="string">&#x27;scrapy.extensions.telnet.TelnetConsole&#x27;</span>: <span class="literal">None</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®å¯ç”¨Pipelineç”¨æ¥æŒä¹…åŒ–æ•°æ®</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">   <span class="string">&#x27;ScrapyDemo.pipelines.ScrapydemoPipeline&#x27;</span>: <span class="number">300</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-æ‰§è¡Œçˆ¬è™«">3.2 æ‰§è¡Œçˆ¬è™«</h3>
<h4 id="3-2-1-ç»ˆç«¯è¿è¡Œçˆ¬è™«">3.2.1 ç»ˆç«¯è¿è¡Œçˆ¬è™«</h4>
<ul>
<li>éœ€è¦å»åˆ°é¡¹ç›®è·Ÿè·¯å¾„æ‰§è¡ŒæŒ‡ä»¤</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl xxxx</span><br></pre></td></tr></table></figure>
<h4 id="3-2-2-è„šæœ¬è¿è¡Œ">3.2.2 è„šæœ¬è¿è¡Œ</h4>
<ul>
<li>åœ¨<code>Scrapy</code>ä¸­æœ‰ä¸€ä¸ªå¯ä»¥æ§åˆ¶ç»ˆç«¯å‘½ä»¤çš„æ¨¡å—<code>cmdline</code>ã€‚å¯¼å…¥äº†è¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬å°±èƒ½æ“æ§ç»ˆç«¯</li>
<li><code>execute</code>æ–¹æ³•èƒ½æ‰§è¡Œç»ˆç«¯çš„å‘½ä»¤è¡Œ</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> cmdline</span><br><span class="line"></span><br><span class="line">cmdline.execute(<span class="string">&quot;scrapy crawl xxxx&quot;</span>.split())</span><br><span class="line">cmdline.execute([<span class="string">&quot;scrapy&quot;</span>,<span class="string">&quot;crawl&quot;</span>,<span class="string">&quot;xxxx&quot;</span>])</span><br></pre></td></tr></table></figure>
<p><strong>è¿è¡ŒæŠ¥é”™</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImportError: cannot <span class="keyword">import</span> <span class="type">name</span> <span class="string">&#x27;HTTPClientFactory&#x27;</span> <span class="keyword">from</span> <span class="string">&#x27;twisted.web.client&#x27;</span> (<span class="type">unknown</span> <span class="keyword">location</span>)</span><br></pre></td></tr></table></figure>
<p><strong>è§£å†³ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é™ä½Twistedç‰ˆæœ¬</span></span><br><span class="line">pip install Twisted==<span class="number">20.3</span><span class="number">.0</span></span><br></pre></td></tr></table></figure>
<h3 id="3-3-scrapy-shellè°ƒè¯•">3.3  <code>scrapy shell</code>è°ƒè¯•</h3>
<p>åŸºæœ¬ä½¿ç”¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy shell https://dig.chouti.com/</span><br></pre></td></tr></table></figure>
<p>æ•°æ®æå–</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">datas =response.xpath(<span class="string">&#x27;//div[@class=&quot;link-con&quot;]/div&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> datas:</span><br><span class="line">   <span class="built_in">print</span>(i.xpath(<span class="string">&#x27;.//a[@class=&quot;link-title link-statistics&quot;]/text()&#x27;</span>).extract_first())</span><br></pre></td></tr></table></figure>
<h2 id="4-å®æˆ˜æ¼”ç¤º">4 å®æˆ˜æ¼”ç¤º</h2>
<ul>
<li>ç›®æ ‡åœ°å€:<a target="_blank" rel="noopener" href="https://book.douban.com/top250">https://book.douban.com/top250</a></li>
</ul>
<h3 id="4-1-spiderç»“æ„">4.1  spiderç»“æ„</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> cmdline</span><br><span class="line"><span class="keyword">import</span> bs4</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TopSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">&#x27;top&#x27;</span></span><br><span class="line">    <span class="comment"># allowed_domains = [&#x27;top.com&#x27;]</span></span><br><span class="line">    start_urls = [<span class="string">&#x27;https://book.douban.com/top250?start=0&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        <span class="comment">#print(response.text)</span></span><br><span class="line">        bs = bs4.BeautifulSoup(response.text, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">        datas = bs.find_all(<span class="string">&#x27;tr&#x27;</span>, class_=<span class="string">&quot;item&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> data <span class="keyword">in</span> datas:</span><br><span class="line">            item = &#123;&#125;</span><br><span class="line">            item[<span class="string">&#x27;title&#x27;</span>] = data.find_all(<span class="string">&#x27;a&#x27;</span>)[<span class="number">1</span>][<span class="string">&#x27;title&#x27;</span>]</span><br><span class="line">            item[<span class="string">&#x27;publish&#x27;</span>] = data.find(<span class="string">&#x27;p&#x27;</span>, class_=<span class="string">&#x27;pl&#x27;</span>).text</span><br><span class="line">            item[<span class="string">&#x27;score&#x27;</span>] = data.find(<span class="string">&#x27;span&#x27;</span>, class_=<span class="string">&#x27;rating_nums&#x27;</span>).text</span><br><span class="line">            <span class="built_in">print</span>(item)</span><br><span class="line">            </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    cmdline.execute(<span class="string">&#x27;scrapy crawl top&#x27;</span>.split())</span><br></pre></td></tr></table></figure>
<h3 id="4-2-å®šä¹‰æ•°æ®">4.2 å®šä¹‰æ•°æ®</h3>
<p>åœ¨<code>scrapy</code>ä¸­ï¼Œæˆ‘ä»¬ä¼šä¸“é—¨å®šä¹‰ä¸€ä¸ªç”¨äºè®°å½•æ•°æ®çš„ç±»</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DoubanItem</span>(scrapy.Item):</span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    title = scrapy.Field()</span><br><span class="line">    <span class="comment">#å®šä¹‰ä¹¦åçš„æ•°æ®å±æ€§</span></span><br><span class="line">    publish = scrapy.Field()</span><br><span class="line">    <span class="comment">#å®šä¹‰å‡ºç‰ˆä¿¡æ¯çš„æ•°æ®å±æ€§</span></span><br><span class="line">    score = scrapy.Field()</span><br></pre></td></tr></table></figure>
<p><code>scrapy.Field()</code>è¿™è¡Œä»£ç å®ç°çš„æ˜¯ï¼Œè®©æ•°æ®èƒ½ä»¥ç±»ä¼¼å­—å…¸çš„å½¢å¼è®°å½•ã€‚ä½†è®°å½•çš„æ–¹å¼å´ä¸æ˜¯å­—å…¸ï¼Œæ˜¯æ˜¯æˆ‘ä»¬å®šä¹‰çš„<code>DoubanItem</code>ï¼Œå±äºâ€œè‡ªå®šä¹‰çš„<code>Python</code>å­—å…¸â€ã€‚</p>
<h3 id="4-3-å®šä¹‰ç®¡é“å­˜å‚¨">4.3 å®šä¹‰ç®¡é“å­˜å‚¨</h3>
<h4 id="4-3-1-é…ç½®ç®¡é“">4.3.1 é…ç½®ç®¡é“</h4>
<p>æ”¾å¼€é…ç½®æ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">   <span class="string">&#x27;douban.pipelines.DoubanPipeline&#x27;</span>: <span class="number">300</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-3-2-å­˜å‚¨æ–‡ä»¶ç¼–å†™">4.3.2 å­˜å‚¨æ–‡ä»¶ç¼–å†™</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DoubanPipeline</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_item</span>(<span class="params">self, item, spider</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;da.json&#x27;</span>, <span class="string">&#x27;a+&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(json.dumps(<span class="built_in">dict</span>(item), ensure_ascii=<span class="literal">False</span>))</span><br><span class="line">            f.write(<span class="string">&#x27;\r\n&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h4 id="4-3-3-é…ç½®æ—¥å¿—">4.3.3 é…ç½®æ—¥å¿—</h4>
<p>é…ç½®æ—¥å¿—æ¥åšè®°å½•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LOG_LEVEL = <span class="string">&#x27;WARNING&#x27;</span></span><br><span class="line">LOG_FILE = <span class="string">&#x27;./log.log&#x27;</span></span><br></pre></td></tr></table></figure>
<p>é…ç½®æ—¥å¿—ä¸ºè­¦å‘Šçº§åˆ«ï¼Œå¦‚æœæœ‰æ•°æ®æ˜¯è­¦å‘Šçº§åˆ«é‚£ä¹ˆå°†è®°å½•åˆ°æ–‡ä»¶</p>
<h2 id="5-scrapyè¡¨å•å¤„ç†">5 <code>scrapy</code>è¡¨å•å¤„ç†</h2>
<h4 id="5-1-ç›®æ ‡åœ°å€">5.1 ç›®æ ‡åœ°å€</h4>
<ul>
<li>é¦–é¡µ:<a target="_blank" rel="noopener" href="http://www.cninfo.com.cn/new/commonUrl?url=disclosure/list/notice#regulator">http://www.cninfo.com.cn/new/commonUrl?url=disclosure/list/notice#regulator</a></li>
<li>æ¥å£ï¼š<a target="_blank" rel="noopener" href="http://www.cninfo.com.cn/new/disclosure">http://www.cninfo.com.cn/new/disclosure</a></li>
</ul>
<h4 id="5-2-ç¨‹åºç¼–å†™">5.2 ç¨‹åºç¼–å†™</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PostTestSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">&#x27;post_test&#x27;</span></span><br><span class="line">    allowed_domains = [<span class="string">&#x27;cninfo.com&#x27;</span>]</span><br><span class="line">    <span class="comment"># start_urls = [&#x27;http://www.cninfo.com.cn/new/disclosure&#x27;]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">        url = <span class="string">&#x27;http://www.cninfo.com.cn/new/disclosure&#x27;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">            form_data = &#123;</span><br><span class="line">                <span class="string">&quot;column&quot;</span>: <span class="string">&quot;szse_gem_latest&quot;</span>,</span><br><span class="line">                <span class="string">&quot;pageNum&quot;</span>: <span class="built_in">str</span>(i),</span><br><span class="line">                <span class="string">&quot;pageSize&quot;</span>: <span class="string">&quot;30&quot;</span>,</span><br><span class="line">                <span class="string">&quot;sortName&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                <span class="string">&quot;sortType&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                <span class="string">&quot;clusterFlag&quot;</span>: <span class="string">&quot;true&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">yield</span> scrapy.FormRequest(url=url,formdata=form_data,meta=&#123;<span class="string">&#x27;page&#x27;</span>:form_data[<span class="string">&#x27;pageNum&#x27;</span>]&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;æ­£åœ¨é‡‡é›†ç¬¬<span class="subst">&#123;response.meta.get(<span class="string">&quot;page&quot;</span>)&#125;</span>é¡µ&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="6-æ¡†æ¶æ‰©å±•">6 æ¡†æ¶æ‰©å±•</h2>
<h3 id="6-1-æ¡†æ¶å»é‡è®¾è®¡">6.1 æ¡†æ¶å»é‡è®¾è®¡</h3>
<p><code> dont_filter</code>å®ç°äº†æ¡†æ¶å»é‡çš„åŠŸèƒ½</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> cmdline</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HuyaSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">&#x27;huya&#x27;</span></span><br><span class="line">    <span class="comment"># allowed_domains = [&#x27;hy.com&#x27;]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">        url = [<span class="string">&#x27;https://www.huya.com/cache.php?m=LiveList&amp;do=getLiveListByPage&amp;gameId=1663&amp;tagAll=0&amp;page=2&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;https://www.huya.com/cache.php?m=LiveList&amp;do=getLiveListByPage&amp;gameId=1663&amp;tagAll=0&amp;page=2&#x27;</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> url:</span><br><span class="line">            <span class="comment"># æ¡†æ¶é»˜è®¤å¯¹åœ°å€è¿›è¡Œäº†å»é‡</span></span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url=i,dont_filter=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        items = json.loads(response.text)</span><br><span class="line">        data = items.get(<span class="string">&#x27;data&#x27;</span>).get(<span class="string">&#x27;datas&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">len</span>(data))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    cmdline.execute(<span class="string">&#x27;scrapy crawl huya&#x27;</span>.split())</span><br></pre></td></tr></table></figure>
<h2 id="ScrapyåŠŸèƒ½å­¦ä¹ "><code>Scrapy</code>åŠŸèƒ½å­¦ä¹ </h2>
<h3 id="1-scrapyæ•°æ®æå–">1 <code>scrapy</code>æ•°æ®æå–</h3>
<p><code>Scrapy </code>è¿˜æä¾›äº†è‡ªå·±çš„æ•°æ®æå–æ–¹æ³•ï¼Œå³ <code>Selector</code>ï¼ˆé€‰æ‹©å™¨ï¼‰ã€‚<code>Selector </code>æ˜¯åŸºäº <code>lxml</code> æ¥æ„å»ºçš„ï¼Œæ”¯æŒ <code>XPath </code>é€‰æ‹©å™¨ã€<code>CSS </code>é€‰æ‹©å™¨ä»¥åŠæ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŠŸèƒ½å…¨é¢ï¼Œè§£æé€Ÿåº¦å’Œå‡†ç¡®åº¦éå¸¸é«˜</p>
<h4 id="1-1-ç›´æ¥ä½¿ç”¨">1.1. ç›´æ¥ä½¿ç”¨</h4>
<p><code>Selector</code> æ˜¯ä¸€ä¸ªå¯ä»¥ç‹¬ç«‹ä½¿ç”¨çš„æ¨¡å—ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ©ç”¨<code>Selector</code>è¿™ä¸ªç±»æ¥æ„å»ºä¸€ä¸ªé€‰æ‹©å™¨å¯¹è±¡ï¼Œç„¶åè°ƒç”¨å®ƒçš„ç›¸å…³æ–¹æ³•å¦‚ <code>xpath</code>ã€<code>css</code>ç­‰æ¥æå–æ•°æ®ã€‚</p>
<p>ä¾‹å¦‚ï¼Œé’ˆå¯¹ä¸€æ®µ <code>HTML</code> ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹æ–¹å¼æ„å»º <code>Selector </code>å¯¹è±¡æ¥æå–æ•°æ®ï¼š</p>
<h5 id="1-2-xpathé€‰æ‹©å™¨">1.2 <code>xpath</code>é€‰æ‹©å™¨</h5>
<p><strong>1.2.1 æµ‹è¯•ä»£ç </strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">html = &#x27;&#x27;&#x27;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">&#x27;http://example.com/&#x27;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Example website<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#x27;images&#x27;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;image1.html&#x27;</span>&gt;</span>Name: My image 1 <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;image1_thumb.jpg&#x27;</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;image2.html&#x27;</span>&gt;</span>Name: My image 2 <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;image2_thumb.jpg&#x27;</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;image3.html&#x27;</span>&gt;</span>Name: My image 3 <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;image3_thumb.jpg&#x27;</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;image4.html&#x27;</span>&gt;</span>Name: My image 4 <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;image4_thumb.jpg&#x27;</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;image5.html&#x27;</span>&gt;</span>Name: My image 5 <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;image5_thumb.jpg&#x27;</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>
<p><strong>æ„å»ºå¯¹è±¡</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response = Selector(text=html)</span><br></pre></td></tr></table></figure>
<p><strong>èŠ‚ç‚¹æå–</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = response.xpath(<span class="string">&#x27;//a&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>**æ³¨ï¼š**è¿™é‡Œé¢çš„è¯å°±ä½¿ç”¨å¸¸è§„<code>xpath</code>è¯­æ³•å°±å¥½æ‹‰</p>
<h5 id="1-3-æ­£åˆ™åŒ¹é…">1.3 æ­£åˆ™åŒ¹é…</h5>
<p><code>Scrapy</code> çš„é€‰æ‹©å™¨è¿˜æ”¯æŒæ­£åˆ™åŒ¹é…ã€‚æ¯”å¦‚ï¼Œåœ¨ç¤ºä¾‹çš„ <code>a </code>èŠ‚ç‚¹ä¸­çš„æ–‡æœ¬ç±»ä¼¼äº<code>Name: My image 1</code>ï¼Œç°åœ¨æˆ‘ä»¬åªæƒ³æŠŠ <code>Name: </code>åé¢çš„å†…å®¹æå–å‡ºæ¥ï¼Œè¿™æ—¶å°±å¯ä»¥å€ŸåŠ©<code>re</code>æ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.xpath(<span class="string">&#x27;//a/text()&#x27;</span>).re(<span class="string">&#x27;Name:\s(.*)&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>ç»™ <code>re() </code>æ–¹æ³•ä¼ äº†ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå…¶ä¸­ (.*) å°±æ˜¯è¦åŒ¹é…çš„å†…å®¹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(response.xpath(<span class="string">&#x27;//a/text()&#x27;</span>).re(<span class="string">&#x27;(.*?):\s(.*)&#x27;</span>))</span><br></pre></td></tr></table></figure>
<p>æå–è¿”å›çš„ç¬¬ä¸€ä¸ªå€¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">extract_first()    extract()</span><br></pre></td></tr></table></figure>
<h3 id="2-scrapyä¸­é—´ä»¶">2 <code>scrapy</code>ä¸­é—´ä»¶</h3>
<p>â€‹		<code>Scheduler </code>ä»é˜Ÿåˆ—ä¸­æ‹¿å‡ºä¸€ä¸ª <code>Request</code> å‘é€ç»™ <code>Downloader</code> æ‰§è¡Œä¸‹è½½ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šç»è¿‡ <code>Downloader Middleware</code> çš„å¤„ç†ã€‚å¦å¤–ï¼Œå½“ <code>Downloader</code> å°† <code>Request </code>ä¸‹è½½å®Œæˆå¾—åˆ° <code>Response</code> è¿”å›ç»™ <code>Spider</code> æ—¶ä¼šå†æ¬¡ç»è¿‡ <code>Downloader Middleware</code> å¤„ç†ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>Downloader Middleware </code>åœ¨æ•´ä¸ªæ¶æ„ä¸­èµ·ä½œç”¨çš„ä½ç½®æ˜¯ä»¥ä¸‹ä¸¤ä¸ªã€‚</p>
<ul>
<li>åœ¨ <code>Scheduler</code> è°ƒåº¦å‡ºé˜Ÿåˆ—çš„ <code>Request</code> å‘é€ç»™ <code>Downloader </code>ä¸‹è½½ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ <code>Request </code>æ‰§è¡Œä¸‹è½½ä¹‹å‰å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</li>
<li>åœ¨ä¸‹è½½åç”Ÿæˆçš„ <code>Response</code> å‘é€ç»™ <code>Spider</code> ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ç”Ÿæˆ <code>Resposne </code>è¢« <code>Spider</code> è§£æä¹‹å‰å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</li>
</ul>
<h4 id="2-1-ç›®çš„">2.1 ç›®çš„</h4>
<p>â€‹		<code>Downloader Middleware</code> çš„åŠŸèƒ½ååˆ†å¼ºå¤§ï¼Œä¿®æ”¹ <code>User-Agent</code>ã€å¤„ç†é‡å®šå‘ã€è®¾ç½®ä»£ç†ã€å¤±è´¥é‡è¯•ã€è®¾ç½® <code>Cookies</code> ç­‰åŠŸèƒ½éƒ½éœ€è¦å€ŸåŠ©å®ƒæ¥å®ç°ã€‚ä¸‹é¢æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ <code>Downloader Middleware</code> çš„è¯¦ç»†ç”¨æ³•</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282032097.png" alt="image-20220909140827526"></p>
<p>**æ³¨ï¼š**å¦‚æœæ²¡æœ‰ä¸­é—´ä»¶çš„è¯ï¼Œå°±æ˜¯ä¸€ä¸ªå…‰å…‰çš„è¯·æ±‚äº†</p>
<h4 id="2-2-ä¸­é—´ä»¶ä»‹ç»">2.2 ä¸­é—´ä»¶ä»‹ç»</h4>
<p>å¯ä»¥çœ‹åˆ°é‡Œé¢ä¸»è¦æœ‰äº”ä¸ªæ–¹æ³•ï¼š</p>
<ol>
<li>from_crawlerï¼šç±»æ–¹æ³•ï¼Œç”¨äºåˆå§‹åŒ–ä¸­é—´ä»¶</li>
<li>process_requestï¼šæ¯ä¸ªrequesté€šè¿‡ä¸‹è½½ä¸­é—´ä»¶æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨è¯¥æ–¹æ³•</li>
<li>process_responseï¼šå¤„ç†ä¸‹è½½å™¨è¿”å›çš„å“åº”å†…å®¹</li>
<li>process_exceptionï¼šå½“ä¸‹è½½å™¨æˆ–è€…å¤„ç†è¯·æ±‚å¼‚å¸¸æ—¶ï¼Œè°ƒç”¨æ­¤æ–¹æ³•</li>
<li>spider_openedï¼šå†…ç½®çš„ä¿¡å·é‡å›è°ƒæ–¹æ³•</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">process_request</span>(<span class="params">self, request, spider</span>):</span><br><span class="line">       <span class="comment"># Called for each request that goes through the downloader</span></span><br><span class="line">       <span class="comment"># middleware.</span></span><br><span class="line">       <span class="comment"># æ¯ä¸ªäº¤ç»™ä¸‹è½½å™¨çš„requestå¯¹è±¡éƒ½ä¼šç»è¿‡è¯¥æ–¹æ³•ï¼Œå¹¶æœŸæœ›è¿”å›response</span></span><br><span class="line"></span><br><span class="line">       <span class="comment"># Must either:</span></span><br><span class="line">       <span class="comment"># å¦‚æœè¯¥æ–¹æ³•è¿”å›çš„æ˜¯Noneï¼Œåˆ™ç»§ç»­æ‰§è¡Œå…¶ä»–ä¸‹è½½ä¸­é—´ä»¶çš„process_requestæ–¹æ³•é€å¾€ä¸‹è½½å™¨ï¼Œç›´åˆ°åˆé€‚çš„ä¸‹è½½å™¨å‡½æ•°è¢«è°ƒç”¨ï¼Œè¯¥requestè¢«æ‰§è¡Œï¼Œè¿”å›response</span></span><br><span class="line">       <span class="comment"># - return None: continue processing this request</span></span><br><span class="line">       <span class="comment"># å¦‚æœè¯¥æ–¹æ³•è¿”å›çš„æ˜¯responseï¼Œåˆ™ç»ˆæ­¢å½“å‰æµç¨‹ï¼Œä¹Ÿç»ˆæ­¢ç»§ç»­è°ƒç”¨å…¶ä»–process_requestæ–¹æ³•ï¼Œå°†è¯¥responseé€šè¿‡å¼•æ“è¿”å›ç»™çˆ¬è™«</span></span><br><span class="line">       <span class="comment"># - or return a Response object</span></span><br><span class="line">       <span class="comment"># å¦‚æœè¯¥æ–¹æ³•è¿”å›çš„æ˜¯requestï¼Œåˆ™ç»ˆæ­¢å½“å‰æµç¨‹ï¼Œä¹Ÿç»ˆæ­¢ç»§ç»­è°ƒç”¨å…¶ä»–process_requestæ–¹æ³•ï¼Œå°†requestè¿”å›ç»™è°ƒåº¦å™¨ï¼Œå¤§å¤šæ•°æƒ…å†µæ˜¯æ›´æ¢æ–°çš„requestè¯·æ±‚</span></span><br><span class="line">       <span class="comment"># - or return a Request object</span></span><br><span class="line">       <span class="comment"># æŠ›å‡ºIgnoreRequestå¼‚å¸¸, è¯¥å¼‚å¸¸å°±ä¼šäº¤ä¸ªprocess_exceptionæ–¹æ³•è¿›è¡Œå¤„ç†; å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ä¸ªæ–¹æ³•å¤„ç†è¯¥å¼‚å¸¸</span></span><br><span class="line">       <span class="comment"># é‚£ä¹ˆè¯¥è¯·æ±‚å°±ç›´æ¥è¢«å¿½ç•¥äº†, ä¹Ÿä¸ä¼šè®°å½•é”™è¯¯æ—¥å¿—.</span></span><br><span class="line">       <span class="comment"># - or raise IgnoreRequest: process_exception() methods of</span></span><br><span class="line">       <span class="comment">#   installed downloader middleware will be called</span></span><br><span class="line">       <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">process_response</span>(<span class="params">self, request, response, spider</span>):</span><br><span class="line">       <span class="comment"># Called with the response returned from the downloader.</span></span><br><span class="line">       <span class="comment"># å½“ä¸‹è½½å™¨å®Œæˆhttpè¯·æ±‚ï¼Œè¿”å›å“åº”ç»™å¼•æ“çš„æ—¶å€™è°ƒç”¨</span></span><br><span class="line"></span><br><span class="line">       <span class="comment"># Must either;</span></span><br><span class="line">       <span class="comment"># å¦‚æœè¿”å›responseï¼Œåˆ™ç»§ç»­æ‰§è¡Œï¼Œå…¶ä»–ä¸‹è½½ä¸­é—´ä»¶ä¹Ÿä¼šå¤„ç†è¯¥responseï¼Œç›´è‡³äº¤ç»™å¼•æ“å†äº¤ç»™çˆ¬è™«</span></span><br><span class="line">       <span class="comment"># - return a Response object</span></span><br><span class="line">       <span class="comment">#ã€€å¦‚æœè¿”å›request,åˆ™ä¸­é—´ä»¶ç»ˆæ­¢ï¼Œè¯¥requestè¿”å›å¼•æ“å†ç»™è°ƒåº¦å™¨</span></span><br><span class="line">       <span class="comment"># - return a Request object</span></span><br><span class="line">       <span class="comment"># æŠ›å‡º IgnoreRequest å¼‚å¸¸; è¯¥è¯·æ±‚å°±è¢«å¿½ç•¥äº†ä¸”ä¸åšè®°å½•</span></span><br><span class="line">       <span class="comment"># - or raise IgnoreRequest</span></span><br><span class="line">       <span class="keyword">return</span> response</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>2.2.1 ä¸­é—´ä»¶æ¿€æ´»</strong></p>
<p><code>DOWNLOADER_MIDDLEWARES</code>å‚æ•°ç”¨æ¥è®¾ç½®ä¸‹è½½å™¨ä¸­é—´ä»¶ã€‚å…¶ä¸­ï¼Œ<code>Key</code>ä¸ºä¸­é—´ä»¶è·¯å¾„ï¼Œ<code>Value</code>ä¸ºä¸­é—´ä»¶æ‰§è¡Œä¼˜å…ˆçº§ï¼Œ<strong>ã€Œæ•°å­—è¶Šå°ï¼Œè¶Šå…ˆæ‰§è¡Œã€</strong>ï¼Œå½“<code>Value</code>ä¸º**ã€ŒNoneã€**æ—¶ï¼Œè¡¨ç¤ºç¦ç”¨ã€‚</p>
<h4 id="2-3-è‡ªå®šä¹‰ä¸­é—´ä»¶">2.3 è‡ªå®šä¹‰ä¸­é—´ä»¶</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RandomUserAgentMiddleware</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.user_agents = [</span><br><span class="line">            <span class="string">&#x27;Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.2 (KHTML, like Gecko) Chrome/22.0.1216.0 Safari/537.2&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:15.0) Gecko/20100101 Firefox/15.0.1&#x27;</span></span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_request</span>(<span class="params">self, request, spider</span>):</span><br><span class="line">        request.headers[<span class="string">&#x27;User-Agent&#x27;</span>] = random.choice(<span class="variable language_">self</span>.user_agents)</span><br></pre></td></tr></table></figure>
<p><strong>2.3.1 æ¿€æ´»é…ç½®</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">   <span class="string">&#x27;scrapydownloadertest.middlewares.RandomUserAgentMiddleware&#x27;</span>: <span class="number">543</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-3-1-æ‹“å±•ä¸“é¢˜-é…ç½®è‡ªåŠ¨åŒ–">2.3.1 æ‹“å±•ä¸“é¢˜-é…ç½®è‡ªåŠ¨åŒ–</h5>
<p>åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://phantomjs.org/download.html">https://phantomjs.org/download.html</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> logging <span class="keyword">import</span> getLogger</span><br><span class="line"><span class="keyword">from</span> scrapy.http <span class="keyword">import</span> HtmlResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SeleniumMiddleware</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.logger = getLogger(__name__)</span><br><span class="line">        <span class="variable language_">self</span>.timeout = random.randint(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line">        <span class="variable language_">self</span>.browser =webdriver.Chrome()</span><br><span class="line">        <span class="variable language_">self</span>.browser.set_window_size(<span class="number">1400</span>, <span class="number">700</span>)</span><br><span class="line">        <span class="variable language_">self</span>.browser.set_page_load_timeout(<span class="variable language_">self</span>.timeout)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_request</span>(<span class="params">self, request, spider</span>):</span><br><span class="line">        <span class="variable language_">self</span>.logger.debug(<span class="string">&#x27;PhantomJS is Starting&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.browser.get(request.url)</span><br><span class="line">        body = <span class="variable language_">self</span>.browser.page_source</span><br><span class="line">        <span class="keyword">return</span> HtmlResponse(url=request.url, body=body, request=request, encoding=<span class="string">&#x27;utf-8&#x27;</span>,status=<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__del__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.browser.close()</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•pythonä»£ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> pydispatch <span class="keyword">import</span> dispatcher</span><br><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> cmdline, signals</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestSpider</span>(scrapy.Spider):</span><br><span class="line"></span><br><span class="line">    name = <span class="string">&#x27;test&#x27;</span></span><br><span class="line">    start_url = <span class="string">&#x27;https://careers.tencent.com/tencentcareer/api/post/Query?timestamp=1630663331818&amp;countryId=&amp;cityId=&amp;bgIds=&amp;productId=&amp;categoryId=&amp;parentCategoryId=&amp;attrId=&amp;keyword=python&amp;pageIndex=&#123;&#125;&amp;pageSize=10&amp;language=zh-cn&amp;area=cn&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">3</span>):</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url=<span class="variable language_">self</span>.start_url.<span class="built_in">format</span>(i),callback=<span class="variable language_">self</span>.parse)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        <span class="variable language_">self</span>.logger.info(response.text)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    cmdline.execute(<span class="string">&#x27;scrapy crawl test&#x27;</span>.split())</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3-scrapyæ•°æ®å­˜å‚¨">3 <code>scrapy</code>æ•°æ®å­˜å‚¨</h3>
<h4 id="3-1-åŸºäºmongoå­˜å‚¨">3.1 åŸºäº<code>mongo</code>å­˜å‚¨</h4>
<ul>
<li>é¦–é¡µï¼š<a target="_blank" rel="noopener" href="https://hot.online.sh.cn/node/node_65634.htm">https://hot.online.sh.cn/node/node_65634.htm</a></li>
<li>éœ€æ±‚ï¼šä½¿ç”¨æ¡†æ¶é‡‡é›†</li>
</ul>
<h5 id="3-1-1-çˆ¬è™«æ–‡ä»¶ç¼–å†™">3.1.1  çˆ¬è™«æ–‡ä»¶ç¼–å†™</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin</span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> cmdline</span><br><span class="line"><span class="keyword">from</span> news.items <span class="keyword">import</span> NewsItem</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HotSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">&#x27;hot&#x27;</span></span><br><span class="line">    start_urls = [<span class="string">&#x27;https://hot.online.sh.cn/node/node_65634.htm&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        news_list = response.css(<span class="string">&#x27;div.list_thread&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> news <span class="keyword">in</span> news_list:</span><br><span class="line">            items = NewsItem()</span><br><span class="line">            items[<span class="string">&#x27;title&#x27;</span>] = news.xpath(<span class="string">&#x27;.//h2/a/text()&#x27;</span>).extract_first()</span><br><span class="line">            items[<span class="string">&#x27;times&#x27;</span>] = news.xpath(<span class="string">&#x27;.//h3/text()&#x27;</span>).extract_first()</span><br><span class="line">            items[<span class="string">&#x27;info&#x27;</span>]  = news.xpath(<span class="string">&#x27;.//p/text()&#x27;</span>).extract_first()</span><br><span class="line">            <span class="keyword">yield</span>  items</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¤„ç†ç¿»é¡µ</span></span><br><span class="line">        <span class="built_in">next</span> = response.xpath(<span class="string">&#x27;//center/a[text()=&quot;ä¸‹ä¸€é¡µ&quot;]/@href&#x27;</span>).extract_first()</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">next</span>:</span><br><span class="line">            <span class="comment"># https://movie.douban.com/top250?start=25&amp;filter=</span></span><br><span class="line">            url = <span class="string">&#x27;https://hot.online.sh.cn/node/&#x27;</span></span><br><span class="line">            <span class="built_in">print</span>(url + <span class="built_in">next</span>)</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(urljoin(url, <span class="built_in">next</span>), callback=<span class="variable language_">self</span>.parse)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    cmdline.execute(<span class="string">&#x27;scrapy crawl hot&#x27;</span>.split())</span><br></pre></td></tr></table></figure>
<h5 id="3-1-2-ç®¡é“æ–‡ä»¶ç¼–å†™">3.1.2  ç®¡é“æ–‡ä»¶ç¼–å†™</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define your item pipelines here</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Don&#x27;t forget to add your pipeline to the ITEM_PIPELINES setting</span></span><br><span class="line"><span class="comment"># See: https://docs.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line"><span class="comment"># useful for handling different item types with a single interface</span></span><br><span class="line"><span class="keyword">from</span> itemadapter <span class="keyword">import</span> ItemAdapter</span><br><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewsPipeline</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">open_spider</span>(<span class="params">self,spider</span>):</span><br><span class="line">        <span class="variable language_">self</span>.client = pymongo.MongoClient()</span><br><span class="line">        <span class="variable language_">self</span>.db = <span class="variable language_">self</span>.client.news  <span class="comment"># æŒ‡ä»¤åº“</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_item</span>(<span class="params">self, item, spider</span>):</span><br><span class="line">        items = <span class="built_in">dict</span>(item)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(items,<span class="built_in">dict</span>):</span><br><span class="line">            <span class="variable language_">self</span>.db[<span class="string">&#x27;xl&#x27;</span>].insert_one(items)</span><br><span class="line">            <span class="keyword">return</span> item</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;æ•°æ®æ ¼å¼æœ‰è¯¯&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="3-2-åŸºäºMySQLå­˜å‚¨">3.2 åŸºäº<code>MySQL</code>å­˜å‚¨</h4>
<h5 id="3-2-1-é…ç½®ç¼–å†™">3.2.1 é…ç½®ç¼–å†™</h5>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATA_CONFIG = &#123;</span><br><span class="line">   &#x27;config&#x27; : &#123;</span><br><span class="line">      &#x27;host&#x27;:&#x27;127.0.0.1&#x27;,</span><br><span class="line">      &#x27;port&#x27;:3306,</span><br><span class="line">      &#x27;user&#x27;:&#x27;root&#x27;,</span><br><span class="line">      &#x27;password&#x27;:&#x27;&#x27;,</span><br><span class="line">      &#x27;db&#x27;:&#x27;yy&#x27;,</span><br><span class="line">      &#x27;charset&#x27;:&#x27;utf8&#x27;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-2-2-å­˜å‚¨æ–‡ä»¶ç¼–å†™">3.2.2 å­˜å‚¨æ–‡ä»¶ç¼–å†™</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NewsPipeline_mysql</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">open_spider</span>(<span class="params">self,spider</span>):</span><br><span class="line">        data_config = spider.settings[<span class="string">&#x27;DATA_CONFIG&#x27;</span>]</span><br><span class="line">        <span class="variable language_">self</span>.conn = pymysql.connect(**data_config[<span class="string">&#x27;config&#x27;</span>])</span><br><span class="line">        <span class="variable language_">self</span>.cursor = <span class="variable language_">self</span>.conn.cursor()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">close_spider</span>(<span class="params">self,spider</span>):</span><br><span class="line">        <span class="comment"># å…³é—­æ¸¸æ ‡å’Œè¿æ¥</span></span><br><span class="line">        <span class="variable language_">self</span>.cursor.close()</span><br><span class="line">        <span class="variable language_">self</span>.conn.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_item</span>(<span class="params">self, item, spider</span>):</span><br><span class="line">        <span class="comment"># æ’å…¥æ•°åˆ°æ•°æ®åº“</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(item, items.NewsItem_hot):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                sql = <span class="string">&#x27;insert into info (title,crate_time,info) values (%s,%s,%s)&#x27;</span></span><br><span class="line">                <span class="variable language_">self</span>.cursor.execute(sql, (</span><br><span class="line">                    item[<span class="string">&#x27;title&#x27;</span>],</span><br><span class="line">                    item[<span class="string">&#x27;times&#x27;</span>],</span><br><span class="line">                    item[<span class="string">&#x27;info&#x27;</span>],</span><br><span class="line">                ))</span><br><span class="line">                <span class="comment"># æäº¤</span></span><br><span class="line">                <span class="variable language_">self</span>.conn.commit()</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="variable language_">self</span>.conn.rollback()</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;ä¿¡æ¯å†™å…¥é”™è¯¯%s-%s&#x27;</span> % (item[<span class="string">&#x27;url&#x27;</span>], e))</span><br></pre></td></tr></table></figure>
<h2 id="feapder-æ¡†æ¶"><code>feapder</code> æ¡†æ¶</h2>
<p><strong>å­¦ä¹ ç›®æ ‡</strong></p>
<ul>
<li>
<p>æŒæ¡ä¾¿æ·å¼æ¡†æ¶æ“ä½œæµç¨‹</p>
</li>
<li>
<p>æŒæ¡è¯·æ±‚é’©å­ç»“æ„ä½¿ç”¨</p>
</li>
<li>
<p>æŒæ¡æ¡†æ¶é¡¹ç›®æ­å»ºæµç¨‹</p>
</li>
<li>
<p>æŒæ¡æ•°æ®å…¥åº“ä¸å»é‡</p>
<h2 id="-2"></h2>
</li>
</ul>
<h3 id="1-ç®€ä»‹-2">1 ç®€ä»‹</h3>
<p>å›½å†…æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://boris-code.gitee.io/feapder">https://boris-code.gitee.io/feapder</a></p>
<p><strong>feapder</strong> æ˜¯ä¸€æ¬¾ä¸Šæ‰‹ç®€å•ï¼ŒåŠŸèƒ½å¼ºå¤§çš„Pythonçˆ¬è™«æ¡†æ¶ï¼Œä½¿ç”¨æ–¹å¼ç±»ä¼¼<code>scrapy</code>ï¼Œæ–¹ä¾¿ç”±<code>scrapy</code>æ¡†æ¶åˆ‡æ¢è¿‡æ¥ï¼Œæ¡†æ¶å†…ç½®3ç§çˆ¬è™«ï¼š</p>
<h4 id="1-1-æ”¯æŒçš„åœºæ™¯">1.1  æ”¯æŒçš„åœºæ™¯</h4>
<ul>
<li><code>AirSpider</code>çˆ¬è™«æ¯”è¾ƒè½»é‡ï¼Œå­¦ä¹ æˆæœ¬ä½ã€‚é¢å¯¹ä¸€äº›æ•°æ®é‡è¾ƒå°‘ï¼Œæ— éœ€æ–­ç‚¹ç»­çˆ¬ï¼Œæ— éœ€åˆ†å¸ƒå¼é‡‡é›†çš„éœ€æ±‚ï¼Œå¯é‡‡ç”¨æ­¤çˆ¬è™«ã€‚</li>
<li><code>Spider</code>æ˜¯ä¸€æ¬¾åŸºäº<code>redis</code>çš„åˆ†å¸ƒå¼çˆ¬è™«ï¼Œé€‚ç”¨äºæµ·é‡æ•°æ®é‡‡é›†ï¼Œæ”¯æŒæ–­ç‚¹ç»­çˆ¬ã€çˆ¬è™«æŠ¥è­¦ã€æ•°æ®è‡ªåŠ¨å…¥åº“ç­‰åŠŸèƒ½</li>
<li><code>BatchSpider</code>æ˜¯ä¸€æ¬¾åˆ†å¸ƒå¼æ‰¹æ¬¡çˆ¬è™«ï¼Œå¯¹äºéœ€è¦å‘¨æœŸæ€§é‡‡é›†çš„æ•°æ®ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨æœ¬çˆ¬è™«ã€‚</li>
</ul>
<h4 id="1-2-æ¶æ„è¯´æ˜">1.2 æ¶æ„è¯´æ˜</h4>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282033781.png" alt="boris-spider -1-"></p>
<h5 id="1-2-1æ¨¡å—è¯´æ˜">1.2.1<strong>æ¨¡å—è¯´æ˜</strong></h5>
<ul>
<li>spider <strong>æ¡†æ¶è°ƒåº¦æ ¸å¿ƒ</strong></li>
<li>parser_control <strong>æ¨¡ç‰ˆæ§åˆ¶å™¨</strong>ï¼Œè´Ÿè´£è°ƒåº¦parser</li>
<li>collector <strong>ä»»åŠ¡æ”¶é›†å™¨</strong>ï¼Œè´Ÿè´£ä»ä»»åŠ¡é˜Ÿé‡Œä¸­æ‰¹é‡å–ä»»åŠ¡åˆ°å†…å­˜ï¼Œä»¥å‡å°‘çˆ¬è™«å¯¹ä»»åŠ¡é˜Ÿåˆ—æ•°æ®åº“çš„è®¿é—®é¢‘ç‡åŠå¹¶å‘é‡</li>
<li>parser <strong>æ•°æ®è§£æå™¨</strong></li>
<li>start_request åˆå§‹ä»»åŠ¡ä¸‹å‘å‡½æ•°</li>
<li>item_buffer <strong>æ•°æ®ç¼“å†²é˜Ÿåˆ—</strong>ï¼Œæ‰¹é‡å°†æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­</li>
<li>request_buffer <strong>è¯·æ±‚ä»»åŠ¡ç¼“å†²é˜Ÿåˆ—</strong>ï¼Œæ‰¹é‡å°†è¯·æ±‚ä»»åŠ¡å­˜å‚¨åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­</li>
<li>request <strong>æ•°æ®ä¸‹è½½å™¨</strong>ï¼Œå°è£…äº†requestsï¼Œç”¨äºä»äº’è”ç½‘ä¸Šä¸‹è½½æ•°æ®</li>
<li>response <strong>è¯·æ±‚å“åº”</strong>ï¼Œå°è£…äº†response, æ”¯æŒxpathã€cssã€reç­‰è§£ææ–¹å¼ï¼Œè‡ªåŠ¨å¤„ç†ä¸­æ–‡ä¹±ç </li>
</ul>
<h5 id="1-2-2-æµç¨‹è¯´æ˜">1.2.2 <strong>æµç¨‹è¯´æ˜</strong></h5>
<ol>
<li>spiderè°ƒåº¦<strong>start_request</strong>ç”Ÿäº§ä»»åŠ¡</li>
<li><strong>start_request</strong>ä¸‹å‘ä»»åŠ¡åˆ°request_bufferä¸­</li>
<li>spiderè°ƒåº¦<strong>request_buffer</strong>æ‰¹é‡å°†ä»»åŠ¡å­˜å‚¨åˆ°ä»»åŠ¡é˜Ÿåˆ—æ•°æ®åº“ä¸­</li>
<li>spiderè°ƒåº¦<strong>collector</strong>ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‰¹é‡è·å–ä»»åŠ¡åˆ°å†…å­˜é˜Ÿåˆ—</li>
<li>spiderè°ƒåº¦<strong>parser_control</strong>ä»collectorçš„å†…å­˜é˜Ÿåˆ—ä¸­è·å–ä»»åŠ¡</li>
<li><strong>parser_control</strong>è°ƒåº¦<strong>request</strong>è¯·æ±‚æ•°æ®</li>
<li><strong>request</strong>è¯·æ±‚ä¸ä¸‹è½½æ•°æ®</li>
<li>requestå°†ä¸‹è½½åçš„æ•°æ®ç»™<strong>response</strong>ï¼Œè¿›ä¸€æ­¥å°è£…</li>
<li>å°†å°è£…å¥½çš„<strong>response</strong>è¿”å›ç»™<strong>parser_control</strong>ï¼ˆå›¾ç¤ºä¸ºå¤šä¸ªparser_controlï¼Œè¡¨ç¤ºå¤šçº¿ç¨‹ï¼‰</li>
<li>parser_controlè°ƒåº¦å¯¹åº”çš„<strong>parser</strong>ï¼Œè§£æè¿”å›çš„responseï¼ˆå›¾ç¤ºå¤šç»„parserè¡¨ç¤ºä¸åŒçš„ç½‘ç«™è§£æå™¨ï¼‰</li>
<li>parser_controlå°†parserè§£æåˆ°çš„æ•°æ®itemåŠæ–°äº§ç”Ÿçš„requeståˆ†å‘åˆ°<strong>item_buffer</strong>ä¸<strong>request_buffer</strong></li>
<li>spiderè°ƒåº¦<strong>item_buffer</strong>ä¸<strong>request_buffer</strong>å°†æ•°æ®æ‰¹é‡å…¥åº“</li>
</ol>
<h3 id="2-ä½¿ç”¨">2 ä½¿ç”¨</h3>
<h4 id="2-1-ç¯å¢ƒå®‰è£…">2.1 ç¯å¢ƒå®‰è£…</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install feapder</span><br></pre></td></tr></table></figure>
<h4 id="2-2-åˆ›å»ºæ™®é€šçˆ¬è™«">2.2 åˆ›å»ºæ™®é€šçˆ¬è™«</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">feapder create -s xxxx</span><br></pre></td></tr></table></figure>
<h4 id="2-3-çˆ¬è™«å°æ¡ˆä¾‹">2.3 çˆ¬è™«å°æ¡ˆä¾‹</h4>
<ol>
<li>ä¸‹å‘ä»»åŠ¡ï¼šä¸‹å‘ä»»åŠ¡</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">yield</span> feapder.Request(<span class="string">&quot;https://www.icswb.com/channel-list-channel-161.html&quot;</span>)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>è§£ææ ‡é¢˜åŠè¯¦æƒ…é¡µé“¾æ¥</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, request, response</span>):</span><br><span class="line">    <span class="comment"># æå–ç½‘ç«™title</span></span><br><span class="line">    <span class="built_in">print</span>(response.xpath(<span class="string">&quot;//title/text()&quot;</span>).extract_first())</span><br><span class="line">    <span class="comment"># æå–ç½‘ç«™æè¿°</span></span><br><span class="line">    article_list = response.xpath(<span class="string">&#x27;//ul[@id=&quot;NewsListContainer&quot;]/li&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> article_list[:-<span class="number">1</span>]:</span><br><span class="line">        title = i.xpath(<span class="string">&#x27;./h3/a/text()&#x27;</span>).extract_first()</span><br><span class="line">        url = i.xpath(<span class="string">&#x27;./h3/a/@href&#x27;</span>).extract_first()</span><br><span class="line">        <span class="built_in">print</span>(url)</span><br><span class="line">        <span class="keyword">yield</span> feapder.Request(<span class="string">&#x27;https://www.icswb.com&#x27;</span>+url, callback=<span class="variable language_">self</span>.parser_detail, title=title)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>æŠ“è¯¦æƒ…éœ€è¦å°†åˆ—è¡¨é‡‡é›†åˆ°çš„urlä½œä¸ºæ–°ä»»åŠ¡ï¼Œç„¶åè¯·æ±‚ï¼Œè§£æã€‚å†™æ³•å¾ˆç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">parser_detail</span>(<span class="params">self, request, response</span>):</span><br><span class="line">    title = request.title</span><br><span class="line">    content = response.xpath(<span class="string">&#x27;//article[@class=&quot;am-article&quot;]&#x27;</span>).extract_first()</span><br><span class="line">    <span class="built_in">print</span>(content)</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>å¯åŠ¨ä»£ç </li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># å¼€å¯å¤šçº¿ç¨‹æ–¹å¼</span></span><br><span class="line">    SpiderTest(thread_count=<span class="number">5</span>).start()</span><br></pre></td></tr></table></figure>
<h5 id="2-3-1-æ•°æ®å…¥åº“">2.3.1 æ•°æ®å…¥åº“</h5>
<p><code>feapder</code>ç»™æˆ‘ä»¬æä¾›äº†æ–¹æ³•</p>
<ul>
<li>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://feapder.com/#/source_code/MysqlDB">https://feapder.com/#/source_code/MysqlDB</a></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> feapder.db.mysqldb <span class="keyword">import</span> MysqlDB</span><br><span class="line">db = MysqlDB(</span><br><span class="line">    ip=<span class="string">&quot;localhost&quot;</span>, port=<span class="number">3306</span>, db=<span class="string">&quot;feapder&quot;</span>, user_name=<span class="string">&quot;feapder&quot;</span>, user_pass=<span class="string">&quot;feapder123&quot;</span></span><br><span class="line">)</span><br><span class="line">tt = <span class="string">&#x27;èƒ–åŒ&#x27;</span></span><br><span class="line">cc = <span class="string">&#x27;èƒ–å¨œ&#x27;</span></span><br><span class="line">sql = <span class="string">&quot;insert ignore into xxx (title,content) values (&#x27;%s&#x27;, &#x27;%s&#x27;)&quot;</span> % (tt,cc)</span><br><span class="line">db.add(sql)</span><br></pre></td></tr></table></figure>
<p>1ã€åˆ›å»ºé…ç½®æ–‡ä»¶</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">feapder <span class="built_in">create</span> <span class="comment">--setting</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>æ¿€æ´»é…ç½®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># # MYSQL</span></span><br><span class="line">MYSQL_IP = <span class="string">&quot;localhost&quot;</span></span><br><span class="line">MYSQL_PORT = <span class="number">3306</span></span><br><span class="line">MYSQL_DB = <span class="string">&quot;test8&quot;</span></span><br><span class="line">MYSQL_USER_NAME = <span class="string">&quot;root&quot;</span></span><br><span class="line">MYSQL_USER_PASS = <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>2ã€åˆ›å»ºitemæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">feapder create -i xxx     <span class="comment"># xxx=è¡¨å</span></span><br></pre></td></tr></table></figure>
<p>3ã€é¡¹ç›®å¼•å…¥</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xxx_item <span class="keyword">import</span> XxxItem</span><br><span class="line">   ....</span><br><span class="line">item = XxxItem()</span><br><span class="line">item.title = titles</span><br><span class="line">item.content = contents</span><br><span class="line"><span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šæ•°æ®æ˜¯ä¸€æ¬¡å…¥åº“ï¼Œé™ä½å¯¹æ•°æ®åº“çš„æ“ä½œ</p>
<h4 id="2-4-è‡ªå®šä¹‰ä¸­é—´ä»¶">2.4 è‡ªå®šä¹‰ä¸­é—´ä»¶</h4>
<ul>
<li>è¯·æ±‚å‰ä¼šç»è¿‡è¿™ä¸ªå‡½æ•°</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> feapder</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo1s</span>(feapder.AirSpider):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">3</span>):</span><br><span class="line">            <span class="keyword">yield</span> feapder.Request(<span class="string">&quot;http://httpbin.org/get&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">download_midware</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        æˆ‘æ˜¯è‡ªå®šä¹‰çš„ä¸‹è½½ä¸­é—´ä»¶ </span></span><br><span class="line"><span class="string">        :param request:</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        request.headers = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&quot;lalala&quot;</span>&#125;</span><br><span class="line">        <span class="keyword">return</span> request</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, request, response</span>):</span><br><span class="line">        <span class="built_in">print</span>(response.text)</span><br><span class="line">            <span class="comment"># print(title, url)</span></span><br></pre></td></tr></table></figure>
<h4 id="2-5-è‡ªå®šä¹‰ä¸‹è½½å™¨">2.5 è‡ªå®šä¹‰ä¸‹è½½å™¨</h4>
<p>è‡ªå®šä¹‰ä¸‹è½½å™¨å³åœ¨ä¸‹è½½ä¸­é—´ä»¶é‡Œä¸‹è½½ï¼Œç„¶åè¿”å›responseå³å¯ï¼Œå¦‚ä½¿ç”¨httpxåº“ä¸‹è½½ä»¥ä¾¿æ”¯æŒhttp2</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> feapder, httpx</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo1s</span>(feapder.AirSpider):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">yield</span> feapder.Request(<span class="string">&quot;http://httpbin.org/get&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, request, response</span>):</span><br><span class="line">        <span class="built_in">print</span>(response.text)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">validate</span>(<span class="params">self, request, response</span>):</span><br><span class="line">        <span class="keyword">if</span> response.status_code != <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">&quot;response code not 200&quot;</span>)  <span class="comment"># é‡è¯•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    Demo1s(thread_count=<span class="number">1</span>).start()</span><br></pre></td></tr></table></figure>
<h4 id="2-6-å¯¹æ¥è‡ªåŠ¨åŒ–">2.6 å¯¹æ¥è‡ªåŠ¨åŒ–</h4>
<p>â€‹		é‡‡é›†åŠ¨æ€é¡µé¢æ—¶ï¼ˆAjaxæ¸²æŸ“çš„é¡µé¢ï¼‰ï¼Œå¸¸ç”¨çš„æœ‰ä¸¤ç§æ–¹æ¡ˆã€‚ä¸€ç§æ˜¯æ‰¾æ¥å£æ‹¼å‚æ•°ï¼Œè¿™ç§æ–¹å¼æ¯”è¾ƒå¤æ‚ä½†æ•ˆç‡é«˜ï¼Œéœ€è¦ä¸€å®šçš„çˆ¬è™«åŠŸåº•ï¼›å¦å¤–ä¸€ç§æ˜¯é‡‡ç”¨æµè§ˆå™¨æ¸²æŸ“çš„æ–¹å¼ï¼Œç›´æ¥è·å–æºç ï¼Œç®€å•æ–¹ä¾¿</p>
<p>å†…ç½®æµè§ˆå™¨æ¸²æŸ“æ”¯æŒ <strong>CHROME</strong> ã€<strong>PHANTOMJS</strong>ã€<strong>FIREFOX</strong></p>
<p><a target="_blank" rel="noopener" href="https://boris-code.gitee.io/feapder/#/source_code/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93?id=%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F%EF%BC%9A">ä½¿ç”¨æ–¹å¼ï¼š</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">yield</span> feapder.Request(<span class="string">&quot;https://news.qq.com/&quot;</span>, render=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿”å›çš„Requestä¸­ä¼ é€’<code>render=True</code>å³å¯</p>
<p>æ³¨æ„ï¼šæ¡†æ¶ç”¨çš„æ˜¯è€ç‰ˆæœ¬ï¼Œéœ€è¦é™ä½ç°æœ‰ç‰ˆæœ¬</p>
<ul>
<li>
<p>ç‰ˆæœ¬æŸ¥çœ‹æ–¹æ³•ï¼š<a target="_blank" rel="noopener" href="https://pypi.org/project/selenium/#history">https://pypi.org/project/selenium/#history</a></p>
</li>
<li>
<pre><code class="language-python">pip install selenium==3.141.0
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">##### 2.6.1 é…ç½®</span></span><br><span class="line"></span><br><span class="line">+ åœ¨settingé‡Œé¢æ”¹é…ç½®</span><br><span class="line">+ åœ¨é¡¹ç›®é‡Œé¢é‡å†™é…ç½®</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">__custom_setting__ = dict(</span><br><span class="line">        <span class="attribute">WEBDRIVER</span>=dict(</span><br><span class="line">            <span class="attribute">pool_size</span>=1,  # æµè§ˆå™¨çš„æ•°é‡</span><br><span class="line">            <span class="attribute">load_images</span>=<span class="literal">True</span>,  # æ˜¯å¦åŠ è½½å›¾ç‰‡</span><br><span class="line">            <span class="attribute">user_agent</span>=None,  # å­—ç¬¦ä¸² æˆ– æ— å‚å‡½æ•°ï¼Œè¿”å›å€¼ä¸ºuser_agent</span><br><span class="line">            <span class="attribute">proxy</span>=None,  # xxx.xxx.xxx.xxx:xxxx æˆ– æ— å‚å‡½æ•°ï¼Œè¿”å›å€¼ä¸ºä»£ç†åœ°å€</span><br><span class="line">            <span class="attribute">headless</span>=<span class="literal">False</span>,  # æ˜¯å¦ä¸ºæ— å¤´æµè§ˆå™¨</span><br><span class="line">            <span class="attribute">driver_type</span>=<span class="string">&quot;CHROME&quot;</span>,  # CHROMEã€PHANTOMJSã€FIREFOX</span><br><span class="line">            <span class="attribute">timeout</span>=30,  # è¯·æ±‚è¶…æ—¶æ—¶é—´</span><br><span class="line">            window_size=(1024, 800),  # çª—å£å¤§å°</span><br><span class="line">            <span class="attribute">executable_path</span>=<span class="string">&#x27;D:\software\inters\python3\chromedriver.exe&#x27;</span>,  # æµè§ˆå™¨è·¯å¾„ï¼Œé»˜è®¤ä¸ºé»˜è®¤è·¯å¾„</span><br><span class="line">            <span class="attribute">render_time</span>=0,  # æ¸²æŸ“æ—¶é•¿ï¼Œå³æ‰“å¼€ç½‘é¡µç­‰å¾…æŒ‡å®šæ—¶é—´åå†è·å–æºç </span><br><span class="line">            custom_argument=[<span class="string">&quot;--ignore-certificate-errors&quot;</span>],  # è‡ªå®šä¹‰æµè§ˆå™¨æ¸²æŸ“å‚æ•°</span><br><span class="line">        )</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
</ul>
<p><strong>è‡ªåŠ¨é€‚é…æµè§ˆå™¨é©±åŠ¨</strong></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">WEBDRIVER</span> <span class="operator">=</span> dict(</span><br><span class="line">    ...</span><br><span class="line">    auto_install_driver<span class="operator">=</span>True</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>å³æµè§ˆå™¨æ¸²æŸ“ç›¸å…³é…ç½® <code>auto_install_driver</code> è®¾ç½®Trueï¼Œè®©å…¶è‡ªåŠ¨å¯¹æ¯”é©±åŠ¨ç‰ˆæœ¬ï¼Œç‰ˆæœ¬ä¸ç¬¦æˆ–é©±åŠ¨ä¸å­˜åœ¨æ—¶è‡ªåŠ¨ä¸‹è½½</p>
<h5 id="2-6-2-æ“ä½œæµè§ˆå™¨å¯¹è±¡">2.6.2 æ“ä½œæµè§ˆå™¨å¯¹è±¡</h5>
<ul>
<li>é€šè¿‡ <code>response.browser</code> è·å–æµè§ˆå™¨å¯¹è±¡</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> feapder</span><br><span class="line"><span class="keyword">from</span> feapder.utils.webdriver <span class="keyword">import</span> WebDriver</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestRender</span>(feapder.AirSpider):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">yield</span> feapder.Request(<span class="string">&quot;http://www.baidu.com&quot;</span>, render=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, request, response</span>):</span><br><span class="line">        browser: WebDriver = response.browser</span><br><span class="line">        browser.find_element_by_id(<span class="string">&quot;kw&quot;</span>).send_keys(<span class="string">&quot;feapder&quot;</span>)</span><br><span class="line">        browser.find_element_by_id(<span class="string">&quot;su&quot;</span>).click()</span><br><span class="line">        time.sleep(<span class="number">5</span>)</span><br><span class="line">        <span class="built_in">print</span>(browser.page_source)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># responseä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„</span></span><br><span class="line">        <span class="comment"># response.xpath(&quot;//title&quot;)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è‹¥æœ‰æ»šåŠ¨ï¼Œå¯é€šè¿‡å¦‚ä¸‹æ–¹å¼æ›´æ–°responseï¼Œä½¿å…¶åŠ è½½æ»šåŠ¨åçš„å†…å®¹</span></span><br><span class="line">        <span class="comment"># response.text = browser.page_source</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    TestRender().start()</span><br></pre></td></tr></table></figure>
<h5 id="2-6-3-æ‹¦æˆªXHR-æ•°æ®">2.6.3 æ‹¦æˆªXHR æ•°æ®</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">WEBDRIVER = <span class="built_in">dict</span>(</span><br><span class="line">    ...</span><br><span class="line">    xhr_url_regexes=[</span><br><span class="line">        <span class="string">&quot;æ¥å£1æ­£åˆ™&quot;</span>,</span><br><span class="line">        <span class="string">&quot;æ¥å£2æ­£åˆ™&quot;</span>,</span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>æ•°æ®è·å–</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">browser: WebDriver = response.browser</span><br><span class="line"><span class="comment"># æå–æ–‡æœ¬</span></span><br><span class="line">text = browser.xhr_text(<span class="string">&quot;æ¥å£1æ­£åˆ™&quot;</span>)</span><br><span class="line"><span class="comment"># æå–json</span></span><br><span class="line">data = browser.xhr_json(<span class="string">&quot;æ¥å£1æ­£åˆ™&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>è·å–å¯¹è±¡</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">browser: WebDriver = response.browser</span><br><span class="line">xhr_response = browser.xhr_response(<span class="string">&quot;æ¥å£1æ­£åˆ™&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¯·æ±‚æ¥å£&quot;</span>, xhr_response.request.url)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¯·æ±‚å¤´&quot;</span>, xhr_response.request.headers)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¯·æ±‚ä½“&quot;</span>, xhr_response.request.data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¿”å›å¤´&quot;</span>, xhr_response.headers)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¿”å›åœ°å€&quot;</span>, xhr_response.url)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¿”å›å†…å®¹&quot;</span>, xhr_response.content)</span><br></pre></td></tr></table></figure>
<h5 id="2-6-4-ç¤ºä¾‹ä»£ç ">2.6.4 ç¤ºä¾‹ä»£ç </h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Created on 2022-09-13 21:39:47</span></span><br><span class="line"><span class="string">---------</span></span><br><span class="line"><span class="string">@summary:</span></span><br><span class="line"><span class="string">---------</span></span><br><span class="line"><span class="string">@author: XL</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> feapder</span><br><span class="line"><span class="keyword">from</span> feapder.utils.webdriver <span class="keyword">import</span> WebDriver</span><br><span class="line"><span class="keyword">from</span> feapder.network.downloader <span class="keyword">import</span> SeleniumDownloader</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span>(feapder.AirSpider):</span><br><span class="line">    __custom_setting__ = <span class="built_in">dict</span>(</span><br><span class="line">        WEBDRIVER=<span class="built_in">dict</span>(</span><br><span class="line">            pool_size=<span class="number">1</span>,  <span class="comment"># æµè§ˆå™¨çš„æ•°é‡</span></span><br><span class="line">            load_images=<span class="literal">True</span>,  <span class="comment"># æ˜¯å¦åŠ è½½å›¾ç‰‡</span></span><br><span class="line">            user_agent=<span class="literal">None</span>,  <span class="comment"># å­—ç¬¦ä¸² æˆ– æ— å‚å‡½æ•°ï¼Œè¿”å›å€¼ä¸ºuser_agent</span></span><br><span class="line">            proxy=<span class="literal">None</span>,  <span class="comment"># xxx.xxx.xxx.xxx:xxxx æˆ– æ— å‚å‡½æ•°ï¼Œè¿”å›å€¼ä¸ºä»£ç†åœ°å€</span></span><br><span class="line">            headless=<span class="literal">False</span>,  <span class="comment"># æ˜¯å¦ä¸ºæ— å¤´æµè§ˆå™¨</span></span><br><span class="line">            driver_type=<span class="string">&quot;CHROME&quot;</span>,  <span class="comment"># CHROMEã€PHANTOMJSã€FIREFOX</span></span><br><span class="line">            timeout=<span class="number">30</span>,  <span class="comment"># è¯·æ±‚è¶…æ—¶æ—¶é—´</span></span><br><span class="line">            window_size=(<span class="number">1024</span>, <span class="number">800</span>),  <span class="comment"># çª—å£å¤§å°</span></span><br><span class="line">            executable_path=<span class="string">&#x27;D:\software\inters\python3\chromedriver.exe&#x27;</span>,  <span class="comment"># æµè§ˆå™¨è·¯å¾„ï¼Œé»˜è®¤ä¸ºé»˜è®¤è·¯å¾„</span></span><br><span class="line">            render_time=<span class="number">0</span>,  <span class="comment"># æ¸²æŸ“æ—¶é•¿ï¼Œå³æ‰“å¼€ç½‘é¡µç­‰å¾…æŒ‡å®šæ—¶é—´åå†è·å–æºç </span></span><br><span class="line">            custom_argument=[<span class="string">&quot;--ignore-certificate-errors&quot;</span>],  <span class="comment"># è‡ªå®šä¹‰æµè§ˆå™¨æ¸²æŸ“å‚æ•°</span></span><br><span class="line"></span><br><span class="line">            xhr_url_regexes=[</span><br><span class="line">                <span class="string">&quot;/api/post/Query&quot;</span>,</span><br><span class="line">            ],  <span class="comment"># æ‹¦æˆª https://careers.tencent.com/tencentcareer/api/post/Query æ¥å£</span></span><br><span class="line"></span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">yield</span> feapder.Request(<span class="string">&quot;https://careers.tencent.com/search.html?keyword=python&quot;</span>,render=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, request, response</span>):</span><br><span class="line">        <span class="comment"># print(response.text)</span></span><br><span class="line">        <span class="comment"># å¯ä»¥ä½¿ç”¨è‡ªåŠ¨åŒ–æå–</span></span><br><span class="line">        <span class="comment"># æ•°æ®æå–ç¬¬ä¸€ç§ ä½¿ç”¨xpathæå–</span></span><br><span class="line">        <span class="comment"># title = response.xpath(&#x27;//h4[@class=&quot;recruit-title&quot;]/text()&#x27;)</span></span><br><span class="line">        <span class="comment"># print(title)</span></span><br><span class="line">        <span class="comment"># æ•°æ®æå–ç¬¬2ç§ ç»§ç»­ä½¿ç”¨è‡ªåŠ¨åŒ–</span></span><br><span class="line">        <span class="comment"># browser: WebDriver = response.browser</span></span><br><span class="line">        <span class="comment"># time.sleep(3)</span></span><br><span class="line">        <span class="comment"># title = browser.find_element_by_class_name(&#x27;recruit-title&#x27;).text</span></span><br><span class="line">        <span class="comment"># print(title)</span></span><br><span class="line">        <span class="comment"># æ•°æ®æå–ç¬¬3ç§ï¼Œä½¿ç”¨APIæ¥å£æ‹¦æˆª</span></span><br><span class="line">        browser: WebDriver = response.browser</span><br><span class="line">        time.sleep(<span class="number">1.5</span>)</span><br><span class="line">        <span class="comment"># è·å–æ¥å£æ•°æ® æ–‡æœ¬ç±»å‹</span></span><br><span class="line">        <span class="comment"># data = browser.xhr_text(&quot;/api/post/Query&quot;)</span></span><br><span class="line">        <span class="comment"># print(data)</span></span><br><span class="line">        <span class="comment"># data = browser.xhr_json(&quot;/api/post/Query&quot;)</span></span><br><span class="line">        <span class="comment"># print(data)</span></span><br><span class="line">        <span class="comment"># è‡ªå®šä¹‰æå–æ•°æ®</span></span><br><span class="line">        xhr_response = browser.xhr_response(<span class="string">&quot;/api/post/Query&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¯·æ±‚å¤´&quot;</span>, xhr_response.request.headers)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¯·æ±‚ä½“&quot;</span>, xhr_response.request.data)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¿”å›å†…å®¹&quot;</span>, xhr_response.content)</span><br><span class="line">        <span class="comment"># å…³é—­æµè§ˆå™¨</span></span><br><span class="line">        response.close_browser(request)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    Test().start()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="3-é¡¹ç›®æ­å»º">3 é¡¹ç›®æ­å»º</h3>
<h4 id="3-1-åˆ›å»ºé¡¹ç›®">3.1 åˆ›å»ºé¡¹ç›®</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">feapder create -p <span class="tag">&lt;<span class="name">project_name</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282033729.jpeg" alt="-w354"></p>
<ul>
<li>itemsï¼š æ–‡ä»¶å¤¹å­˜æ”¾ä¸æ•°æ®åº“è¡¨æ˜ å°„çš„item</li>
<li>spidersï¼š æ–‡ä»¶å¤¹å­˜æ”¾çˆ¬è™«è„šæœ¬</li>
<li><a target="_blank" rel="noopener" href="http://main.py">main.py</a>ï¼š è¿è¡Œå…¥å£</li>
<li><a target="_blank" rel="noopener" href="http://setting.py">setting.py</a>ï¼š çˆ¬è™«é…ç½®æ–‡ä»¶</li>
</ul>
<h4 id="3-2-åˆ›å»ºæ™®é€šçˆ¬è™«">3.2 <strong>åˆ›å»ºæ™®é€šçˆ¬è™«</strong></h4>
<ul>
<li>éœ€è¦å…ˆåˆ‡æ¢åˆ°spidersæ–‡ä»¶å¤¹ä¸‹</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">feapder create -s first_spider</span><br></pre></td></tr></table></figure>
<h4 id="3-3-é…ç½®è‡ªåŠ¨åŒ–">3.3 é…ç½®è‡ªåŠ¨åŒ–</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">WEBDRIVER = <span class="built_in">dict</span>(</span><br><span class="line">    pool_size=<span class="number">1</span>,  <span class="comment"># æµè§ˆå™¨çš„æ•°é‡</span></span><br><span class="line">    load_images=<span class="literal">True</span>,  <span class="comment"># æ˜¯å¦åŠ è½½å›¾ç‰‡</span></span><br><span class="line">    user_agent=<span class="literal">None</span>,  <span class="comment"># å­—ç¬¦ä¸² æˆ– æ— å‚å‡½æ•°ï¼Œè¿”å›å€¼ä¸ºuser_agent</span></span><br><span class="line">    proxy=<span class="literal">None</span>,  <span class="comment"># xxx.xxx.xxx.xxx:xxxx æˆ– æ— å‚å‡½æ•°ï¼Œè¿”å›å€¼ä¸ºä»£ç†åœ°å€</span></span><br><span class="line">    headless=<span class="literal">False</span>,  <span class="comment"># æ˜¯å¦ä¸ºæ— å¤´æµè§ˆå™¨</span></span><br><span class="line">    driver_type=<span class="string">&quot;CHROME&quot;</span>,  <span class="comment"># CHROMEã€PHANTOMJSã€FIREFOX</span></span><br><span class="line">    timeout=<span class="number">30</span>,  <span class="comment"># è¯·æ±‚è¶…æ—¶æ—¶é—´</span></span><br><span class="line">    window_size=(<span class="number">1024</span>, <span class="number">800</span>),  <span class="comment"># çª—å£å¤§å°</span></span><br><span class="line">    executable_path=<span class="string">&#x27;D:\software\inters\python3\chromedriver.exe&#x27;</span>,  <span class="comment"># æµè§ˆå™¨è·¯å¾„ï¼Œé»˜è®¤ä¸ºé»˜è®¤è·¯å¾„</span></span><br><span class="line">    render_time=<span class="number">0</span>,  <span class="comment"># æ¸²æŸ“æ—¶é•¿ï¼Œå³æ‰“å¼€ç½‘é¡µç­‰å¾…æŒ‡å®šæ—¶é—´åå†è·å–æºç </span></span><br><span class="line">    custom_argument=[</span><br><span class="line">        <span class="string">&quot;--ignore-certificate-errors&quot;</span>,</span><br><span class="line">        <span class="string">&quot;--disable-blink-features=AutomationControlled&quot;</span>,</span><br><span class="line">    ],  <span class="comment"># è‡ªå®šä¹‰æµè§ˆå™¨æ¸²æŸ“å‚æ•°</span></span><br><span class="line">    xhr_url_regexes=[</span><br><span class="line">        <span class="string">&quot;/hbsearch/HotelSearch&quot;</span>,</span><br><span class="line">    ],</span><br><span class="line">    auto_install_driver=<span class="literal">False</span>,  <span class="comment"># è‡ªåŠ¨ä¸‹è½½æµè§ˆå™¨é©±åŠ¨ æ”¯æŒchrome å’Œ firefox</span></span><br><span class="line">    use_stealth_js=<span class="literal">True</span>,  <span class="comment"># ä½¿ç”¨stealth.min.jséšè—æµè§ˆå™¨ç‰¹å¾</span></span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="3-4-ä¸šåŠ¡é€»è¾‘åˆ†æ">3.4 ä¸šåŠ¡é€»è¾‘åˆ†æ</h4>
<h5 id="3-5-1-ç¿»é¡µ">3.5.1 ç¿»é¡µ</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">next_page</span>(<span class="params">self,browser</span>):</span><br><span class="line">    <span class="comment"># 11568</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">11</span>):</span><br><span class="line">    time.sleep(<span class="number">0.3</span>)</span><br><span class="line">    js = <span class="string">&quot;window.scrollTo(0, &#123;&#125;)&quot;</span>.<span class="built_in">format</span>(x*<span class="number">1000</span>) <span class="comment"># 1000 2000 3000 4000 5000</span></span><br><span class="line">    browser.execute_script(js)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h5 id="3-5-2-ç‚¹å‡»">3.5.2 ç‚¹å‡»</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_next_page</span>(<span class="params">self,browser</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        next_btn = browser.find_element_by_xpath(<span class="string">&#x27;.//a[@class=&quot;pn-next&quot;]&#x27;</span>)      <span class="comment"># ä¸‹ä¸€é¡µåœ°å€</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;next-disabled&#x27;</span> <span class="keyword">in</span> next_btn.get_attribute(<span class="string">&#x27;class&#x27;</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;æ²¡æœ‰ä¸‹ä¸€é¡µï¼ŒæŠ“å–å®Œæˆ&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            next_btn.click()</span><br><span class="line">	<span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">         <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure>
<h4 id="3-5-æ•°æ®è§£æ">3.5 æ•°æ®è§£æ</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">browser: WebDriver = response.browser</span><br><span class="line">    time.sleep(<span class="number">1.5</span>)</span><br><span class="line">    <span class="variable language_">self</span>.next_page(browser)</span><br><span class="line">    res = browser.page_source</span><br><span class="line">    html = etree.HTML(res)</span><br><span class="line">    page = <span class="string">&#x27;&#x27;</span>.join(html.xpath(<span class="string">&#x27;//span[@class=&quot;p-num&quot;]/a[@class=&quot;curr&quot;]/text()&#x27;</span>))  <span class="comment"># æå–å½“å‰é¡µé¢</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;æ­£åœ¨é‡‡é›†ç¬¬<span class="subst">&#123;page&#125;</span>ä¸ªé¡µé¢&#x27;</span>)</span><br><span class="line">    goods_ids = html.xpath(</span><br><span class="line">        <span class="string">&#x27;.//ul[@class=&quot;gl-warp clearfix&quot;]/li[@class=&quot;gl-item&quot;]/@data-sku&#x27;</span>)  <span class="comment"># è·å–å•†å“idå·     ä½œä¸ºé¡µé¢çš„idå·</span></span><br><span class="line">    goods_names_tag = html.xpath(<span class="string">&#x27;.//div[@class=&quot;p-name p-name-type-2&quot;]/a/em&#x27;</span>)  <span class="comment"># æå–å•†å“æ ‡é¢˜</span></span><br><span class="line">    goods_prices = html.xpath(<span class="string">&#x27;.//div[@class=&quot;p-price&quot;]//i&#x27;</span>)  <span class="comment"># æå–å•†å“ä»·æ ¼</span></span><br><span class="line">    goods_stores_tag = html.xpath(<span class="string">&#x27;.//div[@class=&quot;p-shop&quot;]&#x27;</span>)  <span class="comment"># æå–åº—é“º</span></span><br><span class="line">    goods_commits = html.xpath(<span class="string">&#x27;.//div[@class=&quot;p-commit&quot;]//a&#x27;</span>)  <span class="comment"># æå–è¯„ä»·</span></span><br><span class="line">    goods_names = []</span><br><span class="line">    <span class="keyword">for</span> goods_name <span class="keyword">in</span> goods_names_tag:</span><br><span class="line">        goods_names.append(goods_name.xpath(<span class="string">&#x27;string(.)&#x27;</span>).strip())</span><br><span class="line">    goods_stores = []</span><br><span class="line">    <span class="keyword">for</span> goods_store <span class="keyword">in</span> goods_stores_tag:</span><br><span class="line">        goods_stores.append(goods_store.xpath(<span class="string">&#x27;string(.)&#x27;</span>).strip())</span><br><span class="line">    goods_price = []</span><br><span class="line">    <span class="keyword">for</span> price <span class="keyword">in</span> goods_prices:</span><br><span class="line">        goods_price.append(price.xpath(<span class="string">&#x27;string(.)&#x27;</span>).strip())</span><br><span class="line">    goods_commit = []</span><br><span class="line">    <span class="keyword">for</span> commit <span class="keyword">in</span> goods_commits:</span><br><span class="line">        goods_commit.append(commit.xpath(<span class="string">&#x27;string(.)&#x27;</span>).strip())</span><br></pre></td></tr></table></figure>
<h4 id="3-6-æ•°æ®å…¥åº“">3.6 æ•°æ®å…¥åº“</h4>
<p>æ›´æ”¹é…ç½®æ–‡ä»¶</p>
<ul>
<li>æ”¾å¼€mongoæ³¨é‡Š</li>
<li>æ”¾å¼€ç®¡é“mongoæ³¨é‡Š</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> feapder <span class="keyword">import</span> Item</span><br><span class="line">	...</span><br><span class="line">item = Item()  <span class="comment"># å£°æ˜ä¸€ä¸ªitem</span></span><br><span class="line">item.table_name = <span class="string">&quot;test_mongo&quot;</span>  <span class="comment"># æŒ‡å®šå­˜å‚¨çš„è¡¨å</span></span><br><span class="line">item.ID = goods_ids[i]</span><br><span class="line">item.æ ‡é¢˜ = goods_names[i]</span><br><span class="line">item.ä»·æ ¼ =goods_price[i]</span><br><span class="line">item.åº—é“º = goods_stores[i]</span><br><span class="line"><span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure>
<h2 id="Scrapy-Redis-åˆ†å¸ƒå¼">Scrapy-Redis åˆ†å¸ƒå¼</h2>
<h3 id="1-åˆ†å¸ƒå¼æ¦‚è¿°">1 åˆ†å¸ƒå¼æ¦‚è¿°</h3>
<h4 id="1-0-scrapy-redisæ˜¯ä»€ä¹ˆ">1.0 scrapy-redisæ˜¯ä»€ä¹ˆ</h4>
<p>ä¹‹å‰æˆ‘ä»¬å·²ç»å­¦ä¹ äº†Scrapyï¼Œå®ƒæ˜¯ä¸€ä¸ªé€šç”¨çš„çˆ¬è™«æ¡†æ¶ï¼Œèƒ½å¤Ÿè€—è´¹å¾ˆå°‘çš„æ—¶é—´å°±èƒ½å¤Ÿå†™å‡ºçˆ¬è™«ä»£ç </p>
<p>Scrapy-redisæ˜¯scrapyçš„ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒä½¿ç”¨äº†Redisæ•°æ®åº“åšä¸ºåŸºç¡€ï¼Œç›®çš„ä¸ºäº†æ›´æ–¹ä¾¿åœ°è®©Scrapyå®ç°åˆ†å¸ƒå¼çˆ¬å–</p>
<p>Scrapyèƒ½åšçš„äº‹æƒ…å¾ˆå¤šï¼Œä½†æ˜¯è¦åšåˆ°å¤§è§„æ¨¡çš„åˆ†å¸ƒå¼åº”ç”¨åˆ™æ‰è¥Ÿè§è‚˜ã€‚æœ‰èƒ½äººæ”¹å˜äº†Scrapyçš„é˜Ÿåˆ—è°ƒåº¦ï¼Œå°†èµ·å§‹çš„ç½‘å€ä»start_urlsé‡Œåˆ†ç¦»å‡ºæ¥ï¼Œæ”¹ä¸ºä»redisè¯»å–ï¼Œå¤šä¸ªå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶è¯»å–åŒä¸€ä¸ªredisï¼Œä»è€Œå®ç°äº†åˆ†å¸ƒå¼çš„çˆ¬è™«ã€‚</p>
<h4 id="1-1-åˆ†å¸ƒå¼ç®€ä»‹">1.1 åˆ†å¸ƒå¼ç®€ä»‹</h4>
<p>åˆ†å¸ƒå¼çˆ¬è™«ç”¨ä¸€ä¸ªå…±åŒçš„çˆ¬è™«ç¨‹åºï¼ŒåŒæ—¶éƒ¨ç½²åˆ°å¤šå°ç”µè„‘ä¸Šè¿è¡Œï¼Œè¿™æ ·å¯ä»¥ æé«˜çˆ¬è™«é€Ÿåº¦ï¼Œå®ç°åˆ†å¸ƒå¼çˆ¬è™«</p>
<p>å¤§å‹åˆ†å¸ƒå¼çˆ¬è™«ä¸»è¦åˆ†ä¸ºä»¥ä¸‹3ä¸ªå±‚çº§ï¼šåˆ†å¸ƒå¼æ•°æ®ä¸­å¿ƒã€åˆ†å¸ƒå¼æŠ“å–æœåŠ¡å™¨åŠåˆ†å¸ƒå¼çˆ¬è™«ç¨‹åº</p>
<p><strong>åˆ†å¸ƒå¼çˆ¬è™«çš„å‰æï¼š</strong></p>
<ol>
<li>è¦ä¿è¯æ¯ä¸€å°è®¡ç®—æœºéƒ½èƒ½å¤Ÿæ­£å¸¸çš„æ‰§è¡Œscrapyå‘½ä»¤ï¼Œèƒ½å¤Ÿå¯åŠ¨çˆ¬è™«ï¼Œè¿™æ˜¯å¯¹è®¡ç®—æœºç¡¬ä»¶çš„æœ€ä½æ°´å¹³ã€è®¡ç®—æœºç³»ç»Ÿç¯å¢ƒå’Œç½‘ç»œç­‰å¤šæ–¹é¢çš„åŸºæœ¬éœ€æ±‚ï¼Œä¸å†èµ˜è¿°ã€‚</li>
<li>è¦ä¿è¯æ‰€æœ‰çš„çˆ¬è™«ç¨‹åºå¯ä»¥è®¿é—®åŒä¸€ä¸ªé˜Ÿåˆ—</li>
</ol>
<p><strong>åˆ†å¸ƒå¼æ€è·¯ï¼š</strong><br>
1.åœ¨å­˜å…¥æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è§„å®šä¸€å°ç”µè„‘æ˜¯ä¸»æœºï¼Œæ‰€æœ‰äººéƒ½é“¾æ¥è¿™ä¸ªç”µè„‘æ•°æ®åº“å­˜å…¥æ•°æ®ã€‚<br>
2.æ•°æ®éƒ½æ˜¯é‡å¤çš„ã€‚â€”æ€ä¹ˆè®©æ•°æ®ä¸é‡å¤ï¼Œå°±å¯ä»¥å®ç°åˆ†å¸ƒå¼ã€‚</p>
<p>å¦‚æœå®ç°åˆ†å¸ƒå¼ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ªå…¬å…±çš„åŒºåŸŸï¼Œè®©å¤šå°ç”µè„‘å»å…¬å…±åŒºåŸŸé‡Œé¢æ‹¿ä»»åŠ¡ï¼Œè¿™ä¸ªæ€æƒ³å’Œå¤šçº¿ç¨‹ä»»åŠ¡åˆ†é…å¾ˆåƒã€‚</p>
<p>é€šè¿‡å…¬å…±ç®¡ç†å¯¹è±¡ï¼Œæ¥çº¦æŸæ¯ä¸€ä¸ªç›¸äº’ç‹¬ç«‹çš„èµ„æºæˆ–è€…ç¨‹åº</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282033432.png" alt=""></p>
<ul>
<li><code>Masterç«¯</code>(æ ¸å¿ƒæœåŠ¡å™¨) ï¼šä½¿ç”¨ <code>ubuntu18</code>ï¼Œæ­å»ºä¸€ä¸ª<code>Redis</code>æ•°æ®åº“ï¼Œä¸è´Ÿè´£çˆ¬å–ï¼Œåªè´Ÿè´£<strong>urlæŒ‡çº¹åˆ¤é‡ã€Requestçš„åˆ†é…ï¼Œä»¥åŠæ•°æ®çš„å­˜å‚¨</strong></li>
<li><code>Slaverç«¯</code>(çˆ¬è™«ç¨‹åºæ‰§è¡Œç«¯) ï¼šä½¿ç”¨ <code>Mac OS X</code> ã€<code>Ubuntu 18.04</code>, è´Ÿè´£æ‰§è¡Œçˆ¬è™«ç¨‹åºï¼Œè¿è¡Œè¿‡ç¨‹ä¸­æäº¤æ–°çš„<code>Request</code>ç»™<code>Master</code></li>
</ul>
<h4 id="1-2-æ¡†æ¶ç®€ä»‹">1.2 æ¡†æ¶ç®€ä»‹</h4>
<h5 id="1-2-1-ç¯å¢ƒå»ºè®¾">1.2.1  ç¯å¢ƒå»ºè®¾</h5>
<ul>
<li>å¼€æºåœ°å€ï¼š <a target="_blank" rel="noopener" href="https://github.com/rmax/scrapy-redis.git">https://github.com/rmax/scrapy-redis.git</a></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip  install scrapy-redis</span><br></pre></td></tr></table></figure>
<ul>
<li>Scheduler</li>
<li>Duplication Filter</li>
<li>Item Pipline</li>
<li>Base Spider</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282033648.png" alt=""></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šscrapy-redisåœ¨scrapyçš„æ¶æ„ä¸Šå¢åŠ äº†redisï¼ŒåŸºäºredisç‰¹æ€§å¢åŠ äº†å¦‚ä¸‹ç»„ä»¶ã€‚</p>
<h5 id="1-2-2-scrapy-redisç»„ä»¶">1.2.2 scrapy-redisç»„ä»¶</h5>
<p><strong>1. Schedulerï¼ˆè°ƒåº¦ï¼‰ï¼š</strong></p>
<p><code>scrapy</code>æ”¹é€ äº†<code>python</code>æœ¬æ¥çš„<code>collection.deque</code>(åŒå‘é˜Ÿåˆ—)å½¢æˆäº†è‡ªå·±<code>scrapy queue</code>ï¼Œè€Œ<code>scrapy-redis</code> çš„è§£å†³æ˜¯æŠŠè¿™ä¸ª<code>scrapy queue</code>æ¢æˆ<code>redis</code>æ•°æ®åº“ï¼Œä»åŒä¸€ä¸ª<code>redis-server</code>å­˜æ”¾è¦çˆ¬å–çš„<code>request</code>ï¼Œä¾¿èƒ½è®©å¤šä¸ª<code>spider</code>å»åŒä¸€ä¸ªæ•°æ®åº“é‡Œè¯»å–ã€‚</p>
<p>Scrapyä¸­è·Ÿâ€œå¾…çˆ¬é˜Ÿåˆ—â€ç›´æ¥ç›¸å…³çš„å°±æ˜¯è°ƒåº¦å™¨<code>Scheduler</code>ï¼Œå®ƒè´Ÿè´£å¯¹æ–°çš„requestè¿›è¡Œå…¥åˆ—æ“ä½œï¼ˆåŠ å…¥Scrapy queueï¼‰ï¼Œå–å‡ºä¸‹ä¸€ä¸ªè¦çˆ¬å–çš„requestï¼ˆä»Scrapy queueä¸­å–å‡ºï¼‰ç­‰æ“ä½œã€‚å®ƒæŠŠå¾…çˆ¬é˜Ÿåˆ—æŒ‰ç…§ä¼˜å…ˆçº§å»ºç«‹äº†ä¸€ä¸ªå­—å…¸ç»“æ„ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ä¼˜å…ˆçº§<span class="number">0</span> : é˜Ÿåˆ—0</span><br><span class="line">    ä¼˜å…ˆçº§<span class="number">1</span> : é˜Ÿåˆ—1</span><br><span class="line">    ä¼˜å…ˆçº§<span class="number">2</span> : é˜Ÿåˆ—2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ ¹æ®requestä¸­çš„ä¼˜å…ˆçº§ï¼Œæ¥å†³å®šè¯¥å…¥å“ªä¸ªé˜Ÿåˆ—ï¼Œå‡ºåˆ—æ—¶åˆ™æŒ‰ä¼˜å…ˆçº§è¾ƒå°çš„ä¼˜å…ˆå‡ºåˆ—ã€‚ä¸ºäº†ç®¡ç†è¿™ä¸ªæ¯”è¾ƒé«˜çº§çš„é˜Ÿåˆ—å­—å…¸ï¼ŒScheduleréœ€è¦æä¾›ä¸€ç³»åˆ—çš„æ–¹æ³•ã€‚ä½†æ˜¯åŸæ¥çš„Schedulerå·²ç»æ— æ³•ä½¿ç”¨ï¼Œæ‰€ä»¥ä½¿ç”¨Scrapy-redisçš„schedulerç»„ä»¶ã€‚</p>
<p><strong>2. Duplication Filterï¼ˆå»é‡ï¼‰ï¼š</strong></p>
<p>Scrapyä¸­ç”¨é›†åˆå®ç°è¿™ä¸ªrequestå»é‡åŠŸèƒ½ï¼ŒScrapyä¸­æŠŠå·²ç»å‘é€çš„requestæŒ‡çº¹æ”¾å…¥åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼ŒæŠŠä¸‹ä¸€ä¸ªrequestçš„æŒ‡çº¹æ‹¿åˆ°é›†åˆä¸­æ¯”å¯¹ï¼Œå¦‚æœè¯¥æŒ‡çº¹å­˜åœ¨äºé›†åˆä¸­ï¼Œè¯´æ˜è¿™ä¸ªrequestå‘é€è¿‡äº†ï¼Œå¦‚æœæ²¡æœ‰åˆ™ç»§ç»­æ“ä½œã€‚è¿™ä¸ªæ ¸å¿ƒçš„åˆ¤é‡åŠŸèƒ½æ˜¯è¿™æ ·å®ç°çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">request_seen</span>(<span class="params">self, request</span>):</span><br><span class="line">    <span class="comment"># self.request_figerprintså°±æ˜¯ä¸€ä¸ªæŒ‡çº¹é›†åˆ  </span></span><br><span class="line">    fp = <span class="variable language_">self</span>.request_fingerprint(request)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿™å°±æ˜¯åˆ¤é‡çš„æ ¸å¿ƒæ“ä½œ  </span></span><br><span class="line">    <span class="keyword">if</span> fp <span class="keyword">in</span> <span class="variable language_">self</span>.fingerprints:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="variable language_">self</span>.fingerprints.add(fp)</span><br><span class="line">    <span class="keyword">if</span> <span class="variable language_">self</span>.file:</span><br><span class="line">        <span class="variable language_">self</span>.file.write(fp + os.linesep)</span><br></pre></td></tr></table></figure>
<p>åœ¨scrapy-redisä¸­å»é‡æ˜¯ç”±<code>Duplication Filter</code>ç»„ä»¶æ¥å®ç°çš„ï¼Œå®ƒé€šè¿‡redisçš„set ä¸é‡å¤çš„ç‰¹æ€§ï¼Œå·§å¦™çš„å®ç°äº†Duplication Filterå»é‡ã€‚scrapy-redisè°ƒåº¦å™¨ä»å¼•æ“æ¥å—requestï¼Œå°†requestçš„æŒ‡çº¹å­˜â¼Šredisçš„setæ£€æŸ¥æ˜¯å¦é‡å¤ï¼Œå¹¶å°†ä¸é‡å¤çš„request pushå†™â¼Šredisçš„ request queueã€‚</p>
<p>å¼•æ“è¯·æ±‚request(Spiderå‘å‡ºçš„ï¼‰æ—¶ï¼Œè°ƒåº¦å™¨ä»redisçš„request queueé˜Ÿåˆ—â¾¥é‡Œæ ¹æ®ä¼˜å…ˆçº§pop å‡ºâ¼€ä¸ªrequest è¿”å›ç»™å¼•æ“ï¼Œå¼•æ“å°†æ­¤requestå‘ç»™spiderå¤„ç†ã€‚</p>
<p><strong>3. Item Piplineï¼ˆç®¡é“ï¼‰ï¼š</strong></p>
<p>å¼•æ“å°†(Spiderè¿”å›çš„)çˆ¬å–åˆ°çš„Itemç»™<code>Item Pipeline</code>ï¼Œ<code>scrapy-redis</code> çš„<code>Item Pipeline</code>å°†çˆ¬å–åˆ°çš„ <code>Item </code>å­˜â¼Š<code>redis</code>çš„<code> items queue</code>ã€‚</p>
<p>ä¿®æ”¹è¿‡<code>Item Pipeline</code>å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ ¹æ®<code>key</code>ä»<code>items queue</code>æå–<code>item</code>ï¼Œä»è€Œå®ç° <code>items processes</code>é›†ç¾¤ã€‚</p>
<p><strong>4. Base Spiderï¼ˆçˆ¬è™«ï¼‰ï¼š</strong></p>
<p>ä¸å†ä½¿ç”¨<code>scrapy</code>åŸæœ‰çš„<code>Spider</code>ç±»ï¼Œé‡å†™çš„<code>RedisSpider</code>ç»§æ‰¿äº†<code>Spider</code>å’Œ<code>RedisMixin</code>è¿™ä¸¤ä¸ªç±»ï¼Œ<code>RedisMixin</code>æ˜¯ç”¨æ¥ä»<code>redis</code>è¯»å–<code>url</code>çš„ç±»ã€‚</p>
<p>å½“æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªSpiderç»§æ‰¿RedisSpideræ—¶ï¼Œè°ƒç”¨setup_rediså‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šå»è¿æ¥redisæ•°æ®åº“ï¼Œç„¶åä¼šè®¾ç½®signals(ä¿¡å·)ï¼š</p>
<ul>
<li>ä¸€ä¸ªæ˜¯å½“spiderç©ºé—²æ—¶å€™çš„signalï¼Œä¼šè°ƒç”¨spider_idleå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è°ƒç”¨<code>schedule_next_request</code>å‡½æ•°ï¼Œä¿è¯spideræ˜¯ä¸€ç›´æ´»ç€çš„çŠ¶æ€ï¼Œå¹¶ä¸”æŠ›å‡ºDontCloseSpiderå¼‚å¸¸ã€‚</li>
<li>ä¸€ä¸ªæ˜¯å½“æŠ“åˆ°ä¸€ä¸ªitemæ—¶çš„signalï¼Œä¼šè°ƒç”¨item_scrapedå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè°ƒç”¨<code>schedule_next_request</code>å‡½æ•°ï¼Œè·å–ä¸‹ä¸€ä¸ªrequestã€‚</li>
</ul>
<h3 id="2-åˆ†å¸ƒå¼é…ç½®">2 åˆ†å¸ƒå¼é…ç½®</h3>
<h4 id="2-1-redisé…ç½®">2.1 redisé…ç½®</h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒRedisæœåŠ¡å€¼è¿è¡Œæœ¬åœ°ç”µè„‘è®¿é—®ï¼Œå³Redisè¿è¡Œåœ¨å“ªå°ç”µè„‘å°±åªå…è®¸è¿™å°ç”µè„‘ä¸Šçš„è½¯ä»¶è¿æ¥è¯•ç”¨å®ƒ</p>
<p>æ—¢ç„¶æˆ‘ä»¬è¦åšåˆ†å¸ƒå¼çˆ¬å–ï¼Œå°±æ„å‘³ç€åˆ«çš„ç”µè„‘ä¹Ÿéœ€è¦è®¿é—®Redisï¼Œå› æ­¤éœ€è¦å¯¹Redisè¿›è¡Œé…ç½®</p>
<p>é…ç½®å‚è€ƒåœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/masonblog/p/12726914.html">https://www.cnblogs.com/masonblog/p/12726914.html</a></p>
<ol>
<li>
<p>åˆ«å¿˜äº†ä¿®æ”¹çˆ¬è™«çš„é…ç½®æ–‡ä»¶<code>settings.py</code>ï¼Œå°†RedisæœåŠ¡å™¨åœ°å€æ”¹ä¸ºä½ è¿è¡ŒRedisçš„æœåŠ¡å™¨çš„ip</p>
</li>
<li>
<p>æœåŠ¡å™¨å®‰è£…ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_60028455/article/details/125316625">https://blog.csdn.net/m0_60028455/article/details/125316625</a></p>
</li>
</ol>
<h4 id="2-2-æ ¸å¿ƒé…ç½®">2.2 æ ¸å¿ƒé…ç½®</h4>
<p>é¦–å…ˆæœ€ä¸»è¦çš„æ˜¯ï¼Œéœ€è¦å°†è°ƒåº¦å™¨çš„ç±»å’Œå»é‡çš„ç±»æ›¿æ¢ä¸º <code>Scrapy-Redis </code>æä¾›çš„ç±»ï¼Œåœ¨ <code>settings.py</code> é‡Œé¢æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SCHEDULER = <span class="string">&quot;scrapy_redis.scheduler.Scheduler&quot;</span></span><br><span class="line">DUPEFILTER_CLASS = <span class="string">&quot;scrapy_redis.dupefilter.RFPDupeFilter&quot;</span></span><br></pre></td></tr></table></figure>
<p>ç›´æ¥åœ¨ <code>settings.py</code> é‡Œé¢é…ç½®ä¸º <code>REDIS_URL</code> å˜é‡å³å¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis://[:password]@host:port/db</span><br><span class="line"></span><br><span class="line">REDIS_URL = <span class="string">&#x27;redis://172.25.197.89:6379/0&#x27;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-2-1-é…ç½®è°ƒåº¦é˜Ÿåˆ—">2.2.1 é…ç½®è°ƒåº¦é˜Ÿåˆ—</h5>
<p>æ­¤é¡¹é…ç½®æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤ä½¿ç”¨ <code>PriorityQueue</code>ã€‚å¦‚æœæƒ³è¦æ›´æ”¹é…ç½®ï¼Œå¯ä»¥é…ç½® SCHEDULER_QUEUE_CLASS å˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SCHEDULER_QUEUE_CLASS = <span class="string">&#x27;scrapy_redis.queue.PriorityQueue&#x27;</span>  <span class="comment"># ä½¿ç”¨æœ‰åºé›†åˆæ¥å­˜å‚¨</span></span><br><span class="line">SCHEDULER_QUEUE_CLASS = <span class="string">&#x27;scrapy_redis.queue.FifoQueue&#x27;</span>  <span class="comment"># å…ˆè¿›å…ˆå‡º</span></span><br><span class="line">SCHEDULER_QUEUE_CLASS = <span class="string">&#x27;scrapy_redis.queue.LifoQueue&#x27;</span>  <span class="comment"># å…ˆè¿›åå‡ºã€åè¿›å…ˆå‡º</span></span><br></pre></td></tr></table></figure>
<h5 id="2-2-2-é…ç½®æŒä¹…åŒ–">2.2.2 é…ç½®æŒä¹…åŒ–</h5>
<p>æ­¤é…ç½®æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤æ˜¯ Falseã€‚Scrapy-Redis é»˜è®¤ä¼šåœ¨çˆ¬å–å…¨éƒ¨å®Œæˆåæ¸…ç©ºçˆ¬å–é˜Ÿåˆ—å’Œå»é‡æŒ‡çº¹é›†åˆã€‚</p>
<p>å¦‚æœä¸æƒ³è‡ªåŠ¨æ¸…ç©ºçˆ¬å–é˜Ÿåˆ—å’Œå»é‡æŒ‡çº¹é›†åˆï¼Œå¯ä»¥å¢åŠ å¦‚ä¸‹é…ç½®ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SCHEDULER_PERSIST = <span class="literal">True</span>   <span class="comment"># åº•å±‚ å°±æ˜¯ç›‘å¬çˆ¬è™«ä¿¡å·  è§¦å‘redisæŒ‡ä»¤ æ¸…ç©ºæ•°æ®åº“</span></span><br></pre></td></tr></table></figure>
<h5 id="2-2-3-é…ç½®é‡çˆ¬">2.2.3 é…ç½®é‡çˆ¬</h5>
<p>æ­¤é…ç½®æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤æ˜¯ Falseã€‚å¦‚æœé…ç½®äº†æŒä¹…åŒ–æˆ–è€…å¼ºåˆ¶ä¸­æ–­äº†çˆ¬è™«ï¼Œé‚£ä¹ˆçˆ¬å–é˜Ÿåˆ—å’ŒæŒ‡çº¹é›†åˆä¸ä¼šè¢«æ¸…ç©ºï¼Œçˆ¬è™«é‡æ–°å¯åŠ¨ä¹‹åå°±ä¼šæ¥ç€ä¸Šæ¬¡çˆ¬å–ã€‚å¦‚æœæƒ³é‡æ–°çˆ¬å–ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®é‡çˆ¬çš„é€‰é¡¹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SCHEDULER_FLUSH_ON_START = <span class="literal">True</span>  </span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°† SCHEDULER_FLUSH_ON_START è®¾ç½®ä¸º True ä¹‹åï¼Œçˆ¬è™«æ¯æ¬¡å¯åŠ¨æ—¶ï¼Œçˆ¬å–é˜Ÿåˆ—å’ŒæŒ‡çº¹é›†åˆéƒ½ä¼šæ¸…ç©ºã€‚æ‰€ä»¥è¦åšåˆ†å¸ƒå¼çˆ¬å–ï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯åªèƒ½æ¸…ç©ºä¸€æ¬¡ï¼Œå¦åˆ™æ¯ä¸ªçˆ¬è™«ä»»åŠ¡åœ¨å¯åŠ¨æ—¶éƒ½æ¸…ç©ºä¸€æ¬¡ï¼Œå°±ä¼šæŠŠä¹‹å‰çš„çˆ¬å–é˜Ÿåˆ—æ¸…ç©ºï¼ŒåŠ¿å¿…ä¼šå½±å“åˆ†å¸ƒå¼çˆ¬å–ã€‚</p>
<p><strong>scrapy-redisé”®åä»‹ç»</strong></p>
<hr>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282033286.png" alt="img"></p>
<h3 id="3-é¡¹ç›®å®æˆ˜">3 é¡¹ç›®å®æˆ˜</h3>
<h4 id="3-1-ç›®æ ‡åœ°å€">3.1 ç›®æ ‡åœ°å€</h4>
<ul>
<li>é¦–é¡µ:<a target="_blank" rel="noopener" href="http://gz.jumei.com/">http://gz.jumei.com/</a></li>
<li>æ•°æ®:<a target="_blank" rel="noopener" href="http://search.jumei.com/?filter=0-11-1&amp;search=%E4%BF%9D%E6%B9%BF&amp;from=search_toplist_%E4%BF%9D%E6%B9%BF_word_pos_1&amp;cat=">http://search.jumei.com/?filter=0-11-1&amp;search=ä¿æ¹¿&amp;from=search_toplist_ä¿æ¹¿_word_pos_1&amp;cat=</a></li>
</ul>
<h4 id="3-2-é¡¹ç›®åˆ†æ">3.2 é¡¹ç›®åˆ†æ</h4>
<p>æ•°æ®é¡µé¢ï¼Œä»å›¾å¯ä»¥çœ‹å‡ºï¼Œæ•°æ®å…¨åœ¨htmlé¡µé¢é‡Œé¢ï¼Œå¯ä»¥ä½¿ç”¨xpathè¿›è¡Œæå–</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="C:/Users/XL/AppData/Roaming/Typora/typora-user-images/image-20220919130329632.png" alt="image-20220919130329632"></p>
<h4 id="3-3-é¡¹ç›®ç»“æ„">3.3 é¡¹ç›®ç»“æ„</h4>
<p><strong>æ”¹å†™spideræ–‡ä»¶</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">from</span> scrapy_redis.spiders <span class="keyword">import</span> RedisSpider</span><br><span class="line"><span class="keyword">from</span> jmyp.items <span class="keyword">import</span> JmypItem</span><br><span class="line"><span class="keyword">from</span> scrapy_redis.dupefilter <span class="keyword">import</span> RFPDupeFilter</span><br><span class="line"><span class="keyword">from</span> scrapy_redis.scheduler <span class="keyword">import</span> Scheduler</span><br><span class="line"><span class="keyword">from</span> scrapy_redis.queue <span class="keyword">import</span> PriorityQueue,LifoQueue,FifoQueue</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MmSpider</span>(<span class="title class_ inherited__">RedisSpider</span>):</span><br><span class="line">    name = <span class="string">&#x27;mm&#x27;</span></span><br><span class="line">    <span class="comment"># allowed_domains = [&#x27;jumei.com&#x27;]</span></span><br><span class="line">    <span class="comment"># start_urls = [&#x27;http://gz.jumei.com/&#x27;]</span></span><br><span class="line">    <span class="comment"># keyword = [&#x27;ä¿æ¹¿&#x27;,&#x27;é¦™æ°´&#x27;]</span></span><br><span class="line">    redis_key = <span class="string">&#x27;lisi&#x27;</span></span><br><span class="line">    <span class="comment"># lpush lisi http://search.jumei.com/?filter=0-11-1&amp;search=é¦™æ°´</span></span><br><span class="line">    <span class="comment"># def start_requests(self):</span></span><br><span class="line">    <span class="comment">#     for i in self.keyword[1:]:</span></span><br><span class="line">    <span class="comment">#         url = f&#x27;http://search.jumei.com/?filter=0-11-1&amp;search=&#123;i&#125;&#x27;</span></span><br><span class="line">    <span class="comment">#         yield scrapy.Request(url=url)</span></span><br><span class="line"></span><br><span class="line">    rules = &#123;</span><br><span class="line">        <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;.//div[@class=&quot;s_l_name&quot;]/a//text()&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;price&#x27;</span>: <span class="string">&#x27;.//div[@class=&quot;search_list_price&quot;]/span/text()&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;link&#x27;</span>: <span class="string">&#x27;.//div[@class=&quot;s_l_pic&quot;]/a/@href&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        html = etree.HTML(response.text)</span><br><span class="line">        good_list = html.xpath(<span class="string">&#x27;//div[@class=&quot;products_wrap&quot;]/ul/li&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> data <span class="keyword">in</span> good_list[<span class="number">1</span>:<span class="number">3</span>]:</span><br><span class="line">            items = JmypItem()</span><br><span class="line">            <span class="comment"># items = &#123;&#125;</span></span><br><span class="line">            items[<span class="string">&#x27;title&#x27;</span>] = <span class="variable language_">self</span>.get_title(data)</span><br><span class="line">            items[<span class="string">&#x27;price&#x27;</span>] = <span class="variable language_">self</span>.get_price(data)</span><br><span class="line">            items[<span class="string">&#x27;link&#x27;</span>] = <span class="variable language_">self</span>.get_link(data)</span><br><span class="line">            <span class="comment"># print(items)</span></span><br><span class="line">            <span class="keyword">yield</span> items</span><br><span class="line"></span><br><span class="line">        <span class="built_in">next</span> = html.xpath(<span class="string">&#x27;//ul[@class=&quot;page-nav&quot;]/li[@class=&quot;last&quot;]&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">next</span>:</span><br><span class="line">            page = <span class="string">&#x27;&#x27;</span>.join(html.xpath(<span class="string">&#x27;//a[@class=&quot;next&quot;]/@href&#x27;</span>))</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url=page)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_title</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="comment"># æ ‡é¢˜</span></span><br><span class="line">        title = <span class="string">&#x27;&#x27;</span>.join(x.xpath(<span class="variable language_">self</span>.rules[<span class="string">&#x27;title&#x27;</span>])).strip()</span><br><span class="line">        <span class="keyword">return</span> title</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_price</span>(<span class="params">self,x</span>):</span><br><span class="line">        price = <span class="string">&#x27;&#x27;</span>.join(x.xpath(<span class="variable language_">self</span>.rules[<span class="string">&#x27;price&#x27;</span>]))</span><br><span class="line">        <span class="keyword">return</span> price</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_link</span>(<span class="params">self,x</span>):</span><br><span class="line">        link = <span class="string">&#x27;&#x27;</span>.join(x.xpath(<span class="variable language_">self</span>.rules[<span class="string">&#x27;link&#x27;</span>]))</span><br><span class="line">        <span class="keyword">return</span> link</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>itemæ–‡ä»¶ç¼–å†™</strong></p>
<ul>
<li>ç¼–å†™itemæ–‡ä»¶ï¼Œå®šä¹‰æ•°æ®ç»“æ„</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">JmypItem</span>(scrapy.Item):</span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    title = scrapy.Field()</span><br><span class="line">    price = scrapy.Field()</span><br><span class="line">    link = scrapy.Field()</span><br></pre></td></tr></table></figure>
<p><strong>scrapy-redis æ”¹å†™</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">    <span class="string">&#x27;jmyp.pipelines.JmypPipeline&#x27;</span>: <span class="number">290</span>,</span><br><span class="line">    <span class="string">&#x27;scrapy_redis.pipelines.RedisPipeline&#x27;</span>: <span class="number">300</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># æŒ‡å®šä½¿ç”¨scrapy-redisçš„å»é‡</span></span><br><span class="line">DUPEFILTER_CLASS = <span class="string">&#x27;scrapy_redis.dupefilters.RFPDupeFilter&#x27;</span></span><br><span class="line"><span class="comment"># æŒ‡å®šä½¿ç”¨scrapy-redisçš„è°ƒåº¦å™¨</span></span><br><span class="line">SCHEDULER = <span class="string">&quot;scrapy_redis.scheduler.Scheduler&quot;</span></span><br><span class="line"><span class="comment"># é»˜è®¤çš„ æŒ‰ä¼˜å…ˆçº§æ’åº(Scrapyé»˜è®¤)ï¼Œç”±sorted setå®ç°çš„ä¸€ç§éFIFOã€LIFOæ–¹å¼ã€‚</span></span><br><span class="line">SCHEDULER_QUEUE_CLASS = <span class="string">&#x27;scrapy_redis.queue.SpiderPriorityQueue&#x27;</span></span><br><span class="line"><span class="comment"># redisè¿æ¥</span></span><br><span class="line">REDIS_URL = <span class="string">&#x27;redis://172.25.197.89:6379/0&#x27;</span></span><br><span class="line"><span class="comment">#é»˜è®¤æƒ…å†µä¸‹,RFPDupeFilteråªè®°å½•ç¬¬ä¸€ä¸ªé‡å¤è¯·æ±‚ã€‚å°†DUPEFILTER_DEBUGè®¾ç½®ä¸ºTrueä¼šè®°å½•æ‰€æœ‰é‡å¤çš„è¯·æ±‚ã€‚</span></span><br><span class="line">DUPEFILTER_DEBUG =<span class="literal">True</span></span><br><span class="line"><span class="comment"># åœ¨redisä¸­ä¿æŒscrapy-redisç”¨åˆ°çš„å„ä¸ªé˜Ÿåˆ—ï¼Œä»è€Œå…è®¸æš‚åœå’Œæš‚åœåæ¢å¤ï¼Œä¹Ÿå°±æ˜¯ä¸æ¸…ç†redis queues</span></span><br><span class="line">SCHEDULER_PERSIST = <span class="literal">True</span></span><br></pre></td></tr></table></figure>
<p><strong>æ•°æ®ä¿å­˜åˆ°mongo</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"><span class="keyword">from</span> jmyp.items <span class="keyword">import</span> JmypItem</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">JmypPipeline</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        collection = pymongo.MongoClient()</span><br><span class="line">        <span class="variable language_">self</span>.conn = collection[<span class="string">&#x27;xxx&#x27;</span>][<span class="string">&#x27;xx&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_item</span>(<span class="params">self, item, spider</span>):</span><br><span class="line">        <span class="built_in">print</span>(item)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(item, JmypItem):</span><br><span class="line">            <span class="variable language_">self</span>.conn.insert_one(<span class="built_in">dict</span>(item))</span><br><span class="line">        <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
<p><strong>Scrapy-redisæ¡†æ¶æ‰§è¡Œè¿‡ç¨‹æ€»ç»“ï¼š</strong></p>
<ol>
<li>æœ€åæ€»ç»“ä¸€ä¸‹scrapy-redisçš„æ€»ä½“æ€è·¯ï¼šè¿™å¥—ç»„ä»¶é€šè¿‡é‡å†™schedulerå’Œ spiderç±»ï¼Œå®ç°äº†è°ƒåº¦ã€spiderå¯åŠ¨å’Œredisçš„äº¤äº’ã€‚</li>
<li>å®ç°æ–°çš„dupefilterå’Œqueueç±»ï¼Œè¾¾åˆ°äº†åˆ¤é‡å’Œè°ƒåº¦å®¹å™¨å’Œredis çš„äº¤äº’ï¼Œå› ä¸ºæ¯ä¸ªä¸»æœºä¸Šçš„çˆ¬è™«è¿›ç¨‹éƒ½è®¿é—®åŒä¸€ä¸ªredisæ•°æ®åº“ï¼Œæ‰€ä»¥è°ƒåº¦å’Œåˆ¤é‡éƒ½ç»Ÿä¸€è¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œè¾¾åˆ°äº†åˆ†å¸ƒå¼çˆ¬è™«çš„ç›®çš„ã€‚</li>
<li>å½“spiderè¢«åˆå§‹åŒ–æ—¶ï¼ŒåŒæ—¶ä¼šåˆå§‹åŒ–ä¸€ä¸ªå¯¹åº”çš„schedulerå¯¹è±¡ï¼Œè¿™ä¸ªè°ƒåº¦å™¨å¯¹è±¡é€šè¿‡è¯»å–settingsï¼Œé…ç½®å¥½è‡ªå·±çš„è°ƒåº¦å®¹å™¨queueå’Œåˆ¤é‡å·¥å…·dupefilterã€‚</li>
<li>æ¯å½“ä¸€ä¸ªspideräº§å‡ºä¸€ä¸ªrequestçš„æ—¶å€™ï¼Œscrapyå¼•æ“ä¼šæŠŠè¿™ä¸ªreuqesté€’äº¤ç»™è¿™ä¸ªspiderå¯¹åº”çš„schedulerå¯¹è±¡è¿›è¡Œè°ƒåº¦ï¼Œschedulerå¯¹è±¡é€šè¿‡è®¿é—®rediså¯¹requestè¿›è¡Œåˆ¤é‡ï¼Œå¦‚æœä¸é‡å¤å°±æŠŠä»–æ·»åŠ è¿›redisä¸­çš„è°ƒåº¦å™¨é˜Ÿåˆ—é‡Œã€‚å½“è°ƒåº¦æ¡ä»¶æ»¡è¶³æ—¶ï¼Œschedulerå¯¹è±¡å°±ä»redisçš„è°ƒåº¦å™¨é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªrequestå‘é€ç»™spiderï¼Œè®©ä»–çˆ¬å–ã€‚</li>
<li>å½“spiderçˆ¬å–çš„æ‰€æœ‰æš‚æ—¶å¯ç”¨urlä¹‹åï¼Œschedulerå‘ç°è¿™ä¸ªspiderå¯¹åº”çš„redisçš„è°ƒåº¦å™¨é˜Ÿåˆ—ç©ºäº†ï¼Œäºæ˜¯è§¦å‘ä¿¡å·spider_idleï¼Œspideræ”¶åˆ°è¿™ä¸ªä¿¡å·ä¹‹åï¼Œç›´æ¥è¿æ¥redisè¯»å–start_urlsæ± ï¼Œæ‹¿å–æ–°çš„ä¸€æ‰¹urlå…¥å£ï¼Œç„¶åå†æ¬¡é‡å¤ä¸Šè¾¹çš„å·¥ä½œã€‚</li>
</ol>
<h3 id="4-æ‰©å±•æ–¹é¢">4 æ‰©å±•æ–¹é¢</h3>
<p>redisåœ°å€</p>
<ul>
<li>redisæœåŠ¡ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42405819/article/details/125711224">https://blog.csdn.net/weixin_42405819/article/details/125711224</a></li>
<li>rediså¯è§†åŒ–ï¼š<a target="_blank" rel="noopener" href="https://goanother.com/cn/#download">https://goanother.com/cn/#download</a></li>
</ul>
<p>å­ç³»ç»Ÿå®‰è£…ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_60028455/article/details/125316625">https://blog.csdn.net/m0_60028455/article/details/125316625</a></p>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>
<p>æ–°çš„ubuntuåœ¨æœ¬åœ°è¿æ¥ï¼Œéœ€è¦å®‰è£…sshæœåŠ¡ç«¯</p>
</li>
<li>
<p>æœ¬è¯¾ç¨‹ç»ƒä¹ ï¼Œéœ€è¦åœ¨æœåŠ¡å™¨å®‰è£…redis</p>
</li>
<li>
<p>è§£é‡Šå™¨ï¼š<a target="_blank" rel="noopener" href="https://docs.conda.io/en/latest/miniconda.html#">https://docs.conda.io/en/latest/miniconda.html#</a></p>
</li>
</ul>
<h2 id="çˆ¬è™«é¡¹ç›®éƒ¨ç½²">çˆ¬è™«é¡¹ç›®éƒ¨ç½²</h2>
<p>å‰æœŸå·¥ä½œ</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è™šæ‹Ÿæœºå®‰è£…ï¼ˆé‡Œé¢çš„é•œåƒé€‚ç”¨vm16ï¼‰</span><br><span class="line"><span class="comment"># xshell  ä¸‹è½½</span></span><br><span class="line">é“¾æ¥ï¼šhttps:<span class="regexp">//</span>pan.baidu.com<span class="regexp">/s/</span><span class="number">1</span>Y44erVDYgScE_fAEDhLAnQ</span><br><span class="line">æå–ç ï¼šfyum</span><br><span class="line">é‡Œé¢çš„</span><br><span class="line">    ç”¨æˆ·å  tuling   å¯†ç  root</span><br><span class="line">    mysql  ç”¨æˆ·å  root  å¯†ç  root</span><br></pre></td></tr></table></figure>
<h3 id="1-è„šæœ¬æ–‡ä»¶éƒ¨ç½²">1 è„šæœ¬æ–‡ä»¶éƒ¨ç½²</h3>
<p><code>linux</code>å†…ç½®çš„<code>cron</code>è¿›ç¨‹èƒ½å¸®æˆ‘ä»¬å®ç°è¿™äº›éœ€æ±‚ï¼Œ<code>cron</code>æ­é…<code>shell</code>è„šæœ¬ï¼Œéå¸¸å¤æ‚çš„æŒ‡ä»¤ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚</p>
<h4 id="1-1-crontabçš„ä½¿ç”¨">1.1 <code>crontab</code>çš„ä½¿ç”¨</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">crontab [-u username]ã€€ã€€ã€€ã€€//çœç•¥ç”¨æˆ·è¡¨è¡¨ç¤ºæ“ä½œå½“å‰ç”¨æˆ·çš„crontab</span><br><span class="line">    -e      (ç¼–è¾‘å·¥ä½œè¡¨)</span><br><span class="line">    -l      (åˆ—å‡ºå·¥ä½œè¡¨é‡Œçš„å‘½ä»¤)</span><br><span class="line">    -r      (åˆ é™¤å·¥ä½œ)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç”¨<strong>crontab -e</strong>è¿›å…¥å½“å‰ç”¨æˆ·çš„å·¥ä½œè¡¨ç¼–è¾‘ï¼Œæ˜¯å¸¸è§çš„vimç•Œé¢ã€‚æ¯è¡Œæ˜¯ä¸€æ¡å‘½ä»¤ã€‚</p>
<p><code>crontab</code>çš„å‘½ä»¤æ„æˆä¸º æ—¶é—´+åŠ¨ä½œï¼Œå…¶æ—¶é—´æœ‰<strong>åˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨</strong>äº”ç§ï¼Œæ“ä½œç¬¦æœ‰</p>
<ul>
<li>***** å–å€¼èŒƒå›´å†…çš„æ‰€æœ‰æ•°å­—</li>
<li><strong>/</strong> æ¯è¿‡å¤šå°‘ä¸ªæ•°å­—</li>
<li><strong>-</strong> ä»Xåˆ°Z</li>
<li>**ï¼Œ**æ•£åˆ—æ•°å­—</li>
</ul>
<table>
<thead>
<tr>
<th>ä»£è¡¨æ„ä¹‰</th>
<th>åˆ†é’Ÿ</th>
<th>å°æ—¶</th>
<th>æ—¥æœŸ</th>
<th>æœˆä»½</th>
<th>å‘¨</th>
<th>å‘½ä»¤</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ•°å­—èŒƒå›´</td>
<td>0~59</td>
<td>0~23</td>
<td>1~31</td>
<td>1~12</td>
<td>0~6</td>
<td>å°±å‘½ä»¤</td>
</tr>
</tbody>
</table>
<h4 id="1-2-ä¸ºå½“å‰ç”¨æˆ·åˆ›å»ºcronæœåŠ¡">1.2  <strong>ä¸ºå½“å‰ç”¨æˆ·åˆ›å»º<code>cron</code>æœåŠ¡</strong></h4>
<ul>
<li>å¯ä»¥é”®å…¥ <code>crontab -e </code>ç¼–è¾‘<code>crontab</code>æœåŠ¡æ–‡ä»¶</li>
</ul>
<p><strong>ä¸¾ä¾‹ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * *      <span class="comment">#æ¯åˆ†é’Ÿéƒ½æ‰§è¡Œ    </span></span><br></pre></td></tr></table></figure>
<p><strong>å®ä¾‹1:æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡æ–‡æ¡£å†™å…¥</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/<span class="number">1</span> * * * * echo <span class="string">&#x27;hello world&#x27;</span> &gt;&gt; /home/poppies/Documents/xialuo/demo/demo.txt</span><br></pre></td></tr></table></figure>
<p><strong>å®ä¾‹2ï¼šæ¯å°æ—¶çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>,<span class="number">15</span> * * * *  echo <span class="string">&#x27;hello world&#x27;</span> &gt;&gt; /home/xxoo/demo/demo.log		</span><br></pre></td></tr></table></figure>
<p><strong>å®ä¾‹ï¼šåœ¨ä¸Šåˆ8ç‚¹çš„20åˆ†é’Ÿæ‰§è¡Œ</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">20</span> <span class="number">8</span> * * * myCommand  </span><br></pre></td></tr></table></figure>
<h4 id="1-3-å•ä¸ªè„šæœ¬ä½¿ç”¨å®šæ—¶ä»»åŠ¡éƒ¨ç½²">1.3  å•ä¸ªè„šæœ¬ä½¿ç”¨å®šæ—¶ä»»åŠ¡éƒ¨ç½²</h4>
<h5 id="1-3-1-ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°æœåŠ¡å™¨">1.3.1 ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°æœåŠ¡å™¨</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp /path/filename username@servername:/path</span><br><span class="line">scp env_ps.py poppies@<span class="number">192.168</span><span class="number">.65</span><span class="number">.234</span>:/home/poppies/Documents/xialuo/demo</span><br></pre></td></tr></table></figure>
<h5 id="1-3-2-å®šæ—¶é‡‡é›†ä»»åŠ¡">1.3.2 å®šæ—¶é‡‡é›†ä»»åŠ¡</h5>
<p>1ã€ä½¿ç”¨å®šæ—¶ä»»åŠ¡å¯åŠ¨ æ¯5åˆ†é’Ÿé‡‡é›†ä¸€æ¬¡æ•°æ®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/<span class="number">5</span> * * * *  python /home/poppies/Documents/xialuo/ps/env_ps.py spider &gt;&gt; /home/poppies/Documents/xialuo/demo/demo.log</span><br></pre></td></tr></table></figure>
<h3 id="2-ä½¿ç”¨scrapydéƒ¨ç½²">2 ä½¿ç”¨<code>scrapyd</code>éƒ¨ç½²</h3>
<h4 id="2-1-ç¯å¢ƒå®‰è£…-2">2.1 ç¯å¢ƒå®‰è£…</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install scrapyd</span><br><span class="line">pip install scrapyd-client</span><br></pre></td></tr></table></figure>
<p>å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://scrapyd.readthedocs.io/en/stable/overview.html">https://scrapyd.readthedocs.io/en/stable/overview.html</a></p>
<p>ç”±äº<code>window</code>å…¼å®¹æ€§é—®é¢˜ï¼Œæ‰€ä»¥<code>scrapyd-deploy</code>æ— æ³•æ”¯æŒ</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\software\inters\python3\Scripts</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ <code>scrapyd-deploy.bat</code>æ ¼å¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@echo off</span></span><br><span class="line"><span class="string">&quot;D:\software\inters\python3\Scripts\python.exe&quot;</span> <span class="string">&quot;D:\software\inters\python3\Scripts\scrapyd-deploy&quot;</span> % *</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ <code>scrapyd-deploy -l</code> çœ‹åˆ°ä»¥ä¸‹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282034623.png" alt="image-20220921163146603"></p>
<p>â€‹</p>
<h4 id="2-2-æŸ¥è¯¢çŠ¶æ€">2.2 <strong>æŸ¥è¯¢çŠ¶æ€</strong></h4>
<p>è¿™ä¸ªæ¥å£è´Ÿè´£æŸ¥çœ‹ <code>Scrapyd</code> å½“å‰æœåŠ¡å’Œä»»åŠ¡çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>curl </code>å‘½ä»¤æ¥è¯·æ±‚è¿™ä¸ªæ¥å£ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6800</span>/daemonstatus.json </span><br></pre></td></tr></table></figure>
<h4 id="2-3-çˆ¬è™«éƒ¨ç½²">2.3 çˆ¬è™«éƒ¨ç½²</h4>
<p>1ã€æŠŠåŸå…ˆæ³¨é‡Šæ‰çš„<code>url</code>é‚£ä¸€è¡Œå–æ¶ˆæ³¨é‡Šï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦éƒ¨ç½²åˆ°ç›®æ ‡æœåŠ¡å™¨çš„åœ°å€ï¼Œ<br>
2ã€ æŠŠ[deploy]è¿™é‡Œæ”¹ä¸º[deploy:xl]ï¼Œè¿™é‡Œæ˜¯å‘½åä¸ºxlï¼Œå‘½åå¯ä»¥ä»»æ„æ€ä¹ˆéƒ½å¯ä»¥ï¼Œåªè¦èƒ½æ ‡è¯†å‡ºæ¥é¡¹ç›®å°±å¯ä»¥ã€‚<br>
ä¸‹è¾¹çš„project å°±æ˜¯æˆ‘ä»¬çš„å·¥ç¨‹åï¼Œåˆ°æ­¤é…ç½®æ–‡ä»¶æ›´æ”¹å®Œæˆã€‚</p>
<h5 id="2-3-1-å‘å¸ƒé¡¹ç›®">2.3.1 å‘å¸ƒé¡¹ç›®</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œtarget ä¸ºä½ çš„æœåŠ¡å™¨å‘½ä»¤ï¼Œprjectæ˜¯ä½ å·¥ç¨‹çš„åå­—ï¼Œå‘å¸ƒå·¥ç¨‹ä¹‹å‰æˆ‘ä»¬çš„scrapyd.cfgå¿…é¡»ä¿®æ”¹</span></span><br><span class="line"><span class="comment"># scrapyd-deploy éƒ¨ç½²å -p å·¥ç¨‹åç§°</span></span><br><span class="line">scrapyd-deploy xl -p xialuo</span><br></pre></td></tr></table></figure>
<h5 id="2-3-2-å¯åŠ¨çˆ¬è™«">2.3.2 <strong>å¯åŠ¨çˆ¬è™«</strong></h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PROJECT_NAMEå¡«å…¥ä½ çˆ¬è™«å·¥ç¨‹çš„åå­—ï¼ŒSPIDER_NAMEå¡«å…¥ä½ çˆ¬è™«çš„åå­—</span></span><br><span class="line">curl http://localhost:<span class="number">6800</span>/schedule.json -d project=xialuo -d spider=ps          </span><br></pre></td></tr></table></figure>
<h5 id="2-3-3-åœæ­¢çˆ¬è™«">2.3.3 <strong>åœæ­¢çˆ¬è™«</strong></h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:<span class="number">6800</span>/cancel.json -d project=huya -d job=86a3dd29d51811eca18f000ec6599497</span><br></pre></td></tr></table></figure>
<h5 id="2-3-4-æŸ¥çœ‹å½“å‰é¡¹ç›®">2.3.4 æŸ¥çœ‹å½“å‰é¡¹ç›®</h5>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://127.0.0.1:6800/listprojects.json</span><br></pre></td></tr></table></figure>
<h5 id="2-3-4-æŸ¥çœ‹è¯¦æƒ…">2.3.4 <strong>æŸ¥çœ‹è¯¦æƒ…</strong></h5>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:6800/listjobs.json?project=xialuo</span><br></pre></td></tr></table></figure>
<h5 id="2-3-5-äº¤äº’è°ƒè¯•">2.3.5 äº¤äº’è°ƒè¯•</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">data = &#123;&#125;</span><br><span class="line">data[<span class="string">&#x27;project&#x27;</span>] = <span class="string">&#x27;huya&#x27;</span></span><br><span class="line">data[<span class="string">&#x27;spider&#x27;</span>] = <span class="string">&#x27;hh&#x27;</span></span><br><span class="line">url = <span class="string">&#x27;http://127.0.0.1:6800/schedule.json&#x27;</span>  <span class="comment"># å¼€å¯çˆ¬è™«æ¥å£</span></span><br><span class="line">res = requests.post(url,data)</span><br><span class="line">res.json()  <span class="comment"># è·å–æ•°æ®   è¿”å›jobid</span></span><br><span class="line"><span class="built_in">print</span>(res.json())</span><br><span class="line"><span class="comment"># 1b51dd0ac37e11ea8543000c29c350ab</span></span><br><span class="line"><span class="comment"># åœæ­¢</span></span><br><span class="line">datas = &#123;&#125;</span><br><span class="line">datas[<span class="string">&#x27;project&#x27;</span>] = <span class="string">&#x27;xialuo&#x27;</span></span><br><span class="line">datas[<span class="string">&#x27;job&#x27;</span>] = res.json()[<span class="string">&#x27;jobid&#x27;</span>]</span><br><span class="line">res = requests.post(<span class="string">&#x27;http://127.0.0.1:6800/cancel.json&#x27;</span>,data)</span><br><span class="line"><span class="built_in">print</span>(res.text)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(requests.get(<span class="string">&#x27;http://localhost:6800/listjobs.json?project=huya&#x27;</span>).text)</span><br></pre></td></tr></table></figure>
<h3 id="3-Gerapyçˆ¬è™«éƒ¨ç½²">3 <code>Gerapy</code>çˆ¬è™«éƒ¨ç½²</h3>
<p>â€‹		æ˜¯ä¸€ä¸ª<strong>åŸºäº<code>Scrapyd</code>ï¼Œ<code>Scrapyd API</code>ï¼Œ<code>Django</code>ï¼Œ<code>Vue.js</code>æ­å»ºçš„åˆ†å¸ƒå¼çˆ¬è™«ç®¡ç†æ¡†æ¶</strong>ã€‚ç®€å•ç‚¹è¯´ï¼Œå°±æ˜¯ç”¨ä¸Šè¿°çš„<code>Scrapyd</code>å·¥å…·æ˜¯åœ¨å‘½ä»¤è¡Œè¿›è¡Œæ“ä½œï¼Œè€Œ<code>Gerapy</code>å°†å‘½ä»¤è¡Œå’Œå›¾å½¢ç•Œé¢è¿›è¡Œäº†å¯¹æ¥ï¼Œæˆ‘ä»¬åªéœ€è¦ç‚¹å‡»æŒ‰é’®å°±å¯å®Œæˆéƒ¨ç½²ï¼Œå¯åŠ¨ï¼Œåœæ­¢ï¼Œåˆ é™¤çš„æ“ä½œã€‚</p>
<h4 id="3-1-ç¯å¢ƒå®‰è£…">3.1 <strong>ç¯å¢ƒå®‰è£…</strong></h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install gerapy</span><br></pre></td></tr></table></figure>
<p>ä¸€ã€åˆ›å»ºæ–°é¡¹ç›®</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ã€€gerapy init</span><br></pre></td></tr></table></figure>
<p>äºŒã€å¯¹æ•°æ®åº“åˆå§‹åŒ–</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gerapy migrate      <span class="comment">#   gerapy ==&gt; python manage.py</span></span><br></pre></td></tr></table></figure>
<p>ä¸‰ã€å¯åŠ¨gerapyæœåŠ¡</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gerapy runserver</span><br></pre></td></tr></table></figure>
<p>å››ã€åˆ›å»ºç”¨æˆ·åå¯†ç </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gerapy createsuperuser </span><br></pre></td></tr></table></figure>
<h4 id="3-2-é¡¹ç›®éƒ¨ç½²">3.2 é¡¹ç›®éƒ¨ç½²</h4>
<h5 id="3-2-1-ç•Œé¢å±•ç¤º">3.2.1  ç•Œé¢å±•ç¤º</h5>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282034438.png" alt="image-20220921213145605"></p>
<h5 id="3-2-2-çˆ¬è™«éƒ¨ç½²">3.2.2 çˆ¬è™«éƒ¨ç½²</h5>
<p>1ã€æ‰“åŒ…ä¸Šä¼ </p>
<p>2ã€å¤åˆ¶ä»£ç åˆ°åŒ…å³å¯</p>
<h3 id="4-dockerå®¹å™¨">4 dockerå®¹å™¨</h3>
<h4 id="4-1-dockerç®€ä»‹">4.1 dockerç®€ä»‹</h4>
<p>æ‰“åŒ…ï¼šdockeræ‰“åŒ…å°±æ˜¯æŠŠè½¯ä»¶è¿è¡Œéœ€è¦çš„ä¾èµ–ã€ç¬¬ä¸‰æ–¹åº“ã€è½¯ä»¶æ‰“åŒ…æ”¾åˆ°ä¸€èµ·ï¼Œå˜æˆä¸€ä¸ªå®‰è£…åŒ…</p>
<p>åˆ†å‘ï¼šå¯ä»¥æŠŠæ‰“åŒ…çš„å®‰è£…åŒ…ä¸Šä¼ åˆ°ä»“åº“ã€å…¶ä»–äººå¯ä»¥ä¸‹è½½ä½¿ç”¨</p>
<p>éƒ¨ç½²ï¼šå°±æ˜¯æŠŠå®‰è£…åŒ…ä½¿ç”¨å‘½ä»¤è¿è¡Œèµ·æ¥ä½ çš„åº”ç”¨ï¼Œè‡ªåŠ¨æ¨¡æ‹Ÿç¯å¢ƒã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dockeræ˜¯å¼€å‘äººå‘˜å’Œç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨å®¹å™¨å¼€å‘ã€éƒ¨ç½²å’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å¹³å°ã€‚ä½¿ç”¨Linuxå®¹å™¨æ¥éƒ¨ç½²åº”ç”¨ç¨‹åºç§°ä¸ºé›†è£…ç®±åŒ–ã€‚ä½¿ç”¨dockerè½»æ¾éƒ¨ç½²åº”ç”¨ç¨‹åº</span><br></pre></td></tr></table></figure>
<p>é›†è£…ç®±åŒ–çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li>çµæ´»ï¼šå³ä½¿æ˜¯å¤æ‚çš„åº”ç”¨ç¨‹åºä¹Ÿå¯å°è£…ã€‚</li>
<li>è½»é‡çº§ï¼šå®¹å™¨åˆ©ç”¨å¹¶å…±äº«ä¸»æœºå†…æ ¸ã€‚</li>
<li>ä¾¿æºå¼ï¼šæ‚¨å¯ä»¥åœ¨æœ¬åœ°æ„å»ºï¼Œéƒ¨ç½²åˆ°äº‘ä¸Šå¹¶åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œã€‚</li>
<li>å¯æ‰©å±•æ€§ï¼šæ‚¨å¯ä»¥å¢åŠ å’Œè‡ªåŠ¨åˆ†å‘å®¹å™¨å‰¯æœ¬ã€‚</li>
<li>å¯å †å ï¼šæ‚¨å¯ä»¥å‚ç›´å †å æœåŠ¡å¹¶åŠæ—¶å¹¶åŠæ—¶å †å æœåŠ¡ã€‚</li>
</ul>
<h4 id="4-2-è™šæ‹Ÿæœºvirtual-machine">4.2 è™šæ‹Ÿæœºvirtual machine</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è™šæ‹Ÿæœº(<span class="keyword">virtual</span> machine)å°±æ˜¯å¸¦ç¯å¢ƒå®‰è£…çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚å®ƒå¯ä»¥åœ¨ä¸€ç§æ“ä½œç³»ç»Ÿé‡Œé¢è¿è¡Œå¦ä¸€ç§æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚åœ¨Windowsç³»ç»Ÿé‡Œé¢è¿è¡ŒLinuxç³»ç»Ÿã€‚åº”ç”¨ç¨‹åºå¯¹æ­¤æ¯«æ— æ„ŸçŸ¥ï¼Œå› ä¸ºè™šæ‹Ÿæœºçœ‹ä¸Šå»è·ŸçœŸä¸ç³»ç»Ÿä¸€æ¨¡ä¸€æ ·ï¼Œè€Œå¯¹äºåº•å±‚ç³»ç»Ÿæ¥è¯´ï¼Œè™šæ‹Ÿæœºå°±æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œä¸éœ€è¦äº†å°±åˆ æ‰ï¼Œå¯¹å…¶å®ƒéƒ¨åˆ†æ¯«æ— å½±å“ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>è™šæ‹Ÿæœºçš„ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>**èµ„æºå ç”¨å¤šï¼š**è™šæ‹Ÿæœºä¼šç‹¬å ä¸€éƒ¨åˆ†å†…å­˜å’Œç¡¬ç›˜ç©ºé—´ã€‚å®ƒè¿è¡Œçš„æ—¶å€™ï¼Œå…¶ä»–ç¨‹åºå°±ä¸èƒ½ä½¿ç”¨è¿™äº›èµ„æºäº†ã€‚å“ªæ€•è™šæ‹Ÿæœºé‡Œé¢çš„åº”ç”¨ç¨‹åºï¼ŒçœŸæ­£ä½¿ç”¨çš„å†…å­˜åªæœ‰1Mï¼Œè™šæ‹Ÿæœºä¾ç„¶éœ€è¦å‡ ç™¾MBçš„å†…å®¹æ‰èƒ½è¿è¡Œã€‚</li>
<li>**å†—ä½™æ­¥éª¤å¤šï¼š**è™šæ‹Ÿæœºæ˜¯å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œä¸€äº›ç³»ç»Ÿçº§åˆ«çš„æ“ä½œæ­¥éª¤ï¼Œå¾€å¾€æ— æ³•è·³è¿‡ï¼Œæ¯”å¦‚ç”¨æˆ·ç™»å½•ã€‚</li>
<li>**å¯åŠ¨æ…¢ï¼š**å¯åŠ¨æ“ä½œç³»ç»Ÿéœ€è¦å¤šä¹…ï¼Œå¯åŠ¨è™šæ‹Ÿæœºå°±éœ€è¦å¤šä¹…ã€‚å¯èƒ½è¦ç­‰å‡ åˆ†é’Ÿï¼Œåº”ç”¨é™ˆæ•…ä¹¡æ‰èƒ½çœŸæ­£è¿è¡Œã€‚</li>
</ul>
<h4 id="4-3-å®¹å™¨å’Œè™šæ‹Ÿæœºæ¯”è¾ƒ">4.3 å®¹å™¨å’Œè™šæ‹Ÿæœºæ¯”è¾ƒ</h4>
<p>ä¸€ä¸ªå®¹å™¨ä¸­è¿è¡ŒåŸç”ŸLinuxå’Œå…±äº«ä¸»æœºä¸å…¶å®ƒå®¹å™¨çš„å†…æ ¸ï¼Œå®ƒè¿è¡Œä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œä¸å ç”¨ä»»ä½•å…¶å®ƒå¯æ‰§è¡Œæ–‡ä»¶çš„å†…å­˜ï¼Œä½¿å…¶è½»é‡åŒ–ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œè™šæ‹Ÿæœº(VM)è¿è¡Œä¸€ä¸ªå®Œæ•´çš„â€œå®¢æˆ·â€æ“ä½œç³»ç»Ÿï¼Œé€šè¿‡è™šæ‹Ÿæœºç®¡ç†ç¨‹åºè™šæ‹Ÿè®¿é—®ä¸»æœºèµ„æºã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè™šæ‹Ÿæœºæä¾›çš„ç¯å¢ƒæ¯”å¤§å¤šæ•°åº”ç”¨ç¨‹åºéœ€è¦çš„èµ„æºå¤šã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282034012.png" alt=""></p>
<ul>
<li>dockerfile       å°±æ˜¯æºä»£ç </li>
<li>image          é•œåƒ   å¯æ‰§è¡Œçš„ç¨‹åº   ubuntu  mysql  redis    nginx   elesticsearch   ç½‘ç«™æ‰“åŒ…æˆé•œåƒ</li>
<li>container    è¿è¡Œçš„è¿›ç¨‹</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç£ç›˜ç©ºé—´ä½¿ç”¨ï¼šdockeræ ¹æ®é•œåƒå±‚å†³å®šï¼Œä¸€èˆ¬å¾ˆå°å‡ åKBï¼Œè€Œè™šæ‹Ÿæœºä¸€èˆ¬GBå•ä½</span><br><span class="line">æ€§èƒ½ï¼ˆç›¸æ¯”äºå®¿ä¸»æœºï¼‰ï¼šdockerä¾é™„å®¿ä¸»æœºæ‰€ä»¥æ€§èƒ½æ¥è¿‘ï¼Œä½†æ˜¯è™šæ‹Ÿæœºæ¯”åŸä¸»æœºå·®</span><br><span class="line">èµ„æºåˆ©ç”¨ç‡ï¼šdockerèµ„æºç†ç”±ç‡é«˜ï¼Œè™šæ‹Ÿæœºä½</span><br><span class="line">éš”ç¦»æ€§ï¼šä¸¤è€…éƒ½æ˜¯å®‰å…¨éš”ç¦»</span><br><span class="line">è¿è¡ŒçŠ¶æ€ï¼šdockerç›´æ¥åœ¨å®¿ä¸»æœºå†…æ ¸ä¸Šè¿è¡Œï¼Œè€Œè™šæ‹Ÿæœºè¿è¡Œåœ¨éš”ç¦»å±‚Hypervisior</span><br><span class="line">å¹¶å‘ï¼šdockerå¯èµ·åˆ°ä¸Šåƒä¸ªå®¹å™¨ï¼Œè€Œè™šæ‹Ÿæœºç›¸å¯¹åšé‡ï¼Œæœ€å¤šå¯åŠ¨å‡ åä¸ª</span><br><span class="line">è¿è¡Œé€Ÿåº¦ï¼šdockerä¼˜äºè™šæ‹Ÿæœº</span><br></pre></td></tr></table></figure>
<p>å­¦ä¹ åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.runoob.com/docker/docker-tutorial.html">https://www.runoob.com/docker/docker-tutorial.html</a></p>
<h4 id="4-4-dockerå®‰è£…">4.4 dockerå®‰è£…</h4>
<p>ä¸‹è½½åœ°å€ï¼š</p>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/desktop/install/ubuntu/">https://docs.docker.com/desktop/install/ubuntu/</a></p>
</li>
</ul>
<p>å¸è½½æ—§ç‰ˆæœ¬</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove docker  docker-common docker-selinux docker-engine</span><br></pre></td></tr></table></figure>
<p>å®‰è£…</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2 &amp;&amp; python2 /usr/<span class="built_in">bin</span>/yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo &amp;&amp; yum install docker-ce -y</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>
<h4 id="4-5-é•œåƒä½¿ç”¨">4.5 é•œåƒä½¿ç”¨</h4>
<h5 id="4-5-0-é•œåƒæŸ¥æ‰¾">4.5.0 é•œåƒæŸ¥æ‰¾</h5>
<p>å®˜æ–¹åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://hub.docker.com/">https://hub.docker.com/</a></p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker pull ubuntu</span></span><br></pre></td></tr></table></figure>
<h5 id="4-5-1-é•œåƒåˆ—ä¸¾">4.5.1 é•œåƒåˆ—ä¸¾</h5>
<p><strong>docker images</strong> æ¥åˆ—å‡ºæœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282034439.png" alt="image-20220922194002270"></p>
<p>å„ä¸ªé€‰é¡¹è¯´æ˜:</p>
<ul>
<li>**REPOSITORYï¼š**è¡¨ç¤ºé•œåƒçš„ä»“åº“æº</li>
<li>**TAGï¼š**é•œåƒçš„æ ‡ç­¾</li>
<li>**IMAGE IDï¼š**é•œåƒID</li>
<li>**CREATEDï¼š**é•œåƒåˆ›å»ºæ—¶é—´</li>
<li>**SIZEï¼š**é•œåƒå¤§å°</li>
</ul>
<h5 id="4-5-2-è·å–ä¸€ä¸ªæ–°çš„é•œåƒ">4.5.2 è·å–ä¸€ä¸ªæ–°çš„é•œåƒ</h5>
<p>å½“æˆ‘ä»¬åœ¨æœ¬åœ°ä¸»æœºä¸Šä½¿ç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„é•œåƒæ—¶ Docker å°±ä¼šè‡ªåŠ¨ä¸‹è½½è¿™ä¸ªé•œåƒã€‚å¦‚æœæˆ‘ä»¬æƒ³é¢„å…ˆä¸‹è½½è¿™ä¸ªé•œåƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ docker pull å‘½ä»¤æ¥ä¸‹è½½å®ƒã€‚</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker pull ubuntu</span></span><br></pre></td></tr></table></figure>
<h5 id="4-5-3-æŸ¥æ‰¾é•œåƒ">4.5.3 æŸ¥æ‰¾é•œåƒ</h5>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker search ubuntu</span></span><br></pre></td></tr></table></figure>
<h5 id="4-5-4-åˆ é™¤é•œåƒ">4.5.4 åˆ é™¤é•œåƒ</h5>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker rmi ubuntu</span></span><br></pre></td></tr></table></figure>
<h4 id="4-6-å®¹å™¨ä½¿ç”¨">4.6 å®¹å™¨ä½¿ç”¨</h4>
<h5 id="4-6-2-å®¹å™¨æ“ä½œ">4.6.2 å®¹å™¨æ“ä½œ</h5>
<p>ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨ ubuntu é•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå‚æ•°ä¸ºä»¥å‘½ä»¤è¡Œæ¨¡å¼è¿›å…¥è¯¥å®¹å™¨ï¼š</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">run</span> -<span class="keyword">it</span> ubuntu /bin/bash</span><br></pre></td></tr></table></figure>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><strong>-i</strong>: äº¤äº’å¼æ“ä½œã€‚</li>
<li><strong>-t</strong>: ç»ˆç«¯ã€‚</li>
<li><strong>ubuntu</strong>: ubuntu é•œåƒã€‚</li>
<li><strong>/bin/bash</strong>ï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ /bin/bashã€‚</li>
</ul>
<p>æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -<span class="selector-tag">a</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ docker start å¯åŠ¨ä¸€ä¸ªå·²åœæ­¢çš„å®¹å™¨ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start <span class="tag">&lt;<span class="name">å®¹å™¨</span> <span class="attr">ID</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ docker stop åœæ­¢ä¸€ä¸ªå®¹å™¨ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop &lt;å®¹å™¨ ID&gt;</span><br></pre></td></tr></table></figure>
<p><strong>exec å‘½ä»¤</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it  &lt;å®¹å™¨ ID&gt; /bin/bash</span><br></pre></td></tr></table></figure>
<p>åˆ é™¤å®¹å™¨</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> <span class="operator">-f</span>  &lt;å®¹å™¨ ID&gt;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸€ä¸ª web åº”ç”¨</p>
<ul>
<li>æˆ‘ä»¬å°†åœ¨dockerå®¹å™¨ä¸­è¿è¡Œä¸€ä¸ª Python Flask åº”ç”¨æ¥è¿è¡Œä¸€ä¸ªwebåº”ç”¨</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span>  docker pull training/webapp </span><br><span class="line"><span class="built_in">sudo</span> docker run -d -P training/webapp python app.py</span><br></pre></td></tr></table></figure>
<p>å‚æ•°è¯´æ˜:</p>
<ul>
<li>**-d:**è®©å®¹å™¨åœ¨åå°è¿è¡Œã€‚</li>
<li>**-P:**å°†å®¹å™¨å†…éƒ¨ä½¿ç”¨çš„ç½‘ç»œç«¯å£éšæœºæ˜ å°„åˆ°æˆ‘ä»¬ä½¿ç”¨çš„ä¸»æœºä¸Šã€‚</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302282034440.png" alt="image-20220922193414906"></p>
<p><strong>æ³¨</strong>ï¼šDocker å¼€æ”¾äº† 5000 ç«¯å£ï¼ˆé»˜è®¤ Python Flask ç«¯å£ï¼‰æ˜ å°„åˆ°ä¸»æœºç«¯å£ 49153ä¸Šã€‚</p>
<p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®<code>http://192.168.65.232:49153/</code></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ -p å‚æ•°æ¥è®¾ç½®ä¸ä¸€æ ·çš„ç«¯å£ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker run -itd -p å®¿ä¸»æœºip:å®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£ --name å®¹å™¨å é•œåƒå /bin/bash</span></span><br><span class="line">sudo docker run -d -p <span class="number">5000</span>:<span class="number">5000</span> training/webapp python app.py</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨</strong>ï¼šå®¹å™¨å†…éƒ¨çš„ 5000 ç«¯å£æ˜ å°„åˆ°æˆ‘ä»¬æœ¬åœ°ä¸»æœºçš„ 5000 ç«¯å£ä¸Šã€‚</p>
<h3 id="5-çˆ¬è™«ç®€å†åˆ†äº«">5 çˆ¬è™«ç®€å†åˆ†äº«</h3>
<p><strong>ç®€å†çš„ä½œç”¨ï¼š</strong></p>
<p>1.é€šè¿‡ç®€å†ç­›é€‰å…³ï¼Œè·å¾—ç¬”é¢è¯•èµ„æ ¼</p>
<p>2.é¢è¯•æ—¶ï¼Œç®€å†æ˜¯é¢è¯•å®˜ä¸ä½ äº¤è°ˆçš„åŸºç¡€</p>
<p><strong>é€šè¿‡ç®€å†ç­›é€‰</strong>ï¼š</p>
<p><strong>ä¸€ã€ç®€å†ä¸»è¦ç­›é€‰å“ªäº›é¡¹</strong></p>
<p><strong>1.å…³é”®æŠ€èƒ½æ˜¯å¦åŒ¹é…</strong></p>
<pre><code>å…³é”®æŠ€èƒ½çš„åŒ¹é…é¡¹æ˜¯å¦è¶³å¤Ÿã€‚

æ¯”å¦‚è¦æ±‚ï¼šçˆ¬è™«è®¾è®¡ï¼Œæ•°æ®åº“ï¼Œè‡ªåŠ¨åŒ–å·¥å…·ï¼Œç½‘ç»œæŠ“åŒ…å·¥å…·ï¼Œé€†å‘åˆ†æèƒ½åŠ›
</code></pre>
<p><strong>2.é¡¹ç›®ç»éªŒè¦æ±‚</strong></p>
<p>â€‹	 å¹´é™è¦æ±‚</p>
<p>â€‹	 ç›¸åº”è¡Œä¸šï¼Œç›¸åº”é¡¹ç›®ã€‚æ¯”å¦‚ ç”µå•†è¡Œä¸šã€é‡‘èè¡Œä¸šã€æ—…æ¸¸è¡Œä¸š</p>
<p>â€‹	 æœ‰çš„æœ‰ åšè¿‡XXXçš„ä¼˜å…ˆ</p>
<p><strong>3.å­¦å†</strong></p>
<p><strong>4.è·³æ§½é¢‘ç‡</strong></p>
<p><strong>5.ç®€å†äº®ç‚¹</strong></p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p>æŠ•ä¸åŒå…¬å¸çš„ä¸åŒèŒä½ï¼Œå…ˆäº†è§£è¯¥èŒä½çš„æŠ€èƒ½è¦æ±‚å’Œå…¬å¸çš„è¡Œä¸šå±æ€§ã€‚</p>
<p>ä¿®æ”¹æŠ€èƒ½ï¼Œè®©å…³é”®æŠ€èƒ½æ›´åŒ¹é…ã€‚</p>
<p>æŠŠä¸å…¬å¸è¡Œä¸šç›¸å…³çš„é¡¹ç›®ç»éªŒé‡ç‚¹æè¿°ä¸ä½ç½®æå‰ã€‚</p>
<p><strong>é¡¹ç›®ç»éªŒå†™æ³•ï¼š</strong></p>
<p>ä¸»è¦å±•ç¤ºä½ å·¥ä½œç»éªŒè¶³ï¼ˆåšçš„é¡¹ç›®å¤šï¼Œåšçš„é¡¹ç›®ç±»å‹å¤šï¼ˆç”µå•† æ—…æ¸¸ å·¥å•†ç­‰ç­‰éƒ½æŠ“è¿‡ã€‚APP ç½‘é¡µéƒ½æŠ“è¿‡ï¼‰ï¼‰</p>
<p>ç»†åŒ–ä½ ä¸ªäººæŠ€èƒ½ä¸­æè¿°çš„æŠ€èƒ½ï¼ŒåŠ ä»¥ä½è¯ä½ çš„ä¸ªäººæŠ€èƒ½ã€‚</p>
<p>é‡å¤é¡¹ç›®å»ºè®®åˆå¹¶ã€‚ï¼ˆåŒç±»å‹çš„ï¼ˆæ¯”å¦‚å¤©çœ¼æŸ¥/ä¼æŸ¥æŸ¥ï¼‰ã€ï¼ˆæŠ€èƒ½é‡å¤çš„åˆå¹¶ å‡ å¹´ç»éªŒé¡¹ç›®å…¨éƒ½æ˜¯ä¸€ä¸ªæŠ€èƒ½æ ˆ ä¼šè¢«è®¤ä¸ºæ²¡é•¿è¿›ï¼‰</p>
<p><strong>æ¯ä¸ªé¡¹ç›®çš„æªè¾ï¼š</strong></p>
<p>æ¯ä¸€ä¸ªé¡¹ç›®å†™æˆä¸€ä¸ª3-5å¥é€»è¾‘è¿è´¯ï¼Œæœ‰æ„ä¹‰çš„è¯ï¼Œä¸è¦ç”¨çŸ­è¯­ã€‚</p>
<p>**ç¬¬ä¸€å¥ï¼š**é—®é¢˜/èƒŒæ™¯ï¼Œçªå‡ºå¤æ‚æ€§</p>
<p>**ç¬¬äºŒå¥ï¼š**æˆ‘ç‹¬ç«‹ä½¿ç”¨ï¼ˆè´Ÿè´£ï¼‰æŸæ–¹æ³•/æŠ€å·§ã€‚çªå‡ºä½ çš„æŠ€æœ¯</p>
<p>**ç¬¬ä¸‰å¥ï¼š**è¾¾æˆçš„æˆç»©ã€‚çªå‡ºä½ çš„æˆæœã€‚</p>
<p><strong>ä½“ç°ä½ çš„èƒ½åŠ›</strong></p>
<p>æ¯”å¦‚ï¼š</p>
<p><strong>1.ï¼‰ä½“ç°ä½ çš„çˆ¬è™«è®¾è®¡ä¸ä¼˜åŒ–èƒ½åŠ›</strong></p>
<ul>
<li>
<p>å…¬å¸ç°æœ‰çˆ¬è™«æ€§èƒ½è¾ƒå·®ï¼Œæ¯å¤©åªèƒ½æ—¥æŠ“30ä¸‡å¼ é¡µé¢ï¼Œæˆ‘è´Ÿè´£æŠŠçˆ¬è™«é‡æ„æˆå¼‚æ­¥çˆ¬è™«ï¼Œå¹¶ä¼˜åŒ–ç½‘ç»œæ€§èƒ½ï¼Œè®©å•å°ä½é…ç½®æœºå™¨å®šå‘æŠ“å–200ç™¾ä¸‡å¼ é¡µé¢</p>
</li>
<li>
<p>å…¬å¸ç°æœ‰çˆ¬è™«æ€§èƒ½è¾ƒå·®ï¼Œåªèƒ½æ—¥æŠ“30ä¸‡å¼ é¡µé¢ï¼Œæˆ‘ç”¨10å¤©æ—¶é—´é‡æ„ä¸ºå¼‚æ­¥çˆ¬è™«ï¼Œå¹¶ä¼˜åŒ–ç½‘ç»œæ€§èƒ½ä¸é‡æ–°è®¾è®¡æŠ“å–ç­–ç•¥ï¼Œè®©å•å°ä½é…ç½®æœºå™¨å®šå‘æŠ“å–200ç™¾ä¸‡å¼ é¡µé¢ï¼Œåè´Ÿè´£ç»´æŠ¤è¯¥çˆ¬è™«ã€‚</p>
</li>
</ul>
<p><strong>2.ï¼‰ä½“ç°æŠ€èƒ½æ–¹é¢</strong></p>
<ul>
<li>è¿ç”¨KKKæ–¹æ³•ç ´è§£XXXç½‘/OOOç½‘/PPPç½‘çš„JSåçˆ¬ï¼Œåæˆä¸ºå…¬å¸ç ´è§£JSåçˆ¬æ–¹é¢çš„ç”ŸåŠ›å†›ã€‚</li>
</ul>
<p><strong>3.ï¼‰ç»¼åˆæŠ€èƒ½è¿ç”¨</strong></p>
<p><strong>å¯¹æ¯”æ”¹å‰ï¼š</strong></p>
<pre><code>**é¡¹ç›®ç»éªŒï¼š**

	æ‰€ç”¨æŠ€æœ¯ï¼šRedis + MongoDB + requests

	ä½¿ç”¨requestsåº“è¯·æ±‚ç½‘é¡µ
</code></pre>
<p>â€‹		 ç”¨redisåšç¼“å­˜ç®¡ç†</p>
<pre><code>	ä½¿ç”¨MongoDBå­˜å‚¨ç½‘é¡µ

	ç”¨æ‰“ç å¹³å°è§£å†³éªŒè¯ç ï¼Œæ»‘å—é—®é¢˜ã€‚
</code></pre>
<p><strong>æ”¹åï¼š</strong></p>
<pre><code>	è®¾è®¡çˆ¬è™«å¯¹å¤©çœ¼æŸ¥è¿›è¡ŒæŠ“å–

	ç»¼åˆè¿ç”¨ç¤¾ä¼šå·¥ç¨‹æ‰‹æ®µï¼ˆæ‰“ç ï¼Œå¤§è§„æ¨¡IPç­‰ï¼‰ç»•è¿‡å¤©çœ¼æŸ¥çš„è´¦å·ç™»é™†ï¼Œæ»‘å—éªŒè¯ã€‚

	å€ŸåŠ©redisåšå¼‚æ­¥é˜Ÿåˆ—ï¼ŒæŠŠæŠ“å–æ•°æ®åˆ·å…¥mongoåšæŒä¹…åŒ–å­˜å‚¨ï¼Œçˆ¬è™«å¯è¾¾åˆ°XXç™¾ä¸‡ï¼ˆXXåä¸‡æŠ“å–é‡ï¼‰
</code></pre>
<p><strong>ç®€å†ä¸é¢è¯•ç¦å¿Œï¼š</strong></p>
<p>1.ä¸è¦åœ¨ç®€å†å†™è¯¸å¦‚ï¼šæˆ‘å¯ä»¥æ— å¿åŠ ç­ æˆ‘åƒè‹¦è€åŠ³ä¹‹ç±»è¿‡å¤´çš„è¯ã€‚</p>
<p>2.å°‘å†™ç²¾é€šä¸¤å­—ã€‚</p>
<p>3.åˆ«åœ¨é¢è¯•ä¸­æŠŠå¾…é‡ç¦åˆ©ç»†èŠ‚é—®å¾—å¾ˆç»†ï¼ˆé€šçŸ¥ä½ è¢«å½•å…¥æ—¶ï¼Œå†è·Ÿè¡Œæ”¿è¯¦ç»†è¯¢é—®ï¼‰</p>
<p>4.ä¸ä¼šçš„é—®é¢˜ å°±å›ç­”ä¸ä¼šï¼Œä¸è¦ä¹±æ‰¯ã€‚</p>
<p>5.ç®€å†å†…å®¹è¿‡äºå¤¸å¼ ï¼Œé¢è¯•æ—¶ç¼ºä¸€é—®ä¸‰ä¸çŸ¥ã€‚</p>
<p>6.ç®€å†ä¸Šçš„é€»è¾‘è¦è‡ªæ´½ å·¥ä½œæ—¶é—´ æè¿°äº‹å®è¦è‡ªæ´½ã€‚</p>
<p>â€‹</p>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>çˆ¬è™«è¿›é˜¶</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://www.fomal.cc/posts/f27b843b.html">https://www.fomal.cc/posts/f27b843b.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>czzğŸ•‰ï¸</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2023-02-28</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2025-05-10</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%88%AC%E8%99%AB/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>çˆ¬è™«</a></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">æŠ•å–‚ä½œè€…</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://tuchuang.voooe.cn/images/2023/01/04/2.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://tuchuang.voooe.cn/images/2023/01/04/2.webp" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://tuchuang.voooe.cn/images/2023/01/04/20f8e49805975b8f8.webp" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://tuchuang.voooe.cn/images/2023/01/04/20f8e49805975b8f8.webp" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/9766d63c.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2023/04/11/6434e6c1629c5.jpg" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">mathtype</div></div></a></div><div class="next-post pull-right"><a href="/posts/5c0a4593.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.staticaly.com/gh/czzczzczz/image@main/202302211041120.png" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">çˆ¬è™«åŸºç¡€</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:bold">ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#javascript%E8%B0%83%E8%AF%95"><span class="toc-text">javascriptè°ƒè¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B5%8F%E8%A7%88%E5%99%A8%E9%9D%A2%E6%9D%BF%E8%A1%A5%E5%85%85"><span class="toc-text">1. æµè§ˆå™¨é¢æ¿è¡¥å……</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Elements"><span class="toc-text">Elements</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Network"><span class="toc-text">Network</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Sources"><span class="toc-text">Sources</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E6%A0%B7%E4%BE%8B"><span class="toc-text">5.1 æ ·ä¾‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-1-%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%87debugger"><span class="toc-text">5.1.1 æµè§ˆå™¨è¿‡debugger</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-2-%E6%96%B9%E6%B3%95%E7%BD%AE%E7%A9%BA"><span class="toc-text">5.1.2 æ–¹æ³•ç½®ç©º</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-13-%E8%BF%87OB%E6%B7%B7%E6%B7%86debugger"><span class="toc-text">5.13 è¿‡OBæ··æ·†debugger</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-hook%E6%8A%80%E6%9C%AF"><span class="toc-text">6  hookæŠ€æœ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-Hook%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-text">6.1 Hookæ­¥éª¤ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-HOOK-cookie%E6%93%8D%E4%BD%9C"><span class="toc-text">6.2 HOOK cookieæ“ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-hook-%E6%96%B9%E6%B3%95"><span class="toc-text">6.3 hook æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-hook-XHR%E8%AF%B7%E6%B1%82"><span class="toc-text">6.4 hook  XHRè¯·æ±‚</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-python%E6%89%A7%E8%A1%8CJS%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-text">7 pythonæ‰§è¡ŒJSçš„æ–¹å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-1-PyExecJS"><span class="toc-text">7.1 PyExecJS</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%B5%8F%E8%A7%88%E5%99%A8%E7%8E%AF%E5%A2%83%E8%A1%A5%E5%85%85%E6%96%B9%E6%B3%95"><span class="toc-text">8 æµè§ˆå™¨ç¯å¢ƒè¡¥å……æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%91%98%E8%A6%81%E7%AE%97%E6%B3%95"><span class="toc-text">æ‘˜è¦ç®—æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-MD5"><span class="toc-text">1. MD5</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-JavaScript-%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.1 JavaScript å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-Python-%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.2 Python å®ç°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-SHA"><span class="toc-text">2. SHA</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-JavaScript-%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.1  JavaScript å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-Python-%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.2 Python å®ç°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-HMAC"><span class="toc-text">3. HMAC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-JavaScript-%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.1 JavaScript å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-Python-%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.2 Python å®ç°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B"><span class="toc-text">4. å®æˆ˜æ¡ˆä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E6%A1%88%E4%BE%8B-md5%E5%8A%A0%E5%AF%86%E9%80%86%E5%90%91"><span class="toc-text">4.1 æ¡ˆä¾‹ md5åŠ å¯†é€†å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87"><span class="toc-text">4.1.1 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90"><span class="toc-text">4.1.2 é€†å‘åˆ†æ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-3-python%E4%BB%A3%E7%A0%81%E6%A8%A1%E6%8B%9F"><span class="toc-text">4.1.3 pythonä»£ç æ¨¡æ‹Ÿ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E6%A1%88%E4%BE%8Bsha256%E7%B3%BB%E5%88%97"><span class="toc-text">4.2 æ¡ˆä¾‹sha256ç³»åˆ—</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-1-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90%EF%BC%9A"><span class="toc-text">4.2.1  æŠ“åŒ…åˆ†æï¼š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-2-%E8%B0%83%E8%AF%95%E5%8A%A0%E5%AF%86%E5%9C%B0%E5%9C%B0%E7%82%B9"><span class="toc-text">4.2.2 è°ƒè¯•åŠ å¯†åœ°åœ°ç‚¹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-3-python%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">4.2.3 pythonä»£ç å®ç°</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86"><span class="toc-text">å¯¹ç§°åŠ å¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95%E5%BD%92%E7%BA%B3"><span class="toc-text">å¸¸è§ç®—æ³•å½’çº³</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-DES%E7%AE%97%E6%B3%95"><span class="toc-text">1. DESç®—æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-JavaScript-%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">1.1 JavaScript å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-Python-%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">1.2 Python å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%AE%9E%E6%93%8D%E7%BB%83%E4%B9%A01"><span class="toc-text">1.3 å®æ“ç»ƒä¹ 1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E5%AE%9E%E6%93%8D%E7%BB%83%E4%B9%A02"><span class="toc-text">1.4 å®æ“ç»ƒä¹ 2</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87"><span class="toc-text">1.3.1 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90"><span class="toc-text">1.3.2 é€†å‘åˆ†æ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-3-%E6%95%B0%E6%8D%AE%E8%BF%98%E5%8E%9F"><span class="toc-text">1.3.3  æ•°æ®è¿˜åŸ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-AES%E7%AE%97%E6%B3%95"><span class="toc-text">2. AESç®—æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E7%AE%97%E6%B3%95%E7%AE%80%E4%BB%8B"><span class="toc-text">2.1 ç®—æ³•ç®€ä»‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-JavaScript-%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.2  JavaScript å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-Python-%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.3 Python å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B"><span class="toc-text">2.4 å®é™…æ¡ˆä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87"><span class="toc-text">2.4.1 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-2-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90"><span class="toc-text">2.4.2 æŠ“åŒ…åˆ†æ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-3-%E5%8F%82%E6%95%B0%E9%80%86%E5%90%91"><span class="toc-text">2.4.3 å‚æ•°é€†å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#2-4-3-sign%E7%AD%BE%E5%90%8D%E5%A4%84%E7%90%86"><span class="toc-text">2.4.3 signç­¾åå¤„ç†</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-4-4-password%E5%A4%84%E7%90%86"><span class="toc-text">2.4.4 passwordå¤„ç†</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86"><span class="toc-text">éå¯¹ç§°åŠ å¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%9D%9E%E5%AF%B9%E7%A7%B0%E7%AE%80%E4%BB%8B"><span class="toc-text">1 éå¯¹ç§°ç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%9D%9E%E5%AF%B9%E7%A7%B0%E7%89%B9%E5%BE%81"><span class="toc-text">2 éå¯¹ç§°ç‰¹å¾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-JavaScript-%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">2.1  JavaScript å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-Python-%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">2.2 Python å®ç°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98"><span class="toc-text">3 æ¡ˆä¾‹å®æˆ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90"><span class="toc-text">3.1 æŠ“åŒ…åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E5%8F%82%E6%95%B0%E9%80%86%E5%90%91"><span class="toc-text">3.2 å‚æ•°é€†å‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-JS%E4%BB%A3%E7%A0%81"><span class="toc-text">3.3 JSä»£ç </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-python%E4%BB%A3%E7%A0%81"><span class="toc-text">3.4 pythonä»£ç </span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%A1%88%E4%BE%8B%E5%AE%9E%E6%88%98"><span class="toc-text">4. æ¡ˆä¾‹å®æˆ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E9%80%86%E5%90%91%E5%8F%82%E6%95%B0"><span class="toc-text">4.1 é€†å‘å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90"><span class="toc-text">4.2 é€†å‘åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-JavaScript%E5%88%86%E6%9E%90"><span class="toc-text">4.3 JavaScriptåˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-%E5%AF%86%E9%92%A5%E5%88%86%E6%9E%90"><span class="toc-text">4.4 å¯†é’¥åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-%E7%AE%97%E6%B3%95%E8%BF%98%E5%8E%9F"><span class="toc-text">4.5 ç®—æ³•è¿˜åŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-1-%E7%94%A8python%E6%A8%A1%E6%8B%9F%E8%AF%B7%E6%B1%82%E6%B5%8B%E8%AF%95"><span class="toc-text">4.5.1 ç”¨pythonæ¨¡æ‹Ÿè¯·æ±‚æµ‹è¯•</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-2-JavaScript%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-text">4.5.2  JavaScriptæµ‹è¯•ä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-3-%E5%AF%86%E7%A0%81%E8%8E%B7%E5%8F%96"><span class="toc-text">4.5.3 å¯†ç è·å–</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WebPack%E6%89%93%E5%8C%85"><span class="toc-text">WebPackæ‰“åŒ…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-webpack%E6%89%93%E5%8C%85%E7%AE%80%E4%BB%8B"><span class="toc-text">1. webpackæ‰“åŒ…ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-0-%E5%A4%9A%E4%B8%AAJS%E6%96%87%E4%BB%B6%E6%89%93%E5%8C%85%EF%BC%9A"><span class="toc-text">1.0 å¤šä¸ªJSæ–‡ä»¶æ‰“åŒ…ï¼š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-webpack%E6%95%B0%E7%BB%84%E5%BD%A2%E5%BC%8F"><span class="toc-text">1.1 webpackæ•°ç»„å½¢å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-webpack%E5%AF%B9%E8%B1%A1%E5%BD%A2%E5%BC%8F"><span class="toc-text">1.2 webpackå¯¹è±¡å½¢å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-webpack%E6%95%99%E5%AD%A6"><span class="toc-text">2. webpackæ•™å­¦</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87"><span class="toc-text">2.1 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90"><span class="toc-text">2.2 é€†å‘åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E4%BB%A3%E7%A0%81%E5%A4%84%E7%90%86"><span class="toc-text">2.3 ä»£ç å¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-webpack%E6%95%99%E5%AD%A6"><span class="toc-text">3. webpackæ•™å­¦</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87"><span class="toc-text">3.1 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90"><span class="toc-text">3.2 é€†å‘åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-%E5%85%B3%E9%94%AE%E5%AD%97%E6%90%9C%E7%B4%A2"><span class="toc-text">3.2.1 å…³é”®å­—æœç´¢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-2-JavaScript%E5%88%86%E6%9E%90"><span class="toc-text">3.2.2 JavaScriptåˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E4%BB%A3%E7%A0%81%E5%A4%84%E7%90%86"><span class="toc-text">3.3 ä»£ç å¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RPC-%E6%8A%80%E6%9C%AF"><span class="toc-text">RPC æŠ€æœ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-JSRPC-%E7%AE%80%E4%BB%8B"><span class="toc-text">1. JSRPC ç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Sekiro-RPC"><span class="toc-text">2. Sekiro-RPC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-sk%E9%A3%9F%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-text">2.1 ské£Ÿç”¨æ–¹å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-0-%E7%BD%91%E7%9B%98%E5%9C%B0%E5%9D%80"><span class="toc-text">2.1.0 ç½‘ç›˜åœ°å€</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-1-%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F"><span class="toc-text">2.1.1 æ‰§è¡Œæ–¹å¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-2-%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%8E%AF%E5%A2%83"><span class="toc-text">2.2.2 å®¢æˆ·ç«¯ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-3-%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="toc-text">2.2.3 å‚æ•°è¯´æ˜</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E6%B5%8B%E8%AF%95%E4%BD%BF%E7%94%A8"><span class="toc-text">2.2 æµ‹è¯•ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1-1%E6%96%B0%E5%BB%BAHTML%E9%A1%B5%E9%9D%A2"><span class="toc-text">2.2.1 1æ–°å»ºHTMLé¡µé¢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-2-SK-API"><span class="toc-text">2.2.2 SK API</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-3-python%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95"><span class="toc-text">2.2.3 pythonä»£ç è°ƒè¯•</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%B3%A8%E5%85%A5"><span class="toc-text">2.3 æ§åˆ¶å°æ³¨å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-0-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87"><span class="toc-text">2.3.0 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-1-%E6%89%BE%E5%88%B0%E5%85%B3%E9%94%AE%E7%82%B9"><span class="toc-text">2.3.1 æ‰¾åˆ°å…³é”®ç‚¹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-2-%E5%9C%A8%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%B3%A8%E5%85%A5"><span class="toc-text">2.3.2 åœ¨æ§åˆ¶å°æ³¨å…¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-3-%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%B9%B6%E8%BD%AC%E5%8F%91"><span class="toc-text">2.3.3 è¿æ¥æœåŠ¡å™¨å¹¶è½¬å‘</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-%E6%B2%B9%E7%8C%B4%E6%B3%A8%E5%85%A5%E5%BD%A2%E5%BC%8F"><span class="toc-text">2.4 æ²¹çŒ´æ³¨å…¥å½¢å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-1-%E6%B2%B9%E7%8C%B4%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.4.1 æ²¹çŒ´å·¥å…·ä»‹ç»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-2-%E7%BC%96%E5%86%99%E6%B2%B9%E7%8C%B4%E6%B3%A8%E5%85%A5"><span class="toc-text">2.4.2 ç¼–å†™æ²¹çŒ´æ³¨å…¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-3-python%E4%BB%A3%E7%A0%81%E8%B0%83%E7%94%A8"><span class="toc-text">2.4.3 pythonä»£ç è°ƒç”¨</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-JS%E6%B3%A8%E5%85%A5%E5%8A%A8%E6%80%81%E4%BC%A0%E5%8F%82"><span class="toc-text">2.5 JSæ³¨å…¥åŠ¨æ€ä¼ å‚</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87"><span class="toc-text">2.5.1 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90"><span class="toc-text">2.5.2 é€†å‘åˆ†æ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-2-RPC%E6%B3%A8%E5%85%A5%E8%BF%9B%E5%8E%BB"><span class="toc-text">2.5.2  RPCæ³¨å…¥è¿›å»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-3-%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8"><span class="toc-text">2.5.3  æ¥å£è°ƒç”¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-4-%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86"><span class="toc-text">2.5.4 æ•°æ®å¤„ç†</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSVMP"><span class="toc-text">JSVMP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="toc-text">1 ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-js%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BF%9D%E6%8A%A4%E6%96%B9%E6%A1%88"><span class="toc-text">1.1 jsè™šæ‹Ÿæœºä¿æŠ¤æ–¹æ¡ˆ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%9E%E6%88%98%E5%88%86%E6%9E%90"><span class="toc-text">2 å®æˆ˜åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87-2"><span class="toc-text">2.1  é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90-2"><span class="toc-text">2.2 é€†å‘åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1-%E8%A1%A5%E7%8E%AF%E5%A2%83%E6%93%8D%E4%BD%9C"><span class="toc-text">2.2.1 è¡¥ç¯å¢ƒæ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E8%A1%A5%E5%85%85%E7%AC%AC%E4%B8%80%E4%B8%AAreferrer"><span class="toc-text">1ã€è¡¥å……ç¬¬ä¸€ä¸ªreferrer</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E8%A1%A5%E5%85%85sign"><span class="toc-text">2ã€è¡¥å……sign</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E8%A1%A5%E5%85%85-href"><span class="toc-text">3ã€è¡¥å…… href</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81%E8%A1%A5-length"><span class="toc-text">4ã€è¡¥ length</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5%E3%80%81%E8%A1%A5useragent"><span class="toc-text">5ã€è¡¥useragent</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6%E3%80%81%E5%8F%82%E6%95%B0%E9%95%BF%E7%9F%AD%E8%A1%A5%E5%85%85"><span class="toc-text">6ã€å‚æ•°é•¿çŸ­è¡¥å……</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E6%A1%88%E4%BE%8Bcode"><span class="toc-text">2.3 æ¡ˆä¾‹code</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E7%8E%AF%E5%A2%83%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B"><span class="toc-text">è¡¥ç¯å¢ƒç³»åˆ—æ•™ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%93%8D%E4%B8%80"><span class="toc-text">1 é¡¹ç›®å®æ“ä¸€</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87"><span class="toc-text">1.1  é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90"><span class="toc-text">1.2 é€†å‘åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%93%8D%E4%BA%8C"><span class="toc-text">2 é¡¹ç›®å®æ“äºŒ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87-3"><span class="toc-text">2.1 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E8%A1%A5%E7%8E%AF%E5%A2%83%E5%AE%9E%E6%93%8D"><span class="toc-text">2.2 è¡¥ç¯å¢ƒå®æ“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%90%90%E7%8E%AF%E5%A2%83%E8%84%9A%E6%9C%AC"><span class="toc-text">3 åç¯å¢ƒè„šæœ¬</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E7%AE%80%E4%BB%8B"><span class="toc-text">3.1 ç®€ä»‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99"><span class="toc-text">3.2 è„šæœ¬ç¼–å†™</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-jsdom%E8%A1%A5%E7%8E%AF%E5%A2%83"><span class="toc-text">4 jsdomè¡¥ç¯å¢ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85"><span class="toc-text">4.1 ç¯å¢ƒå®‰è£…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">4.2 åŸºæœ¬ä½¿ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E6%B7%BB%E5%8A%A0%E5%8F%82%E6%95%B0%E5%BD%A2%E5%BC%8F"><span class="toc-text">4.3 æ·»åŠ å‚æ•°å½¢å¼</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#COOkIE%E5%8F%8D%E7%88%AC%E8%99%AB"><span class="toc-text">COOkIEåçˆ¬è™«</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-cookie%E5%8F%8D%E7%88%AC%E7%AE%80%E4%BB%8B"><span class="toc-text">1 cookieåçˆ¬ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-cookie%E5%8A%A0%E5%AF%86%E5%8E%9F%E7%90%86"><span class="toc-text">1.1 cookieåŠ å¯†åŸç†</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-cookie%E9%80%86%E5%90%91%E5%AE%9E%E8%B7%B51"><span class="toc-text">2 cookieé€†å‘å®è·µ1</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87-4"><span class="toc-text">2.1 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90-3"><span class="toc-text">2.2 é€†å‘åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E9%80%86%E5%90%91%E7%BB%93%E6%9E%9C"><span class="toc-text">2.3 é€†å‘ç»“æœ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-cookie%E9%80%86%E5%90%91%E5%AE%9E%E6%88%98"><span class="toc-text">3. cookieé€†å‘å®æˆ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87-2"><span class="toc-text">3.1 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90-2"><span class="toc-text">3.2 é€†å‘åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-2-JS-%E8%B0%83%E8%AF%95%E5%88%86%E6%9E%90"><span class="toc-text">3.2.2 JS è°ƒè¯•åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E9%80%86%E5%90%91%E7%BB%93%E6%9E%9C"><span class="toc-text">3.3 é€†å‘ç»“æœ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-1-Js%E8%BF%98%E5%8E%9F"><span class="toc-text">3.3.1 Jsè¿˜åŸ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-2-python%E8%BF%98%E5%8E%9F"><span class="toc-text">3.3.2 pythonè¿˜åŸ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8"><span class="toc-text">4 å·¥å…·ä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BB%91%E5%9D%97%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="toc-text">æ»‘å—éªŒè¯ç </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%BB%91%E5%9D%97%E7%AE%80%E4%BB%8B"><span class="toc-text">1. æ»‘å—ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E6%A0%B8%E5%BF%83%E6%AD%A5%E9%AA%A4"><span class="toc-text">1.1 æ ¸å¿ƒæ­¥éª¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E7%AA%81%E7%A0%B4%E8%A7%84%E5%88%99"><span class="toc-text">1.2 çªç ´è§„åˆ™</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E9%AA%8C%E8%AF%81%E7%A0%81%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86"><span class="toc-text">1.3 éªŒè¯ç å›¾ç‰‡å¤„ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-%E8%83%8C%E6%99%AF%E6%BB%91%E5%9D%97%E8%AF%86%E5%88%AB"><span class="toc-text">1.4 èƒŒæ™¯æ»‘å—è¯†åˆ«</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9E%81%E9%AA%8C%E6%BB%91%E5%9D%97%E5%AE%9E%E6%88%98"><span class="toc-text">2  æéªŒæ»‘å—å®æˆ˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%89%8B%E6%92%95%E6%BB%91%E5%9D%97"><span class="toc-text">3 æ‰‹æ’•æ»‘å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%BA%95%E5%9B%BE%E8%BF%98%E5%8E%9F"><span class="toc-text">1ã€åº•å›¾è¿˜åŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E8%B7%9FW%E5%80%BC"><span class="toc-text">2ã€è·ŸWå€¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%88%86%E6%9E%90U%E7%94%9F%E6%88%90"><span class="toc-text">2.1 åˆ†æUç”Ÿæˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-1-%E5%A4%84%E7%90%86%E6%98%8E%E6%96%87"><span class="toc-text">2.1.1 å¤„ç†æ˜æ–‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-2-%E5%A4%84%E7%90%86%E5%8A%A0%E5%AF%86%E6%96%B9%E6%B3%95"><span class="toc-text">2.1.2 å¤„ç†åŠ å¯†æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%88%86%E6%9E%90l%E5%80%BC"><span class="toc-text">2.2 åˆ†ælå€¼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1-%E5%A4%84%E7%90%86o%E5%80%BC"><span class="toc-text">2.2.1 å¤„ç†oå€¼</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E5%85%88%E5%A4%84%E7%90%86aa%E7%9A%84%E5%80%BC"><span class="toc-text">1ã€å…ˆå¤„ç†aaçš„å€¼</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E5%A4%84%E7%90%86%E5%85%B6%E4%BB%96%E5%80%BC"><span class="toc-text">2ã€å¤„ç†å…¶ä»–å€¼</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81%E5%A4%84%E7%90%86L%E5%80%BC"><span class="toc-text">4ã€å¤„ç†Lå€¼</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E5%88%86%E6%9E%90h%E5%80%BC"><span class="toc-text">2.3 åˆ†æhå€¼</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E6%B7%B7%E6%B7%86%E7%AB%A0%E8%8A%82"><span class="toc-text">æ–‡æœ¬æ··æ·†ç« èŠ‚</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%96%87%E6%9C%AC%E6%B7%B7%E6%B7%86%E7%AE%80%E4%BB%8B"><span class="toc-text">1.  æ–‡æœ¬æ··æ·†ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%B9%B2%E6%89%B0%E6%96%B9%E5%BC%8F"><span class="toc-text">1.1 å¸¸è§çš„å¹²æ‰°æ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AD%97%E4%BD%93%E5%8F%8D%E7%88%AC"><span class="toc-text">2. å­—ä½“åçˆ¬</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%AD%97%E4%BD%93%E5%8F%8D%E7%88%AC%E7%AE%80%E4%BB%8B"><span class="toc-text">2.1 å­—ä½“åçˆ¬ç®€ä»‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%9F%90%E4%B9%A0%E5%AD%97%E4%BD%93%E5%8F%8D%E7%88%AC%E5%AE%9E%E8%B7%B5"><span class="toc-text">3.  æŸä¹ å­—ä½“åçˆ¬å®è·µ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87-3"><span class="toc-text">3.1 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90-3"><span class="toc-text">3.2 é€†å‘åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-%E7%BD%91%E9%A1%B5%E5%88%86%E6%9E%90"><span class="toc-text">3.2.1 ç½‘é¡µåˆ†æ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-2-%E9%A1%B5%E9%9D%A2%E5%A4%84%E7%90%86"><span class="toc-text">3.2.2 é¡µé¢å¤„ç†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-3-%E5%AD%97%E4%BD%93%E5%88%86%E6%9E%90"><span class="toc-text">3.3.3 å­—ä½“åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E9%80%86%E5%90%91%E7%BB%93%E6%9E%9C-2"><span class="toc-text">3.3 é€†å‘ç»“æœ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-1-%E5%AE%8C%E6%95%B4code"><span class="toc-text">3.3.1 å®Œæ•´code</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%AD%97%E4%BD%93%E8%A7%A3%E6%9E%90%E5%B7%A5%E5%85%B7"><span class="toc-text">4. å­—ä½“è§£æå·¥å…·</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E5%AD%97%E4%BD%93%E8%AF%BB%E5%8F%96"><span class="toc-text">4.2 å­—ä½“è¯»å–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E8%8A%82%E7%82%B9%E8%AF%BB%E5%8F%96"><span class="toc-text">4.3 èŠ‚ç‚¹è¯»å–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%88%B0%E7%9A%84%E5%AD%97%E4%BD%93code%E5%92%8Cname%E7%9A%84%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB"><span class="toc-text">4.4 è·å–è¯·æ±‚åˆ°çš„å­—ä½“codeå’Œnameçš„å¯¹åº”å…³ç³»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-%E8%8E%B7%E5%8F%96%E5%AD%97%E4%BD%93%E5%9D%90%E6%A0%87%E4%BF%A1%E6%81%AF"><span class="toc-text">4.5 è·å–å­—ä½“åæ ‡ä¿¡æ¯</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%9F%90%E8%BD%A6%E5%AD%97%E4%BD%93%E5%8F%8D%E7%88%AC"><span class="toc-text">5. æŸè½¦å­—ä½“åçˆ¬</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E9%80%86%E5%90%91%E7%9B%AE%E6%A0%87"><span class="toc-text">5.1 é€†å‘ç›®æ ‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E9%80%86%E5%90%91%E5%88%86%E6%9E%90"><span class="toc-text">5.2 é€†å‘åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-2-1-%E5%8E%9F%E5%AD%97%E5%BD%A2%E8%BF%98%E5%8E%9F"><span class="toc-text">5.2.1 åŸå­—å½¢è¿˜åŸ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E9%80%86%E5%90%91%E4%BB%A3%E7%A0%81"><span class="toc-text">5.3 é€†å‘ä»£ç </span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scrapy%E9%87%87%E9%9B%86%E6%A1%86%E6%9E%B6"><span class="toc-text">Scrapyé‡‡é›†æ¡†æ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87"><span class="toc-text">1 å­¦ä¹ ç›®æ ‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-scrapy%E7%AE%80%E4%BB%8B"><span class="toc-text">2 scrapyç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-0-%E5%8D%95%E4%B8%AA%E7%88%AC%E8%99%AB%E7%BC%96%E5%86%99"><span class="toc-text">2.0 å•ä¸ªçˆ¬è™«ç¼–å†™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.1 æ¶æ„ä»‹ç»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E5%90%8D%E8%AF%8D%E8%A7%A3%E6%9E%90"><span class="toc-text">2.2.1 åè¯è§£æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E8%BF%90%E8%A1%8C%E9%80%BB%E8%BE%91%E5%9B%BE"><span class="toc-text">2.2.2 è¿è¡Œé€»è¾‘å›¾</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8"><span class="toc-text">3 æ¡†æ¶ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA"><span class="toc-text">3.1 é¡¹ç›®æ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-%E6%A1%86%E6%9E%B6%E5%AE%89%E8%A3%85"><span class="toc-text">3.1.1 æ¡†æ¶å®‰è£…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA"><span class="toc-text">3.1.2  é¡¹ç›®åˆ›å»º</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-3-%E5%88%9B%E5%BB%BA%E7%88%AC%E8%99%AB"><span class="toc-text">3.1.3 åˆ›å»ºçˆ¬è™«</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%89%A7%E8%A1%8C%E7%88%AC%E8%99%AB"><span class="toc-text">3.2 æ‰§è¡Œçˆ¬è™«</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E7%BB%88%E7%AB%AF%E8%BF%90%E8%A1%8C%E7%88%AC%E8%99%AB"><span class="toc-text">3.2.1 ç»ˆç«¯è¿è¡Œçˆ¬è™«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-%E8%84%9A%E6%9C%AC%E8%BF%90%E8%A1%8C"><span class="toc-text">3.2.2 è„šæœ¬è¿è¡Œ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-scrapy-shell%E8%B0%83%E8%AF%95"><span class="toc-text">3.3  scrapy shellè°ƒè¯•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%AE%9E%E6%88%98%E6%BC%94%E7%A4%BA"><span class="toc-text">4 å®æˆ˜æ¼”ç¤º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-spider%E7%BB%93%E6%9E%84"><span class="toc-text">4.1  spiderç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE"><span class="toc-text">4.2 å®šä¹‰æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E5%AE%9A%E4%B9%89%E7%AE%A1%E9%81%93%E5%AD%98%E5%82%A8"><span class="toc-text">4.3 å®šä¹‰ç®¡é“å­˜å‚¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-%E9%85%8D%E7%BD%AE%E7%AE%A1%E9%81%93"><span class="toc-text">4.3.1 é…ç½®ç®¡é“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99"><span class="toc-text">4.3.2 å­˜å‚¨æ–‡ä»¶ç¼–å†™</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-3-%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97"><span class="toc-text">4.3.3 é…ç½®æ—¥å¿—</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-scrapy%E8%A1%A8%E5%8D%95%E5%A4%84%E7%90%86"><span class="toc-text">5 scrapyè¡¨å•å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E7%9B%AE%E6%A0%87%E5%9C%B0%E5%9D%80"><span class="toc-text">5.1 ç›®æ ‡åœ°å€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E7%A8%8B%E5%BA%8F%E7%BC%96%E5%86%99"><span class="toc-text">5.2 ç¨‹åºç¼–å†™</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%A1%86%E6%9E%B6%E6%89%A9%E5%B1%95"><span class="toc-text">6 æ¡†æ¶æ‰©å±•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E6%A1%86%E6%9E%B6%E5%8E%BB%E9%87%8D%E8%AE%BE%E8%AE%A1"><span class="toc-text">6.1 æ¡†æ¶å»é‡è®¾è®¡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scrapy%E5%8A%9F%E8%83%BD%E5%AD%A6%E4%B9%A0"><span class="toc-text">ScrapyåŠŸèƒ½å­¦ä¹ </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-scrapy%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96"><span class="toc-text">1 scrapyæ•°æ®æå–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8"><span class="toc-text">1.1. ç›´æ¥ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-xpath%E9%80%89%E6%8B%A9%E5%99%A8"><span class="toc-text">1.2 xpathé€‰æ‹©å™¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D"><span class="toc-text">1.3 æ­£åˆ™åŒ¹é…</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-scrapy%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">2 scrapyä¸­é—´ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E7%9B%AE%E7%9A%84"><span class="toc-text">2.1 ç›®çš„</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E4%B8%AD%E9%97%B4%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.2 ä¸­é—´ä»¶ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">2.3 è‡ªå®šä¹‰ä¸­é—´ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-1-%E6%8B%93%E5%B1%95%E4%B8%93%E9%A2%98-%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E5%8C%96"><span class="toc-text">2.3.1 æ‹“å±•ä¸“é¢˜-é…ç½®è‡ªåŠ¨åŒ–</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-scrapy%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8"><span class="toc-text">3 scrapyæ•°æ®å­˜å‚¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%9F%BA%E4%BA%8Emongo%E5%AD%98%E5%82%A8"><span class="toc-text">3.1 åŸºäºmongoå­˜å‚¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-1-%E7%88%AC%E8%99%AB%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99"><span class="toc-text">3.1.1  çˆ¬è™«æ–‡ä»¶ç¼–å†™</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-2-%E7%AE%A1%E9%81%93%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99"><span class="toc-text">3.1.2  ç®¡é“æ–‡ä»¶ç¼–å†™</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E5%9F%BA%E4%BA%8EMySQL%E5%AD%98%E5%82%A8"><span class="toc-text">3.2 åŸºäºMySQLå­˜å‚¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-%E9%85%8D%E7%BD%AE%E7%BC%96%E5%86%99"><span class="toc-text">3.2.1 é…ç½®ç¼–å†™</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-2-%E5%AD%98%E5%82%A8%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99"><span class="toc-text">3.2.2 å­˜å‚¨æ–‡ä»¶ç¼–å†™</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#feapder-%E6%A1%86%E6%9E%B6"><span class="toc-text">feapder æ¡†æ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#-2"><span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B-2"><span class="toc-text">1 ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E6%94%AF%E6%8C%81%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">1.1  æ”¯æŒçš„åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E6%9E%B6%E6%9E%84%E8%AF%B4%E6%98%8E"><span class="toc-text">1.2 æ¶æ„è¯´æ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-1%E6%A8%A1%E5%9D%97%E8%AF%B4%E6%98%8E"><span class="toc-text">1.2.1æ¨¡å—è¯´æ˜</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-2-%E6%B5%81%E7%A8%8B%E8%AF%B4%E6%98%8E"><span class="toc-text">1.2.2 æµç¨‹è¯´æ˜</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8"><span class="toc-text">2 ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85"><span class="toc-text">2.1 ç¯å¢ƒå®‰è£…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%88%AC%E8%99%AB"><span class="toc-text">2.2 åˆ›å»ºæ™®é€šçˆ¬è™«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E7%88%AC%E8%99%AB%E5%B0%8F%E6%A1%88%E4%BE%8B"><span class="toc-text">2.3 çˆ¬è™«å°æ¡ˆä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-1-%E6%95%B0%E6%8D%AE%E5%85%A5%E5%BA%93"><span class="toc-text">2.3.1 æ•°æ®å…¥åº“</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-text">2.4 è‡ªå®šä¹‰ä¸­é—´ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8B%E8%BD%BD%E5%99%A8"><span class="toc-text">2.5 è‡ªå®šä¹‰ä¸‹è½½å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-%E5%AF%B9%E6%8E%A5%E8%87%AA%E5%8A%A8%E5%8C%96"><span class="toc-text">2.6 å¯¹æ¥è‡ªåŠ¨åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-6-2-%E6%93%8D%E4%BD%9C%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1"><span class="toc-text">2.6.2 æ“ä½œæµè§ˆå™¨å¯¹è±¡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-6-3-%E6%8B%A6%E6%88%AAXHR-%E6%95%B0%E6%8D%AE"><span class="toc-text">2.6.3 æ‹¦æˆªXHR æ•°æ®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-6-4-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-text">2.6.4 ç¤ºä¾‹ä»£ç </span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA"><span class="toc-text">3 é¡¹ç›®æ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">3.1 åˆ›å»ºé¡¹ç›®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%88%AC%E8%99%AB"><span class="toc-text">3.2 åˆ›å»ºæ™®é€šçˆ¬è™«</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E9%85%8D%E7%BD%AE%E8%87%AA%E5%8A%A8%E5%8C%96"><span class="toc-text">3.3 é…ç½®è‡ªåŠ¨åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%88%86%E6%9E%90"><span class="toc-text">3.4 ä¸šåŠ¡é€»è¾‘åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-1-%E7%BF%BB%E9%A1%B5"><span class="toc-text">3.5.1 ç¿»é¡µ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-2-%E7%82%B9%E5%87%BB"><span class="toc-text">3.5.2 ç‚¹å‡»</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90"><span class="toc-text">3.5 æ•°æ®è§£æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-%E6%95%B0%E6%8D%AE%E5%85%A5%E5%BA%93"><span class="toc-text">3.6 æ•°æ®å…¥åº“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scrapy-Redis-%E5%88%86%E5%B8%83%E5%BC%8F"><span class="toc-text">Scrapy-Redis åˆ†å¸ƒå¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%86%E5%B8%83%E5%BC%8F%E6%A6%82%E8%BF%B0"><span class="toc-text">1 åˆ†å¸ƒå¼æ¦‚è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-0-scrapy-redis%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">1.0 scrapy-redisæ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%80%E4%BB%8B"><span class="toc-text">1.1 åˆ†å¸ƒå¼ç®€ä»‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E6%A1%86%E6%9E%B6%E7%AE%80%E4%BB%8B"><span class="toc-text">1.2 æ¡†æ¶ç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-1-%E7%8E%AF%E5%A2%83%E5%BB%BA%E8%AE%BE"><span class="toc-text">1.2.1  ç¯å¢ƒå»ºè®¾</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-2-scrapy-redis%E7%BB%84%E4%BB%B6"><span class="toc-text">1.2.2 scrapy-redisç»„ä»¶</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE"><span class="toc-text">2 åˆ†å¸ƒå¼é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-redis%E9%85%8D%E7%BD%AE"><span class="toc-text">2.1 redisé…ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE"><span class="toc-text">2.2 æ ¸å¿ƒé…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1-%E9%85%8D%E7%BD%AE%E8%B0%83%E5%BA%A6%E9%98%9F%E5%88%97"><span class="toc-text">2.2.1 é…ç½®è°ƒåº¦é˜Ÿåˆ—</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-2-%E9%85%8D%E7%BD%AE%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-text">2.2.2 é…ç½®æŒä¹…åŒ–</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-3-%E9%85%8D%E7%BD%AE%E9%87%8D%E7%88%AC"><span class="toc-text">2.2.3 é…ç½®é‡çˆ¬</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98"><span class="toc-text">3 é¡¹ç›®å®æˆ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E7%9B%AE%E6%A0%87%E5%9C%B0%E5%9D%80"><span class="toc-text">3.1 ç›®æ ‡åœ°å€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E9%A1%B9%E7%9B%AE%E5%88%86%E6%9E%90"><span class="toc-text">3.2 é¡¹ç›®åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-text">3.3 é¡¹ç›®ç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%89%A9%E5%B1%95%E6%96%B9%E9%9D%A2"><span class="toc-text">4 æ‰©å±•æ–¹é¢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%88%AC%E8%99%AB%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2"><span class="toc-text">çˆ¬è™«é¡¹ç›®éƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2"><span class="toc-text">1 è„šæœ¬æ–‡ä»¶éƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-crontab%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">1.1 crontabçš„ä½¿ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E4%B8%BA%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E5%88%9B%E5%BB%BAcron%E6%9C%8D%E5%8A%A1"><span class="toc-text">1.2  ä¸ºå½“å‰ç”¨æˆ·åˆ›å»ºcronæœåŠ¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%8D%95%E4%B8%AA%E8%84%9A%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E9%83%A8%E7%BD%B2"><span class="toc-text">1.3  å•ä¸ªè„šæœ¬ä½¿ç”¨å®šæ—¶ä»»åŠ¡éƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-1-%E4%B8%8A%E4%BC%A0%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">1.3.1 ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°æœåŠ¡å™¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-2-%E5%AE%9A%E6%97%B6%E9%87%87%E9%9B%86%E4%BB%BB%E5%8A%A1"><span class="toc-text">1.3.2 å®šæ—¶é‡‡é›†ä»»åŠ¡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8scrapyd%E9%83%A8%E7%BD%B2"><span class="toc-text">2 ä½¿ç”¨scrapydéƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85-2"><span class="toc-text">2.1 ç¯å¢ƒå®‰è£…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E6%9F%A5%E8%AF%A2%E7%8A%B6%E6%80%81"><span class="toc-text">2.2 æŸ¥è¯¢çŠ¶æ€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E7%88%AC%E8%99%AB%E9%83%A8%E7%BD%B2"><span class="toc-text">2.3 çˆ¬è™«éƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-1-%E5%8F%91%E5%B8%83%E9%A1%B9%E7%9B%AE"><span class="toc-text">2.3.1 å‘å¸ƒé¡¹ç›®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-2-%E5%90%AF%E5%8A%A8%E7%88%AC%E8%99%AB"><span class="toc-text">2.3.2 å¯åŠ¨çˆ¬è™«</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-3-%E5%81%9C%E6%AD%A2%E7%88%AC%E8%99%AB"><span class="toc-text">2.3.3 åœæ­¢çˆ¬è™«</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-4-%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E9%A1%B9%E7%9B%AE"><span class="toc-text">2.3.4 æŸ¥çœ‹å½“å‰é¡¹ç›®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-4-%E6%9F%A5%E7%9C%8B%E8%AF%A6%E6%83%85"><span class="toc-text">2.3.4 æŸ¥çœ‹è¯¦æƒ…</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-5-%E4%BA%A4%E4%BA%92%E8%B0%83%E8%AF%95"><span class="toc-text">2.3.5 äº¤äº’è°ƒè¯•</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Gerapy%E7%88%AC%E8%99%AB%E9%83%A8%E7%BD%B2"><span class="toc-text">3 Gerapyçˆ¬è™«éƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85"><span class="toc-text">3.1 ç¯å¢ƒå®‰è£…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2"><span class="toc-text">3.2 é¡¹ç›®éƒ¨ç½²</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-%E7%95%8C%E9%9D%A2%E5%B1%95%E7%A4%BA"><span class="toc-text">3.2.1  ç•Œé¢å±•ç¤º</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-2-%E7%88%AC%E8%99%AB%E9%83%A8%E7%BD%B2"><span class="toc-text">3.2.2 çˆ¬è™«éƒ¨ç½²</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-docker%E5%AE%B9%E5%99%A8"><span class="toc-text">4 dockerå®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-docker%E7%AE%80%E4%BB%8B"><span class="toc-text">4.1 dockerç®€ä»‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E8%99%9A%E6%8B%9F%E6%9C%BAvirtual-machine"><span class="toc-text">4.2 è™šæ‹Ÿæœºvirtual machine</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E5%AE%B9%E5%99%A8%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%AF%94%E8%BE%83"><span class="toc-text">4.3 å®¹å™¨å’Œè™šæ‹Ÿæœºæ¯”è¾ƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-docker%E5%AE%89%E8%A3%85"><span class="toc-text">4.4 dockerå®‰è£…</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-%E9%95%9C%E5%83%8F%E4%BD%BF%E7%94%A8"><span class="toc-text">4.5 é•œåƒä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-0-%E9%95%9C%E5%83%8F%E6%9F%A5%E6%89%BE"><span class="toc-text">4.5.0 é•œåƒæŸ¥æ‰¾</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-1-%E9%95%9C%E5%83%8F%E5%88%97%E4%B8%BE"><span class="toc-text">4.5.1 é•œåƒåˆ—ä¸¾</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-2-%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E9%95%9C%E5%83%8F"><span class="toc-text">4.5.2 è·å–ä¸€ä¸ªæ–°çš„é•œåƒ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-3-%E6%9F%A5%E6%89%BE%E9%95%9C%E5%83%8F"><span class="toc-text">4.5.3 æŸ¥æ‰¾é•œåƒ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-4-%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F"><span class="toc-text">4.5.4 åˆ é™¤é•œåƒ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-%E5%AE%B9%E5%99%A8%E4%BD%BF%E7%94%A8"><span class="toc-text">4.6 å®¹å™¨ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-6-2-%E5%AE%B9%E5%99%A8%E6%93%8D%E4%BD%9C"><span class="toc-text">4.6.2 å®¹å™¨æ“ä½œ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%88%AC%E8%99%AB%E7%AE%80%E5%8E%86%E5%88%86%E4%BA%AB"><span class="toc-text">5 çˆ¬è™«ç®€å†åˆ†äº«</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-color: transparent;"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">æ ¼è¨€ğŸ§¬</p><div class="bg-ad"><div>å†çœ‹çœ‹é‚£ä¸ªå…‰ç‚¹ï¼Œå®ƒå°±åœ¨è¿™é‡Œï¼Œè¿™æ˜¯å®¶å›­ï¼Œè¿™æ˜¯æˆ‘ä»¬ â€”â€” ä½ æ‰€çˆ±çš„æ¯ä¸€ä¸ªäººï¼Œä½ è®¤è¯†çš„ä¸€ä¸ªäººï¼Œä½ å¬è¯´è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œæ›¾ç»æœ‰è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œéƒ½åœ¨å®ƒä¸Šé¢åº¦è¿‡ä»–ä»¬çš„ä¸€ç”Ÿâœ¨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">ç‚¹å‡»å¼€å¯æ˜Ÿè¾°ä¹‹æ—…</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">çŒœä½ æƒ³çœ‹ğŸ’¡</p><ul class="ft-links"><li><a href="/posts/eec9786.html">é­”æ”¹æŒ‡å—</a><a href="/box/nav/">ç½‘å€å¯¼èˆª</a></li><li><a href="/social/link/">æˆ‘çš„æœ‹å‹</a><a href="/comments/">ç•™ç‚¹ä»€ä¹ˆ</a></li><li><a href="/personal/about/">å…³äºä½œè€…</a><a href="/archives/">æ–‡ç« å½’æ¡£</a></li><li><a href="/categories/">æ–‡ç« åˆ†ç±»</a><a href="/tags/">æ–‡ç« æ ‡ç­¾</a></li><li><a href="/box/Gallery/">æˆ‘çš„ç”»å»Š</a><a href="/personal/bb/">æˆ‘çš„å” å¨</a></li><li><a href="/site/time/">å»ºè®¾è¿›ç¨‹</a><a href="/site/census/">ç½‘ç«™ç»Ÿè®¡</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">æ¨èå‹é“¾âŒ›</p><div class="ft-img-group"><div class="img-group-item"><a href="https://www.fomal.cc/" title="FomalhautğŸ¥"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/60e5d4e39da7c077.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div><div class="img-group-item"><a href="javascript:void(0)" title="å¹¿å‘Šä½æ‹›ç§Ÿ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://lskypro.acozycotage.net/LightPicture/2022/12/65307a5828af6790.webp" alt=""/></a></div></div></div></div><div class="copyright"><span><b>&copy;2022-2025</b></span><span><b>&nbsp;&nbsp;By czzğŸ•‰ï¸</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Frame-Hexo-blue.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.3.1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œä¸»çº¿è·¯æ‰˜ç®¡äºVercel"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://user.51.la/" style="margin-inline:5px" title="æœ¬ç«™æ•°æ®åˆ†æå¾—ç›Šäº51laæŠ€æœ¯æ”¯æŒ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Analytics-51la-3db1eb.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20226665" style="margin-inline:5px" title="æœ¬ç«™å·²åŠ å…¥èŒICPè±ªåå¥—é¤ï¼ŒèŒICPå¤‡20226665å·"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/èŒICPå¤‡-20226665-fe1384.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://bitiful.dogecast.com/buckets" style="margin-inline:5px" title="æœ¬ç½‘ç«™ç»Service Workeråˆ†æµè‡³ç¼¤çº·äº‘å¯¹è±¡å­˜å‚¨"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Bucket-ç¼¤çº·äº‘-9c62da.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="æœ¬ç«™ä½¿ç”¨ç½‘ç›¾æ˜Ÿçƒæä¾›CDNåŠ é€Ÿä¸é˜²æŠ¤"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/CDN-ç½‘ç›¾æ˜Ÿçƒ-fff2cc.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç½‘ç«™æºç ç”±Githubæä¾›å­˜å‚¨ä»“åº“"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="å³é”®æ¨¡å¼" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>ç™¾åº¦æœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>ç©ºé™è¯„è®º</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>å¤åˆ¶æœ¬æ–‡åœ°å€</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>ä¿å­˜å›¾ç‰‡</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>åœ¨æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶å›¾ç‰‡é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>å…³äºåšå®¢</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>ç¾åŒ–è®¾ç½®</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>åˆ‡æ¢å…¨å±</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>æ‰“å°é¡µé¢</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><div class="aplayer no-destroy" data-id="2379161415" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true" data-lrcType="-1"> </div><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><a class="magnet_link_more"  href="https://www.fomal.cc/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';
    console.log('å·²æŒ‚è½½magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('å·²æŒ‚è½½gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("/api?null",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'null')
    }
  </script><!-- hexo injector body_end end --></body></html>